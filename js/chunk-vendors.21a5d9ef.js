"use strict";(self["webpackChunktelem"]=self["webpackChunktelem"]||[]).push([[504],{953:function(t,e,i){i.d(e,{C4:function(){return b},EW:function(){return Mt},Gc:function(){return gt},IG:function(){return At},IJ:function(){return It},KR:function(){return Lt},Kh:function(){return ft},Pr:function(){return Nt},R1:function(){return Ot},X2:function(){return h},bl:function(){return v},fE:function(){return _t},g8:function(){return vt},hZ:function(){return k},i9:function(){return Pt},ju:function(){return xt},o5:function(){return l},u4:function(){return T},ux:function(){return wt},yC:function(){return o}});var s=i(33);
/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let n,r;class o{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=n,!t&&n&&(this.index=(n.scopes||(n.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=n;try{return n=this,t()}finally{n=e}}else 0}on(){n=this}off(){n=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function a(t,e=n){e&&e.active&&e.effects.push(t)}function l(){return n}class h{constructor(t,e,i,s){this.fn=t,this.trigger=e,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,a(this,s)}get dirty(){if(2===this._dirtyLevel||3===this._dirtyLevel){this._dirtyLevel=1,b();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(c(e.computed),this._dirtyLevel>=4))break}1===this._dirtyLevel&&(this._dirtyLevel=0),v()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=f,e=r;try{return f=!0,r=this,this._runnings++,d(this),this.fn()}finally{u(this),this._runnings--,r=e,f=t}}stop(){this.active&&(d(this),u(this),this.onStop&&this.onStop(),this.active=!1)}}function c(t){return t.value}function d(t){t._trackId++,t._depsLength=0}function u(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)p(t.deps[e],t);t.deps.length=t._depsLength}}function p(t,e){const i=t.get(e);void 0!==i&&e._trackId!==i&&(t.delete(e),0===t.size&&t.cleanup())}let f=!0,g=0;const m=[];function b(){m.push(f),f=!1}function v(){const t=m.pop();f=void 0===t||t}function y(){g++}function _(){g--;while(!g&&w.length)w.shift()()}function x(t,e,i){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&p(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const w=[];function A(t,e,i){y();for(const s of t.keys()){let i;s._dirtyLevel<e&&(null!=i?i:i=t.get(s)===s._trackId)&&(s._shouldSchedule||(s._shouldSchedule=0===s._dirtyLevel),s._dirtyLevel=e),s._shouldSchedule&&(null!=i?i:i=t.get(s)===s._trackId)&&(s.trigger(),s._runnings&&!s.allowRecurse||2===s._dirtyLevel||(s._shouldSchedule=!1,s.scheduler&&w.push(s.scheduler)))}_()}const S=(t,e)=>{const i=new Map;return i.cleanup=t,i.computed=e,i},E=new WeakMap,C=Symbol(""),M=Symbol("");function T(t,e,i){if(f&&r){let e=E.get(t);e||E.set(t,e=new Map);let s=e.get(i);s||e.set(i,s=S((()=>e.delete(i)))),x(r,s,void 0)}}function k(t,e,i,n,r,o){const a=E.get(t);if(!a)return;let l=[];if("clear"===e)l=[...a.values()];else if("length"===i&&(0,s.cy)(t)){const t=Number(n);a.forEach(((e,i)=>{("length"===i||!(0,s.Bm)(i)&&i>=t)&&l.push(e)}))}else switch(void 0!==i&&l.push(a.get(i)),e){case"add":(0,s.cy)(t)?(0,s.yI)(i)&&l.push(a.get("length")):(l.push(a.get(C)),(0,s.CE)(t)&&l.push(a.get(M)));break;case"delete":(0,s.cy)(t)||(l.push(a.get(C)),(0,s.CE)(t)&&l.push(a.get(M)));break;case"set":(0,s.CE)(t)&&l.push(a.get(C));break}y();for(const s of l)s&&A(s,4,void 0);_()}const P=(0,s.pD)("__proto__,__v_isRef,__isVue"),L=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(s.Bm)),I=R();function R(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const i=wt(this);for(let e=0,n=this.length;e<n;e++)T(i,"get",e+"");const s=i[e](...t);return-1===s||!1===s?i[e](...t.map(wt)):s}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){b(),y();const i=wt(this)[e].apply(this,t);return _(),v(),i}})),t}function D(t){(0,s.Bm)(t)||(t=String(t));const e=wt(this);return T(e,"has",t),e.hasOwnProperty(t)}class O{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){const n=this._isReadonly,r=this._isShallow;if("__v_isReactive"===e)return!n;if("__v_isReadonly"===e)return n;if("__v_isShallow"===e)return r;if("__v_raw"===e)return i===(n?r?dt:ct:r?ht:lt).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=(0,s.cy)(t);if(!n){if(o&&(0,s.$3)(I,e))return Reflect.get(I,e,i);if("hasOwnProperty"===e)return D}const a=Reflect.get(t,e,i);return((0,s.Bm)(e)?L.has(e):P(e))?a:(n||T(t,"get",e),r?a:Pt(a)?o&&(0,s.yI)(e)?a:a.value:(0,s.Gv)(a)?n?mt(a):ft(a):a)}}class F extends O{constructor(t=!1){super(!1,t)}set(t,e,i,n){let r=t[e];if(!this._isShallow){const e=yt(r);if(_t(i)||yt(i)||(r=wt(r),i=wt(i)),!(0,s.cy)(t)&&Pt(r)&&!Pt(i))return!e&&(r.value=i,!0)}const o=(0,s.cy)(t)&&(0,s.yI)(e)?Number(e)<t.length:(0,s.$3)(t,e),a=Reflect.set(t,e,i,n);return t===wt(n)&&(o?(0,s.$H)(i,r)&&k(t,"set",e,i,r):k(t,"add",e,i)),a}deleteProperty(t,e){const i=(0,s.$3)(t,e),n=t[e],r=Reflect.deleteProperty(t,e);return r&&i&&k(t,"delete",e,void 0,n),r}has(t,e){const i=Reflect.has(t,e);return(0,s.Bm)(e)&&L.has(e)||T(t,"has",e),i}ownKeys(t){return T(t,"iterate",(0,s.cy)(t)?"length":C),Reflect.ownKeys(t)}}class N extends O{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const B=new F,z=new N,H=new F(!0),j=t=>t,$=t=>Reflect.getPrototypeOf(t);function U(t,e,i=!1,n=!1){t=t["__v_raw"];const r=wt(t),o=wt(e);i||((0,s.$H)(e,o)&&T(r,"get",e),T(r,"get",o));const{has:a}=$(r),l=n?j:i?Et:St;return a.call(r,e)?l(t.get(e)):a.call(r,o)?l(t.get(o)):void(t!==r&&t.get(e))}function V(t,e=!1){const i=this["__v_raw"],n=wt(i),r=wt(t);return e||((0,s.$H)(t,r)&&T(n,"has",t),T(n,"has",r)),t===r?i.has(t):i.has(t)||i.has(r)}function W(t,e=!1){return t=t["__v_raw"],!e&&T(wt(t),"iterate",C),Reflect.get(t,"size",t)}function G(t){t=wt(t);const e=wt(this),i=$(e),s=i.has.call(e,t);return s||(e.add(t),k(e,"add",t,t)),this}function K(t,e){e=wt(e);const i=wt(this),{has:n,get:r}=$(i);let o=n.call(i,t);o||(t=wt(t),o=n.call(i,t));const a=r.call(i,t);return i.set(t,e),o?(0,s.$H)(e,a)&&k(i,"set",t,e,a):k(i,"add",t,e),this}function q(t){const e=wt(this),{has:i,get:s}=$(e);let n=i.call(e,t);n||(t=wt(t),n=i.call(e,t));const r=s?s.call(e,t):void 0,o=e.delete(t);return n&&k(e,"delete",t,void 0,r),o}function X(){const t=wt(this),e=0!==t.size,i=void 0,s=t.clear();return e&&k(t,"clear",void 0,void 0,i),s}function Y(t,e){return function(i,s){const n=this,r=n["__v_raw"],o=wt(r),a=e?j:t?Et:St;return!t&&T(o,"iterate",C),r.forEach(((t,e)=>i.call(s,a(t),a(e),n)))}}function Q(t,e,i){return function(...n){const r=this["__v_raw"],o=wt(r),a=(0,s.CE)(o),l="entries"===t||t===Symbol.iterator&&a,h="keys"===t&&a,c=r[t](...n),d=i?j:e?Et:St;return!e&&T(o,"iterate",h?M:C),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:l?[d(t[0]),d(t[1])]:d(t),done:e}},[Symbol.iterator](){return this}}}}function Z(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function J(){const t={get(t){return U(this,t)},get size(){return W(this)},has:V,add:G,set:K,delete:q,clear:X,forEach:Y(!1,!1)},e={get(t){return U(this,t,!1,!0)},get size(){return W(this)},has:V,add:G,set:K,delete:q,clear:X,forEach:Y(!1,!0)},i={get(t){return U(this,t,!0)},get size(){return W(this,!0)},has(t){return V.call(this,t,!0)},add:Z("add"),set:Z("set"),delete:Z("delete"),clear:Z("clear"),forEach:Y(!0,!1)},s={get(t){return U(this,t,!0,!0)},get size(){return W(this,!0)},has(t){return V.call(this,t,!0)},add:Z("add"),set:Z("set"),delete:Z("delete"),clear:Z("clear"),forEach:Y(!0,!0)},n=["keys","values","entries",Symbol.iterator];return n.forEach((n=>{t[n]=Q(n,!1,!1),i[n]=Q(n,!0,!1),e[n]=Q(n,!1,!0),s[n]=Q(n,!0,!0)})),[t,i,e,s]}const[tt,et,it,st]=J();function nt(t,e){const i=e?t?st:it:t?et:tt;return(e,n,r)=>"__v_isReactive"===n?!t:"__v_isReadonly"===n?t:"__v_raw"===n?e:Reflect.get((0,s.$3)(i,n)&&n in e?i:e,n,r)}const rt={get:nt(!1,!1)},ot={get:nt(!1,!0)},at={get:nt(!0,!1)};const lt=new WeakMap,ht=new WeakMap,ct=new WeakMap,dt=new WeakMap;function ut(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:ut((0,s.Zf)(t))}function ft(t){return yt(t)?t:bt(t,!1,B,rt,lt)}function gt(t){return bt(t,!1,H,ot,ht)}function mt(t){return bt(t,!0,z,at,ct)}function bt(t,e,i,n,r){if(!(0,s.Gv)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=r.get(t);if(o)return o;const a=pt(t);if(0===a)return t;const l=new Proxy(t,2===a?n:i);return r.set(t,l),l}function vt(t){return yt(t)?vt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function yt(t){return!(!t||!t["__v_isReadonly"])}function _t(t){return!(!t||!t["__v_isShallow"])}function xt(t){return!!t&&!!t["__v_raw"]}function wt(t){const e=t&&t["__v_raw"];return e?wt(e):t}function At(t){return Object.isExtensible(t)&&(0,s.yQ)(t,"__v_skip",!0),t}const St=t=>(0,s.Gv)(t)?ft(t):t,Et=t=>(0,s.Gv)(t)?mt(t):t;class Ct{constructor(t,e,i,s){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this.effect=new h((()=>t(this._value)),(()=>kt(this,2===this.effect._dirtyLevel?2:3))),this.effect.computed=this,this.effect.active=this._cacheable=!s,this["__v_isReadonly"]=i}get value(){const t=wt(this);return t._cacheable&&!t.effect.dirty||!(0,s.$H)(t._value,t._value=t.effect.run())||kt(t,4),Tt(t),t.effect._dirtyLevel>=2&&kt(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Mt(t,e,i=!1){let n,r;const o=(0,s.Tn)(t);o?(n=t,r=s.tE):(n=t.get,r=t.set);const a=new Ct(n,r,o||!r,i);return a}function Tt(t){var e;f&&r&&(t=wt(t),x(r,null!=(e=t.dep)?e:t.dep=S((()=>t.dep=void 0),t instanceof Ct?t:void 0),void 0))}function kt(t,e=4,i){t=wt(t);const s=t.dep;s&&A(s,e,void 0)}function Pt(t){return!(!t||!0!==t.__v_isRef)}function Lt(t){return Rt(t,!1)}function It(t){return Rt(t,!0)}function Rt(t,e){return Pt(t)?t:new Dt(t,e)}class Dt{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:wt(t),this._value=e?t:St(t)}get value(){return Tt(this),this._value}set value(t){const e=this.__v_isShallow||_t(t)||yt(t);t=e?t:wt(t),(0,s.$H)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:St(t),kt(this,4,t))}}function Ot(t){return Pt(t)?t.value:t}const Ft={get:(t,e,i)=>Ot(Reflect.get(t,e,i)),set:(t,e,i,s)=>{const n=t[e];return Pt(n)&&!Pt(i)?(n.value=i,!0):Reflect.set(t,e,i,s)}};function Nt(t){return vt(t)?t:new Proxy(t,Ft)}},641:function(t,e,i){i.d(e,{$u:function(){return Ot},CE:function(){return ri},Df:function(){return yt},EW:function(){return Gi},FK:function(){return qe},Fv:function(){return bi},Gt:function(){return ge},Gy:function(){return ht},K9:function(){return ze},Lk:function(){return di},MZ:function(){return vt},OW:function(){return gt},Q3:function(){return vi},QP:function(){return dt},Qi:function(){return O},RG:function(){return Ut},WQ:function(){return me},Wv:function(){return oi},bF:function(){return ui},bo:function(){return rt},dY:function(){return v},eW:function(){return mi},g2:function(){return W},h:function(){return Ki},hi:function(){return Nt},jt:function(){return F},k6:function(){return N},nI:function(){return Ti},pI:function(){return $t},pM:function(){return _t},pR:function(){return pt},qL:function(){return o},rE:function(){return qi},sV:function(){return Rt},uX:function(){return ti},wB:function(){return tt}});var s=i(953),n=i(33);function r(t,e,i,s){try{return s?t(...s):t()}catch(n){a(n,e,i)}}function o(t,e,i,s){if((0,n.Tn)(t)){const o=r(t,e,i,s);return o&&(0,n.yL)(o)&&o.catch((t=>{a(t,e,i)})),o}if((0,n.cy)(t)){const n=[];for(let r=0;r<t.length;r++)n.push(o(t[r],e,i,s));return n}}function a(t,e,i,n=!0){const o=e?e.vnode:null;if(e){let n=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${i}`;while(n){const e=n.ec;if(e)for(let i=0;i<e.length;i++)if(!1===e[i](t,o,a))return;n=n.parent}const l=e.appContext.config.errorHandler;if(l)return(0,s.C4)(),r(l,null,10,[t,o,a]),void(0,s.bl)()}l(t,i,o,n)}function l(t,e,i,s=!0){console.error(t)}let h=!1,c=!1;const d=[];let u=0;const p=[];let f=null,g=0;const m=Promise.resolve();let b=null;function v(t){const e=b||m;return t?e.then(this?t.bind(this):t):e}function y(t){let e=u+1,i=d.length;while(e<i){const s=e+i>>>1,n=d[s],r=C(n);r<t||r===t&&n.pre?e=s+1:i=s}return e}function _(t){d.length&&d.includes(t,h&&t.allowRecurse?u+1:u)||(null==t.id?d.push(t):d.splice(y(t.id),0,t),x())}function x(){h||c||(c=!0,b=m.then(T))}function w(t){const e=d.indexOf(t);e>u&&d.splice(e,1)}function A(t){(0,n.cy)(t)?p.push(...t):f&&f.includes(t,t.allowRecurse?g+1:g)||p.push(t),x()}function S(t,e,i=(h?u+1:0)){for(0;i<d.length;i++){const e=d[i];if(e&&e.pre){if(t&&e.id!==t.uid)continue;0,d.splice(i,1),i--,e()}}}function E(t){if(p.length){const t=[...new Set(p)].sort(((t,e)=>C(t)-C(e)));if(p.length=0,f)return void f.push(...t);for(f=t,g=0;g<f.length;g++)f[g]();f=null,g=0}}const C=t=>null==t.id?1/0:t.id,M=(t,e)=>{const i=C(t)-C(e);if(0===i){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return i};function T(t){c=!1,h=!0,d.sort(M);n.tE;try{for(u=0;u<d.length;u++){const t=d[u];t&&!1!==t.active&&r(t,null,14)}}finally{u=0,d.length=0,E(t),h=!1,b=null,(d.length||p.length)&&T(t)}}function k(t,e,...i){if(t.isUnmounted)return;const s=t.vnode.props||n.MZ;let r=i;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in s){const t=`${"modelValue"===l?"model":l}Modifiers`,{number:e,trim:o}=s[t]||n.MZ;o&&(r=i.map((t=>(0,n.Kg)(t)?t.trim():t))),e&&(r=i.map(n.bB))}let h;let c=s[h=(0,n.rU)(e)]||s[h=(0,n.rU)((0,n.PT)(e))];!c&&a&&(c=s[h=(0,n.rU)((0,n.Tg)(e))]),c&&o(c,t,6,r);const d=s[h+"Once"];if(d){if(t.emitted){if(t.emitted[h])return}else t.emitted={};t.emitted[h]=!0,o(d,t,6,r)}}function P(t,e,i=!1){const s=e.emitsCache,r=s.get(t);if(void 0!==r)return r;const o=t.emits;let a={},l=!1;if(!(0,n.Tn)(t)){const s=t=>{const i=P(t,e,!0);i&&(l=!0,(0,n.X$)(a,i))};!i&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}return o||l?((0,n.cy)(o)?o.forEach((t=>a[t]=null)):(0,n.X$)(a,o),(0,n.Gv)(t)&&s.set(t,a),a):((0,n.Gv)(t)&&s.set(t,null),null)}function L(t,e){return!(!t||!(0,n.Mp)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,n.$3)(t,e[0].toLowerCase()+e.slice(1))||(0,n.$3)(t,(0,n.Tg)(e))||(0,n.$3)(t,e))}let I=null,R=null;function D(t){const e=I;return I=t,R=t&&t.type.__scopeId||null,e}function O(t){R=t}function F(){R=null}function N(t,e=I,i){if(!e)return t;if(t._n)return t;const s=(...i)=>{s._d&&si(-1);const n=D(e);let r;try{r=t(...i)}finally{D(n),s._d&&si(1)}return r};return s._n=!0,s._c=!0,s._d=!0,s}function B(t){const{type:e,vnode:i,proxy:s,withProxy:r,propsOptions:[o],slots:l,attrs:h,emit:c,render:d,renderCache:u,props:p,data:f,setupState:g,ctx:m,inheritAttrs:b}=t,v=D(t);let y,_;try{if(4&i.shapeFlag){const t=r||s,e=t;y=yi(d.call(e,t,u,p,g,f,m)),_=h}else{const t=e;0,y=yi(t.length>1?t(p,{attrs:h,slots:l,emit:c}):t(p,null)),_=e.props?h:z(h)}}catch(w){Ze.length=0,a(w,t,1),y=ui(Ye)}let x=y;if(_&&!1!==b){const t=Object.keys(_),{shapeFlag:e}=x;t.length&&7&e&&(o&&t.some(n.CP)&&(_=H(_,o)),x=gi(x,_,!1,!0))}return i.dirs&&(x=gi(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(i.dirs):i.dirs),i.transition&&(x.transition=i.transition),y=x,D(v),y}const z=t=>{let e;for(const i in t)("class"===i||"style"===i||(0,n.Mp)(i))&&((e||(e={}))[i]=t[i]);return e},H=(t,e)=>{const i={};for(const s in t)(0,n.CP)(s)&&s.slice(9)in e||(i[s]=t[s]);return i};function j(t,e,i){const{props:s,children:n,component:r}=t,{props:o,children:a,patchFlag:l}=e,h=r.emitsOptions;if(e.dirs||e.transition)return!0;if(!(i&&l>=0))return!(!n&&!a||a&&a.$stable)||s!==o&&(s?!o||$(s,o,h):!!o);if(1024&l)return!0;if(16&l)return s?$(s,o,h):!!o;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const i=t[e];if(o[i]!==s[i]&&!L(h,i))return!0}}return!1}function $(t,e,i){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(e[r]!==t[r]&&!L(i,r))return!0}return!1}function U({vnode:t,parent:e},i){while(e){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s!==t)break;(t=e.vnode).el=i,e=e.parent}}const V="components";function W(t,e){return K(V,t,!0,e)||t}const G=Symbol.for("v-ndc");function K(t,e,i=!0,s=!1){const r=I||Mi;if(r){const i=r.type;if(t===V){const t=Vi(i,!1);if(t&&(t===e||t===(0,n.PT)(e)||t===(0,n.ZH)((0,n.PT)(e))))return i}const o=q(r[t]||i[t],e)||q(r.appContext[t],e);return!o&&s?i:o}}function q(t,e){return t&&(t[e]||t[(0,n.PT)(e)]||t[(0,n.ZH)((0,n.PT)(e))])}const X=t=>t.__isSuspense;function Y(t,e){e&&e.pendingBranch?(0,n.cy)(t)?e.effects.push(...t):e.effects.push(t):A(t)}const Q=Symbol.for("v-scx"),Z=()=>{{const t=me(Q);return t}};const J={};function tt(t,e,i){return et(t,e,i)}function et(t,e,{immediate:i,deep:a,flush:l,once:h,onTrack:c,onTrigger:d}=n.MZ){if(e&&h){const t=e;e=(...e)=>{t(...e),C()}}const u=Mi,p=t=>!0===a?t:nt(t,!1===a?1:void 0);let f,g,m=!1,b=!1;if((0,s.i9)(t)?(f=()=>t.value,m=(0,s.fE)(t)):(0,s.g8)(t)?(f=()=>p(t),m=!0):(0,n.cy)(t)?(b=!0,m=t.some((t=>(0,s.g8)(t)||(0,s.fE)(t))),f=()=>t.map((t=>(0,s.i9)(t)?t.value:(0,s.g8)(t)?p(t):(0,n.Tn)(t)?r(t,u,2):void 0))):f=(0,n.Tn)(t)?e?()=>r(t,u,2):()=>(g&&g(),o(t,u,3,[y])):n.tE,e&&a){const t=f;f=()=>nt(t())}let v,y=t=>{g=S.onStop=()=>{r(t,u,4),g=S.onStop=void 0}};if(Fi){if(y=n.tE,e?i&&o(e,u,3,[f(),b?[]:void 0,y]):f(),"sync"!==l)return n.tE;{const t=Z();v=t.__watcherHandles||(t.__watcherHandles=[])}}let x=b?new Array(t.length).fill(J):J;const w=()=>{if(S.active&&S.dirty)if(e){const t=S.run();(a||m||(b?t.some(((t,e)=>(0,n.$H)(t,x[e]))):(0,n.$H)(t,x)))&&(g&&g(),o(e,u,3,[t,x===J?void 0:b&&x[0]===J?[]:x,y]),x=t)}else S.run()};let A;w.allowRecurse=!!e,"sync"===l?A=w:"post"===l?A=()=>Be(w,u&&u.suspense):(w.pre=!0,u&&(w.id=u.uid),A=()=>_(w));const S=new s.X2(f,n.tE,A),E=(0,s.o5)(),C=()=>{S.stop(),E&&(0,n.TF)(E.effects,S)};return e?i?w():x=S.run():"post"===l?Be(S.run.bind(S),u&&u.suspense):S.run(),v&&v.push(C),C}function it(t,e,i){const s=this.proxy,r=(0,n.Kg)(t)?t.includes(".")?st(s,t):()=>s[t]:t.bind(s,s);let o;(0,n.Tn)(e)?o=e:(o=e.handler,i=e);const a=Li(this),l=et(r,o.bind(s),i);return a(),l}function st(t,e){const i=e.split(".");return()=>{let e=t;for(let t=0;t<i.length&&e;t++)e=e[i[t]];return e}}function nt(t,e=1/0,i){if(e<=0||!(0,n.Gv)(t)||t["__v_skip"])return t;if(i=i||new Set,i.has(t))return t;if(i.add(t),e--,(0,s.i9)(t))nt(t.value,e,i);else if((0,n.cy)(t))for(let s=0;s<t.length;s++)nt(t[s],e,i);else if((0,n.vM)(t)||(0,n.CE)(t))t.forEach((t=>{nt(t,e,i)}));else if((0,n.Qd)(t))for(const s in t)nt(t[s],e,i);return t}function rt(t,e){if(null===I)return t;const i=Ui(I)||I.proxy,s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[t,o,a,l=n.MZ]=e[r];t&&((0,n.Tn)(t)&&(t={mounted:t,updated:t}),t.deep&&nt(o),s.push({dir:t,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function ot(t,e,i,n){const r=t.dirs,a=e&&e.dirs;for(let l=0;l<r.length;l++){const h=r[l];a&&(h.oldValue=a[l].value);let c=h.dir[n];c&&((0,s.C4)(),o(c,i,8,[t.el,h,t,e]),(0,s.bl)())}}const at=Symbol("_leaveCb"),lt=Symbol("_enterCb");function ht(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Rt((()=>{t.isMounted=!0})),Ft((()=>{t.isUnmounting=!0})),t}const ct=[Function,Array],dt={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ct,onEnter:ct,onAfterEnter:ct,onEnterCancelled:ct,onBeforeLeave:ct,onLeave:ct,onAfterLeave:ct,onLeaveCancelled:ct,onBeforeAppear:ct,onAppear:ct,onAfterAppear:ct,onAppearCancelled:ct},ut={name:"BaseTransition",props:dt,setup(t,{slots:e}){const i=Ti(),n=ht();return()=>{const r=e.default&&yt(e.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){let t=!1;for(const e of r)if(e.type!==Ye){0,o=e,t=!0;break}}const a=(0,s.ux)(t),{mode:l}=a;if(n.isLeaving)return mt(o);const h=bt(o);if(!h)return mt(o);const c=gt(h,a,n,i);vt(h,c);const d=i.subTree,u=d&&bt(d);if(u&&u.type!==Ye&&!li(h,u)){const t=gt(u,a,n,i);if(vt(u,t),"out-in"===l&&h.type!==Ye)return n.isLeaving=!0,t.afterLeave=()=>{n.isLeaving=!1,!1!==i.update.active&&(i.effect.dirty=!0,i.update())},mt(o);"in-out"===l&&h.type!==Ye&&(t.delayLeave=(t,e,i)=>{const s=ft(n,u);s[String(u.key)]=u,t[at]=()=>{e(),t[at]=void 0,delete c.delayedLeave},c.delayedLeave=i})}return o}}},pt=ut;function ft(t,e){const{leavingVNodes:i}=t;let s=i.get(e.type);return s||(s=Object.create(null),i.set(e.type,s)),s}function gt(t,e,i,s){const{appear:r,mode:a,persisted:l=!1,onBeforeEnter:h,onEnter:c,onAfterEnter:d,onEnterCancelled:u,onBeforeLeave:p,onLeave:f,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:b,onAppear:v,onAfterAppear:y,onAppearCancelled:_}=e,x=String(t.key),w=ft(i,t),A=(t,e)=>{t&&o(t,s,9,e)},S=(t,e)=>{const i=e[1];A(t,e),(0,n.cy)(t)?t.every((t=>t.length<=1))&&i():t.length<=1&&i()},E={mode:a,persisted:l,beforeEnter(e){let s=h;if(!i.isMounted){if(!r)return;s=b||h}e[at]&&e[at](!0);const n=w[x];n&&li(t,n)&&n.el[at]&&n.el[at](),A(s,[e])},enter(t){let e=c,s=d,n=u;if(!i.isMounted){if(!r)return;e=v||c,s=y||d,n=_||u}let o=!1;const a=t[lt]=e=>{o||(o=!0,A(e?n:s,[t]),E.delayedLeave&&E.delayedLeave(),t[lt]=void 0)};e?S(e,[t,a]):a()},leave(e,s){const n=String(t.key);if(e[lt]&&e[lt](!0),i.isUnmounting)return s();A(p,[e]);let r=!1;const o=e[at]=i=>{r||(r=!0,s(),A(i?m:g,[e]),e[at]=void 0,w[n]===t&&delete w[n])};w[n]=t,f?S(f,[e,o]):o()},clone(t){return gt(t,e,i,s)}};return E}function mt(t){if(wt(t))return t=gi(t),t.children=null,t}function bt(t){if(!wt(t))return t;const{shapeFlag:e,children:i}=t;if(i){if(16&e)return i[0];if(32&e&&(0,n.Tn)(i.default))return i.default()}}function vt(t,e){6&t.shapeFlag&&t.component?vt(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function yt(t,e=!1,i){let s=[],n=0;for(let r=0;r<t.length;r++){let o=t[r];const a=null==i?o.key:String(i)+String(null!=o.key?o.key:r);o.type===qe?(128&o.patchFlag&&n++,s=s.concat(yt(o.children,e,a))):(e||o.type!==Ye)&&s.push(null!=a?gi(o,{key:a}):o)}if(n>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}
/*! #__NO_SIDE_EFFECTS__ */function _t(t,e){return(0,n.Tn)(t)?(()=>(0,n.X$)({name:t.name},e,{setup:t}))():t}const xt=t=>!!t.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;const wt=t=>t.type.__isKeepAlive;RegExp,RegExp;function At(t,e){return(0,n.cy)(t)?t.some((t=>At(t,e))):(0,n.Kg)(t)?t.split(",").includes(e):!!(0,n.gd)(t)&&t.test(e)}function St(t,e){Ct(t,"a",e)}function Et(t,e){Ct(t,"da",e)}function Ct(t,e,i=Mi){const s=t.__wdc||(t.__wdc=()=>{let e=i;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Pt(e,s,i),i){let t=i.parent;while(t&&t.parent)wt(t.parent.vnode)&&Mt(s,e,i,t),t=t.parent}}function Mt(t,e,i,s){const r=Pt(e,t,s,!0);Nt((()=>{(0,n.TF)(s[e],r)}),i)}function Tt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function kt(t){return 128&t.shapeFlag?t.ssContent:t}function Pt(t,e,i=Mi,n=!1){if(i){const r=i[t]||(i[t]=[]),a=e.__weh||(e.__weh=(...n)=>{if(i.isUnmounted)return;(0,s.C4)();const r=Li(i),a=o(e,i,t,n);return r(),(0,s.bl)(),a});return n?r.unshift(a):r.push(a),a}}const Lt=t=>(e,i=Mi)=>(!Fi||"sp"===t)&&Pt(t,((...t)=>e(...t)),i),It=Lt("bm"),Rt=Lt("m"),Dt=Lt("bu"),Ot=Lt("u"),Ft=Lt("bum"),Nt=Lt("um"),Bt=Lt("sp"),zt=Lt("rtg"),Ht=Lt("rtc");function jt(t,e=Mi){Pt("ec",t,e)}function $t(t,e,i,s){let r;const o=i&&i[s];if((0,n.cy)(t)||(0,n.Kg)(t)){r=new Array(t.length);for(let i=0,s=t.length;i<s;i++)r[i]=e(t[i],i,void 0,o&&o[i])}else if("number"===typeof t){0,r=new Array(t);for(let i=0;i<t;i++)r[i]=e(i+1,i,void 0,o&&o[i])}else if((0,n.Gv)(t))if(t[Symbol.iterator])r=Array.from(t,((t,i)=>e(t,i,void 0,o&&o[i])));else{const i=Object.keys(t);r=new Array(i.length);for(let s=0,n=i.length;s<n;s++){const n=i[s];r[s]=e(t[n],n,s,o&&o[s])}}else r=[];return i&&(i[s]=r),r}function Ut(t,e,i={},s,n){if(I.isCE||I.parent&&xt(I.parent)&&I.parent.isCE)return"default"!==e&&(i.name=e),ui("slot",i,s&&s());let r=t[e];r&&r._c&&(r._d=!1),ti();const o=r&&Vt(r(i)),a=oi(qe,{key:i.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&1===t._?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Vt(t){return t.some((t=>!ai(t)||t.type!==Ye&&!(t.type===qe&&!Vt(t.children))))?t:null}const Wt=t=>t?Ri(t)?Ui(t)||t.proxy:Wt(t.parent):null,Gt=(0,n.X$)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Wt(t.parent),$root:t=>Wt(t.root),$emit:t=>t.emit,$options:t=>ee(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,_(t.update)}),$nextTick:t=>t.n||(t.n=v.bind(t.proxy)),$watch:t=>it.bind(t)}),Kt=(t,e)=>t!==n.MZ&&!t.__isScriptSetup&&(0,n.$3)(t,e),qt={get({_:t},e){if("__v_skip"===e)return!0;const{ctx:i,setupState:r,data:o,props:a,accessCache:l,type:h,appContext:c}=t;let d;if("$"!==e[0]){const s=l[e];if(void 0!==s)switch(s){case 1:return r[e];case 2:return o[e];case 4:return i[e];case 3:return a[e]}else{if(Kt(r,e))return l[e]=1,r[e];if(o!==n.MZ&&(0,n.$3)(o,e))return l[e]=2,o[e];if((d=t.propsOptions[0])&&(0,n.$3)(d,e))return l[e]=3,a[e];if(i!==n.MZ&&(0,n.$3)(i,e))return l[e]=4,i[e];Yt&&(l[e]=0)}}const u=Gt[e];let p,f;return u?("$attrs"===e&&(0,s.u4)(t.attrs,"get",""),u(t)):(p=h.__cssModules)&&(p=p[e])?p:i!==n.MZ&&(0,n.$3)(i,e)?(l[e]=4,i[e]):(f=c.config.globalProperties,(0,n.$3)(f,e)?f[e]:void 0)},set({_:t},e,i){const{data:s,setupState:r,ctx:o}=t;return Kt(r,e)?(r[e]=i,!0):s!==n.MZ&&(0,n.$3)(s,e)?(s[e]=i,!0):!(0,n.$3)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=i,!0))},has({_:{data:t,setupState:e,accessCache:i,ctx:s,appContext:r,propsOptions:o}},a){let l;return!!i[a]||t!==n.MZ&&(0,n.$3)(t,a)||Kt(e,a)||(l=o[0])&&(0,n.$3)(l,a)||(0,n.$3)(s,a)||(0,n.$3)(Gt,a)||(0,n.$3)(r.config.globalProperties,a)},defineProperty(t,e,i){return null!=i.get?t._.accessCache[e]=0:(0,n.$3)(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function Xt(t){return(0,n.cy)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let Yt=!0;function Qt(t){const e=ee(t),i=t.proxy,r=t.ctx;Yt=!1,e.beforeCreate&&Jt(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:l,watch:h,provide:c,inject:d,created:u,beforeMount:p,mounted:f,beforeUpdate:g,updated:m,activated:b,deactivated:v,beforeDestroy:y,beforeUnmount:_,destroyed:x,unmounted:w,render:A,renderTracked:S,renderTriggered:E,errorCaptured:C,serverPrefetch:M,expose:T,inheritAttrs:k,components:P,directives:L,filters:I}=e,R=null;if(d&&Zt(d,r,R),l)for(const s in l){const t=l[s];(0,n.Tn)(t)&&(r[s]=t.bind(i))}if(o){0;const e=o.call(i,i);0,(0,n.Gv)(e)&&(t.data=(0,s.Kh)(e))}if(Yt=!0,a)for(const s in a){const t=a[s],e=(0,n.Tn)(t)?t.bind(i,i):(0,n.Tn)(t.get)?t.get.bind(i,i):n.tE;0;const o=!(0,n.Tn)(t)&&(0,n.Tn)(t.set)?t.set.bind(i):n.tE,l=Gi({get:e,set:o});Object.defineProperty(r,s,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(h)for(const s in h)te(h[s],r,i,s);if(c){const t=(0,n.Tn)(c)?c.call(i):c;Reflect.ownKeys(t).forEach((e=>{ge(e,t[e])}))}function D(t,e){(0,n.cy)(e)?e.forEach((e=>t(e.bind(i)))):e&&t(e.bind(i))}if(u&&Jt(u,t,"c"),D(It,p),D(Rt,f),D(Dt,g),D(Ot,m),D(St,b),D(Et,v),D(jt,C),D(Ht,S),D(zt,E),D(Ft,_),D(Nt,w),D(Bt,M),(0,n.cy)(T))if(T.length){const e=t.exposed||(t.exposed={});T.forEach((t=>{Object.defineProperty(e,t,{get:()=>i[t],set:e=>i[t]=e})}))}else t.exposed||(t.exposed={});A&&t.render===n.tE&&(t.render=A),null!=k&&(t.inheritAttrs=k),P&&(t.components=P),L&&(t.directives=L)}function Zt(t,e,i=n.tE){(0,n.cy)(t)&&(t=oe(t));for(const r in t){const i=t[r];let o;o=(0,n.Gv)(i)?"default"in i?me(i.from||r,i.default,!0):me(i.from||r):me(i),(0,s.i9)(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[r]=o}}function Jt(t,e,i){o((0,n.cy)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,i)}function te(t,e,i,s){const r=s.includes(".")?st(i,s):()=>i[s];if((0,n.Kg)(t)){const i=e[t];(0,n.Tn)(i)&&tt(r,i)}else if((0,n.Tn)(t))tt(r,t.bind(i));else if((0,n.Gv)(t))if((0,n.cy)(t))t.forEach((t=>te(t,e,i,s)));else{const s=(0,n.Tn)(t.handler)?t.handler.bind(i):e[t.handler];(0,n.Tn)(s)&&tt(r,s,t)}else 0}function ee(t){const e=t.type,{mixins:i,extends:s}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,l=o.get(e);let h;return l?h=l:r.length||i||s?(h={},r.length&&r.forEach((t=>ie(h,t,a,!0))),ie(h,e,a)):h=e,(0,n.Gv)(e)&&o.set(e,h),h}function ie(t,e,i,s=!1){const{mixins:n,extends:r}=e;r&&ie(t,r,i,!0),n&&n.forEach((e=>ie(t,e,i,!0)));for(const o in e)if(s&&"expose"===o);else{const s=se[o]||i&&i[o];t[o]=s?s(t[o],e[o]):e[o]}return t}const se={data:ne,props:he,emits:he,methods:le,computed:le,beforeCreate:ae,created:ae,beforeMount:ae,mounted:ae,beforeUpdate:ae,updated:ae,beforeDestroy:ae,beforeUnmount:ae,destroyed:ae,unmounted:ae,activated:ae,deactivated:ae,errorCaptured:ae,serverPrefetch:ae,components:le,directives:le,watch:ce,provide:ne,inject:re};function ne(t,e){return e?t?function(){return(0,n.X$)((0,n.Tn)(t)?t.call(this,this):t,(0,n.Tn)(e)?e.call(this,this):e)}:e:t}function re(t,e){return le(oe(t),oe(e))}function oe(t){if((0,n.cy)(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function ae(t,e){return t?[...new Set([].concat(t,e))]:e}function le(t,e){return t?(0,n.X$)(Object.create(null),t,e):e}function he(t,e){return t?(0,n.cy)(t)&&(0,n.cy)(e)?[...new Set([...t,...e])]:(0,n.X$)(Object.create(null),Xt(t),Xt(null!=e?e:{})):e}function ce(t,e){if(!t)return e;if(!e)return t;const i=(0,n.X$)(Object.create(null),t);for(const s in e)i[s]=ae(t[s],e[s]);return i}function de(){return{app:null,config:{isNativeTag:n.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ue=0;function pe(t,e){return function(i,s=null){(0,n.Tn)(i)||(i=(0,n.X$)({},i)),null==s||(0,n.Gv)(s)||(s=null);const r=de(),o=new WeakSet;let a=!1;const l=r.app={_uid:ue++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:qi,get config(){return r.config},set config(t){0},use(t,...e){return o.has(t)||(t&&(0,n.Tn)(t.install)?(o.add(t),t.install(l,...e)):(0,n.Tn)(t)&&(o.add(t),t(l,...e))),l},mixin(t){return r.mixins.includes(t)||r.mixins.push(t),l},component(t,e){return e?(r.components[t]=e,l):r.components[t]},directive(t,e){return e?(r.directives[t]=e,l):r.directives[t]},mount(n,o,h){if(!a){0;const c=ui(i,s);return c.appContext=r,!0===h?h="svg":!1===h&&(h=void 0),o&&e?e(c,n):t(c,n,h),a=!0,l._container=n,n.__vue_app__=l,Ui(c.component)||c.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return r.provides[t]=e,l},runWithContext(t){const e=fe;fe=l;try{return t()}finally{fe=e}}};return l}}let fe=null;function ge(t,e){if(Mi){let i=Mi.provides;const s=Mi.parent&&Mi.parent.provides;s===i&&(i=Mi.provides=Object.create(s)),i[t]=e}else 0}function me(t,e,i=!1){const s=Mi||I;if(s||fe){const r=s?null==s.parent?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:fe._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return i&&(0,n.Tn)(e)?e.call(s&&s.proxy):e}else 0}const be={},ve=()=>Object.create(be),ye=t=>Object.getPrototypeOf(t)===be;function _e(t,e,i,n=!1){const r={},o=ve();t.propsDefaults=Object.create(null),we(t,e,r,o);for(const s in t.propsOptions[0])s in r||(r[s]=void 0);i?t.props=n?r:(0,s.Gc)(r):t.type.props?t.props=r:t.props=o,t.attrs=o}function xe(t,e,i,r){const{props:o,attrs:a,vnode:{patchFlag:l}}=t,h=(0,s.ux)(o),[c]=t.propsOptions;let d=!1;if(!(r||l>0)||16&l){let s;we(t,e,o,a)&&(d=!0);for(const r in h)e&&((0,n.$3)(e,r)||(s=(0,n.Tg)(r))!==r&&(0,n.$3)(e,s))||(c?!i||void 0===i[r]&&void 0===i[s]||(o[r]=Ae(c,h,r,void 0,t,!0)):delete o[r]);if(a!==h)for(const t in a)e&&(0,n.$3)(e,t)||(delete a[t],d=!0)}else if(8&l){const i=t.vnode.dynamicProps;for(let s=0;s<i.length;s++){let r=i[s];if(L(t.emitsOptions,r))continue;const l=e[r];if(c)if((0,n.$3)(a,r))l!==a[r]&&(a[r]=l,d=!0);else{const e=(0,n.PT)(r);o[e]=Ae(c,h,e,l,t,!1)}else l!==a[r]&&(a[r]=l,d=!0)}}d&&(0,s.hZ)(t.attrs,"set","")}function we(t,e,i,r){const[o,a]=t.propsOptions;let l,h=!1;if(e)for(let s in e){if((0,n.SU)(s))continue;const c=e[s];let d;o&&(0,n.$3)(o,d=(0,n.PT)(s))?a&&a.includes(d)?(l||(l={}))[d]=c:i[d]=c:L(t.emitsOptions,s)||s in r&&c===r[s]||(r[s]=c,h=!0)}if(a){const e=(0,s.ux)(i),r=l||n.MZ;for(let s=0;s<a.length;s++){const l=a[s];i[l]=Ae(o,e,l,r[l],t,!(0,n.$3)(r,l))}}return h}function Ae(t,e,i,s,r,o){const a=t[i];if(null!=a){const t=(0,n.$3)(a,"default");if(t&&void 0===s){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,n.Tn)(t)){const{propsDefaults:n}=r;if(i in n)s=n[i];else{const o=Li(r);s=n[i]=t.call(null,e),o()}}else s=t}a[0]&&(o&&!t?s=!1:!a[1]||""!==s&&s!==(0,n.Tg)(i)||(s=!0))}return s}function Se(t,e,i=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const o=t.props,a={},l=[];let h=!1;if(!(0,n.Tn)(t)){const s=t=>{h=!0;const[i,s]=Se(t,e,!0);(0,n.X$)(a,i),s&&l.push(...s)};!i&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}if(!o&&!h)return(0,n.Gv)(t)&&s.set(t,n.Oj),n.Oj;if((0,n.cy)(o))for(let d=0;d<o.length;d++){0;const t=(0,n.PT)(o[d]);Ee(t)&&(a[t]=n.MZ)}else if(o){0;for(const t in o){const e=(0,n.PT)(t);if(Ee(e)){const i=o[t],s=a[e]=(0,n.cy)(i)||(0,n.Tn)(i)?{type:i}:(0,n.X$)({},i);if(s){const t=Te(Boolean,s.type),i=Te(String,s.type);s[0]=t>-1,s[1]=i<0||t<i,(t>-1||(0,n.$3)(s,"default"))&&l.push(e)}}}}const c=[a,l];return(0,n.Gv)(t)&&s.set(t,c),c}function Ee(t){return"$"!==t[0]&&!(0,n.SU)(t)}function Ce(t){if(null===t)return"null";if("function"===typeof t)return t.name||"";if("object"===typeof t){const e=t.constructor&&t.constructor.name;return e||""}return""}function Me(t,e){return Ce(t)===Ce(e)}function Te(t,e){return(0,n.cy)(e)?e.findIndex((e=>Me(e,t))):(0,n.Tn)(e)&&Me(e,t)?0:-1}const ke=t=>"_"===t[0]||"$stable"===t,Pe=t=>(0,n.cy)(t)?t.map(yi):[yi(t)],Le=(t,e,i)=>{if(e._n)return e;const s=N(((...t)=>Pe(e(...t))),i);return s._c=!1,s},Ie=(t,e,i)=>{const s=t._ctx;for(const r in t){if(ke(r))continue;const i=t[r];if((0,n.Tn)(i))e[r]=Le(r,i,s);else if(null!=i){0;const t=Pe(i);e[r]=()=>t}}},Re=(t,e)=>{const i=Pe(e);t.slots.default=()=>i},De=(t,e)=>{const i=t.slots=ve();if(32&t.vnode.shapeFlag){const t=e._;t?((0,n.X$)(i,e),(0,n.yQ)(i,"_",t,!0)):Ie(e,i)}else e&&Re(t,e)},Oe=(t,e,i)=>{const{vnode:s,slots:r}=t;let o=!0,a=n.MZ;if(32&s.shapeFlag){const t=e._;t?i&&1===t?o=!1:((0,n.X$)(r,e),i||1!==t||delete r._):(o=!e.$stable,Ie(e,r)),a=e}else e&&(Re(t,e),a={default:1});if(o)for(const n in r)ke(n)||null!=a[n]||delete r[n]};function Fe(t,e,i,o,a=!1){if((0,n.cy)(t))return void t.forEach(((t,s)=>Fe(t,e&&((0,n.cy)(e)?e[s]:e),i,o,a)));if(xt(o)&&!a)return;const l=4&o.shapeFlag?Ui(o.component)||o.component.proxy:o.el,h=a?null:l,{i:c,r:d}=t;const u=e&&e.r,p=c.refs===n.MZ?c.refs={}:c.refs,f=c.setupState;if(null!=u&&u!==d&&((0,n.Kg)(u)?(p[u]=null,(0,n.$3)(f,u)&&(f[u]=null)):(0,s.i9)(u)&&(u.value=null)),(0,n.Tn)(d))r(d,c,12,[h,p]);else{const e=(0,n.Kg)(d),r=(0,s.i9)(d);if(e||r){const s=()=>{if(t.f){const i=e?(0,n.$3)(f,d)?f[d]:p[d]:d.value;a?(0,n.cy)(i)&&(0,n.TF)(i,l):(0,n.cy)(i)?i.includes(l)||i.push(l):e?(p[d]=[l],(0,n.$3)(f,d)&&(f[d]=p[d])):(d.value=[l],t.k&&(p[t.k]=d.value))}else e?(p[d]=h,(0,n.$3)(f,d)&&(f[d]=h)):r&&(d.value=h,t.k&&(p[t.k]=h))};h?(s.id=-1,Be(s,i)):s()}else 0}}function Ne(){"boolean"!==typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&((0,n.We)().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const Be=Y;function ze(t){return He(t)}function He(t,e){Ne();const i=(0,n.We)();i.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:l,createText:h,createComment:c,setText:d,setElementText:u,parentNode:p,nextSibling:f,setScopeId:g=n.tE,insertStaticContent:m}=t,b=(t,e,i,s=null,n=null,r=null,o=void 0,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!li(t,e)&&(s=Z(t),K(t,n,r,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:h,ref:c,shapeFlag:d}=e;switch(h){case Xe:v(t,e,i,s);break;case Ye:y(t,e,i,s);break;case Qe:null==t&&x(e,i,s,o);break;case qe:D(t,e,i,s,n,r,o,a,l);break;default:1&d?M(t,e,i,s,n,r,o,a,l):6&d?O(t,e,i,s,n,r,o,a,l):(64&d||128&d)&&h.process(t,e,i,s,n,r,o,a,l,et)}null!=c&&n&&Fe(c,t&&t.ref,r,e||t,!e)},v=(t,e,i,s)=>{if(null==t)r(e.el=h(e.children),i,s);else{const i=e.el=t.el;e.children!==t.children&&d(i,e.children)}},y=(t,e,i,s)=>{null==t?r(e.el=c(e.children||""),i,s):e.el=t.el},x=(t,e,i,s)=>{[t.el,t.anchor]=m(t.children,e,i,s,t.el,t.anchor)},A=({el:t,anchor:e},i,s)=>{let n;while(t&&t!==e)n=f(t),r(t,i,s),t=n;r(e,i,s)},C=({el:t,anchor:e})=>{let i;while(t&&t!==e)i=f(t),o(t),t=i;o(e)},M=(t,e,i,s,n,r,o,a,l)=>{"svg"===e.type?o="svg":"math"===e.type&&(o="mathml"),null==t?T(e,i,s,n,r,o,a,l):L(t,e,n,r,o,a,l)},T=(t,e,i,s,o,h,c,d)=>{let p,f;const{props:g,shapeFlag:m,transition:b,dirs:v}=t;if(p=t.el=l(t.type,h,g&&g.is,g),8&m?u(p,t.children):16&m&&P(t.children,p,null,s,o,je(t,h),c,d),v&&ot(t,null,s,"created"),k(p,t,t.scopeId,c,s),g){for(const e in g)"value"===e||(0,n.SU)(e)||a(p,e,null,g[e],h,t.children,s,o,Q);"value"in g&&a(p,"value",null,g.value,h),(f=g.onVnodeBeforeMount)&&Ai(f,s,t)}v&&ot(t,null,s,"beforeMount");const y=Ue(o,b);y&&b.beforeEnter(p),r(p,e,i),((f=g&&g.onVnodeMounted)||y||v)&&Be((()=>{f&&Ai(f,s,t),y&&b.enter(p),v&&ot(t,null,s,"mounted")}),o)},k=(t,e,i,s,n)=>{if(i&&g(t,i),s)for(let r=0;r<s.length;r++)g(t,s[r]);if(n){let i=n.subTree;if(e===i){const e=n.vnode;k(t,e,e.scopeId,e.slotScopeIds,n.parent)}}},P=(t,e,i,s,n,r,o,a,l=0)=>{for(let h=l;h<t.length;h++){const l=t[h]=a?_i(t[h]):yi(t[h]);b(null,l,e,i,s,n,r,o,a)}},L=(t,e,i,s,r,o,l)=>{const h=e.el=t.el;let{patchFlag:c,dynamicChildren:d,dirs:p}=e;c|=16&t.patchFlag;const f=t.props||n.MZ,g=e.props||n.MZ;let m;if(i&&$e(i,!1),(m=g.onVnodeBeforeUpdate)&&Ai(m,i,e,t),p&&ot(e,t,i,"beforeUpdate"),i&&$e(i,!0),d?I(t.dynamicChildren,d,h,i,s,je(e,r),o):l||$(t,e,h,null,i,s,je(e,r),o,!1),c>0){if(16&c)R(h,e,f,g,i,s,r);else if(2&c&&f.class!==g.class&&a(h,"class",null,g.class,r),4&c&&a(h,"style",f.style,g.style,r),8&c){const n=e.dynamicProps;for(let e=0;e<n.length;e++){const o=n[e],l=f[o],c=g[o];c===l&&"value"!==o||a(h,o,l,c,r,t.children,i,s,Q)}}1&c&&t.children!==e.children&&u(h,e.children)}else l||null!=d||R(h,e,f,g,i,s,r);((m=g.onVnodeUpdated)||p)&&Be((()=>{m&&Ai(m,i,e,t),p&&ot(e,t,i,"updated")}),s)},I=(t,e,i,s,n,r,o)=>{for(let a=0;a<e.length;a++){const l=t[a],h=e[a],c=l.el&&(l.type===qe||!li(l,h)||70&l.shapeFlag)?p(l.el):i;b(l,h,c,null,s,n,r,o,!0)}},R=(t,e,i,s,r,o,l)=>{if(i!==s){if(i!==n.MZ)for(const h in i)(0,n.SU)(h)||h in s||a(t,h,i[h],null,l,e.children,r,o,Q);for(const h in s){if((0,n.SU)(h))continue;const c=s[h],d=i[h];c!==d&&"value"!==h&&a(t,h,d,c,l,e.children,r,o,Q)}"value"in s&&a(t,"value",i.value,s.value,l)}},D=(t,e,i,s,n,o,a,l,c)=>{const d=e.el=t?t.el:h(""),u=e.anchor=t?t.anchor:h("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:g}=e;g&&(l=l?l.concat(g):g),null==t?(r(d,i,s),r(u,i,s),P(e.children||[],i,u,n,o,a,l,c)):p>0&&64&p&&f&&t.dynamicChildren?(I(t.dynamicChildren,f,i,n,o,a,l),(null!=e.key||n&&e===n.subTree)&&Ve(t,e,!0)):$(t,e,i,u,n,o,a,l,c)},O=(t,e,i,s,n,r,o,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?n.ctx.activate(e,i,s,o,l):F(e,i,s,n,r,o,l):N(t,e,l)},F=(t,e,i,s,n,r,o)=>{const a=t.component=Ci(t,s,n);if(wt(t)&&(a.ctx.renderer=et),Ni(a),a.asyncDep){if(n&&n.registerDep(a,z),!t.el){const t=a.subTree=ui(Ye);y(null,t,e,i)}}else z(a,t,e,i,n,r,o)},N=(t,e,i)=>{const s=e.component=t.component;if(j(t,e,i)){if(s.asyncDep&&!s.asyncResolved)return void H(s,e,i);s.next=e,w(s.update),s.effect.dirty=!0,s.update()}else e.el=t.el,s.vnode=e},z=(t,e,i,r,o,a,l)=>{const h=()=>{if(t.isMounted){let{next:e,bu:i,u:s,parent:r,vnode:c}=t;{const i=Ge(t);if(i)return e&&(e.el=c.el,H(t,e,l)),void i.asyncDep.then((()=>{t.isUnmounted||h()}))}let d,u=e;0,$e(t,!1),e?(e.el=c.el,H(t,e,l)):e=c,i&&(0,n.DY)(i),(d=e.props&&e.props.onVnodeBeforeUpdate)&&Ai(d,r,e,c),$e(t,!0);const f=B(t);0;const g=t.subTree;t.subTree=f,b(g,f,p(g.el),Z(g),t,o,a),e.el=f.el,null===u&&U(t,f.el),s&&Be(s,o),(d=e.props&&e.props.onVnodeUpdated)&&Be((()=>Ai(d,r,e,c)),o)}else{let s;const{el:l,props:h}=e,{bm:c,m:d,parent:u}=t,p=xt(e);if($e(t,!1),c&&(0,n.DY)(c),!p&&(s=h&&h.onVnodeBeforeMount)&&Ai(s,u,e),$e(t,!0),l&&st){const i=()=>{t.subTree=B(t),st(l,t.subTree,t,o,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&i())):i()}else{0;const s=t.subTree=B(t);0,b(null,s,i,r,t,o,a),e.el=s.el}if(d&&Be(d,o),!p&&(s=h&&h.onVnodeMounted)){const t=e;Be((()=>Ai(s,u,t)),o)}(256&e.shapeFlag||u&&xt(u.vnode)&&256&u.vnode.shapeFlag)&&t.a&&Be(t.a,o),t.isMounted=!0,e=i=r=null}},c=t.effect=new s.X2(h,n.tE,(()=>_(d)),t.scope),d=t.update=()=>{c.dirty&&c.run()};d.id=t.uid,$e(t,!0),d()},H=(t,e,i)=>{e.component=t;const n=t.vnode.props;t.vnode=e,t.next=null,xe(t,e.props,n,i),Oe(t,e.children,i),(0,s.C4)(),S(t),(0,s.bl)()},$=(t,e,i,s,n,r,o,a,l=!1)=>{const h=t&&t.children,c=t?t.shapeFlag:0,d=e.children,{patchFlag:p,shapeFlag:f}=e;if(p>0){if(128&p)return void W(h,d,i,s,n,r,o,a,l);if(256&p)return void V(h,d,i,s,n,r,o,a,l)}8&f?(16&c&&Q(h,n,r),d!==h&&u(i,d)):16&c?16&f?W(h,d,i,s,n,r,o,a,l):Q(h,n,r,!0):(8&c&&u(i,""),16&f&&P(d,i,s,n,r,o,a,l))},V=(t,e,i,s,r,o,a,l,h)=>{t=t||n.Oj,e=e||n.Oj;const c=t.length,d=e.length,u=Math.min(c,d);let p;for(p=0;p<u;p++){const s=e[p]=h?_i(e[p]):yi(e[p]);b(t[p],s,i,null,r,o,a,l,h)}c>d?Q(t,r,o,!0,!1,u):P(e,i,s,r,o,a,l,h,u)},W=(t,e,i,s,r,o,a,l,h)=>{let c=0;const d=e.length;let u=t.length-1,p=d-1;while(c<=u&&c<=p){const s=t[c],n=e[c]=h?_i(e[c]):yi(e[c]);if(!li(s,n))break;b(s,n,i,null,r,o,a,l,h),c++}while(c<=u&&c<=p){const s=t[u],n=e[p]=h?_i(e[p]):yi(e[p]);if(!li(s,n))break;b(s,n,i,null,r,o,a,l,h),u--,p--}if(c>u){if(c<=p){const t=p+1,n=t<d?e[t].el:s;while(c<=p)b(null,e[c]=h?_i(e[c]):yi(e[c]),i,n,r,o,a,l,h),c++}}else if(c>p)while(c<=u)K(t[c],r,o,!0),c++;else{const f=c,g=c,m=new Map;for(c=g;c<=p;c++){const t=e[c]=h?_i(e[c]):yi(e[c]);null!=t.key&&m.set(t.key,c)}let v,y=0;const _=p-g+1;let x=!1,w=0;const A=new Array(_);for(c=0;c<_;c++)A[c]=0;for(c=f;c<=u;c++){const s=t[c];if(y>=_){K(s,r,o,!0);continue}let n;if(null!=s.key)n=m.get(s.key);else for(v=g;v<=p;v++)if(0===A[v-g]&&li(s,e[v])){n=v;break}void 0===n?K(s,r,o,!0):(A[n-g]=c+1,n>=w?w=n:x=!0,b(s,e[n],i,null,r,o,a,l,h),y++)}const S=x?We(A):n.Oj;for(v=S.length-1,c=_-1;c>=0;c--){const t=g+c,n=e[t],u=t+1<d?e[t+1].el:s;0===A[c]?b(null,n,i,u,r,o,a,l,h):x&&(v<0||c!==S[v]?G(n,i,u,2):v--)}}},G=(t,e,i,s,n=null)=>{const{el:o,type:a,transition:l,children:h,shapeFlag:c}=t;if(6&c)return void G(t.component.subTree,e,i,s);if(128&c)return void t.suspense.move(e,i,s);if(64&c)return void a.move(t,e,i,et);if(a===qe){r(o,e,i);for(let t=0;t<h.length;t++)G(h[t],e,i,s);return void r(t.anchor,e,i)}if(a===Qe)return void A(t,e,i);const d=2!==s&&1&c&&l;if(d)if(0===s)l.beforeEnter(o),r(o,e,i),Be((()=>l.enter(o)),n);else{const{leave:t,delayLeave:s,afterLeave:n}=l,a=()=>r(o,e,i),h=()=>{t(o,(()=>{a(),n&&n()}))};s?s(o,a,h):h()}else r(o,e,i)},K=(t,e,i,s=!1,n=!1)=>{const{type:r,props:o,ref:a,children:l,dynamicChildren:h,shapeFlag:c,patchFlag:d,dirs:u}=t;if(null!=a&&Fe(a,null,i,t,!0),256&c)return void e.ctx.deactivate(t);const p=1&c&&u,f=!xt(t);let g;if(f&&(g=o&&o.onVnodeBeforeUnmount)&&Ai(g,e,t),6&c)Y(t.component,i,s);else{if(128&c)return void t.suspense.unmount(i,s);p&&ot(t,null,e,"beforeUnmount"),64&c?t.type.remove(t,e,i,n,et,s):h&&(r!==qe||d>0&&64&d)?Q(h,e,i,!1,!0):(r===qe&&384&d||!n&&16&c)&&Q(l,e,i),s&&q(t)}(f&&(g=o&&o.onVnodeUnmounted)||p)&&Be((()=>{g&&Ai(g,e,t),p&&ot(t,null,e,"unmounted")}),i)},q=t=>{const{type:e,el:i,anchor:s,transition:n}=t;if(e===qe)return void X(i,s);if(e===Qe)return void C(t);const r=()=>{o(i),n&&!n.persisted&&n.afterLeave&&n.afterLeave()};if(1&t.shapeFlag&&n&&!n.persisted){const{leave:e,delayLeave:s}=n,o=()=>e(i,r);s?s(t.el,r,o):o()}else r()},X=(t,e)=>{let i;while(t!==e)i=f(t),o(t),t=i;o(e)},Y=(t,e,i)=>{const{bum:s,scope:r,update:o,subTree:a,um:l}=t;s&&(0,n.DY)(s),r.stop(),o&&(o.active=!1,K(a,t,e,i)),l&&Be(l,e),Be((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Q=(t,e,i,s=!1,n=!1,r=0)=>{for(let o=r;o<t.length;o++)K(t[o],e,i,s,n)},Z=t=>6&t.shapeFlag?Z(t.component.subTree):128&t.shapeFlag?t.suspense.next():f(t.anchor||t.el);let J=!1;const tt=(t,e,i)=>{null==t?e._vnode&&K(e._vnode,null,null,!0):b(e._vnode||null,t,e,null,null,null,i),J||(J=!0,S(),E(),J=!1),e._vnode=t},et={p:b,um:K,m:G,r:q,mt:F,mc:P,pc:$,pbc:I,n:Z,o:t};let it,st;return e&&([it,st]=e(et)),{render:tt,hydrate:it,createApp:pe(tt,it)}}function je({type:t,props:e},i){return"svg"===i&&"foreignObject"===t||"mathml"===i&&"annotation-xml"===t&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function $e({effect:t,update:e},i){t.allowRecurse=e.allowRecurse=i}function Ue(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ve(t,e,i=!1){const s=t.children,r=e.children;if((0,n.cy)(s)&&(0,n.cy)(r))for(let n=0;n<s.length;n++){const t=s[n];let e=r[n];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=r[n]=_i(r[n]),e.el=t.el),i||Ve(t,e)),e.type===Xe&&(e.el=t.el)}}function We(t){const e=t.slice(),i=[0];let s,n,r,o,a;const l=t.length;for(s=0;s<l;s++){const l=t[s];if(0!==l){if(n=i[i.length-1],t[n]<l){e[s]=n,i.push(s);continue}r=0,o=i.length-1;while(r<o)a=r+o>>1,t[i[a]]<l?r=a+1:o=a;l<t[i[r]]&&(r>0&&(e[s]=i[r-1]),i[r]=s)}}r=i.length,o=i[r-1];while(r-- >0)i[r]=o,o=e[o];return i}function Ge(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ge(e)}const Ke=t=>t.__isTeleport;const qe=Symbol.for("v-fgt"),Xe=Symbol.for("v-txt"),Ye=Symbol.for("v-cmt"),Qe=Symbol.for("v-stc"),Ze=[];let Je=null;function ti(t=!1){Ze.push(Je=t?null:[])}function ei(){Ze.pop(),Je=Ze[Ze.length-1]||null}let ii=1;function si(t){ii+=t}function ni(t){return t.dynamicChildren=ii>0?Je||n.Oj:null,ei(),ii>0&&Je&&Je.push(t),t}function ri(t,e,i,s,n,r){return ni(di(t,e,i,s,n,r,!0))}function oi(t,e,i,s,n){return ni(ui(t,e,i,s,n,!0))}function ai(t){return!!t&&!0===t.__v_isVNode}function li(t,e){return t.type===e.type&&t.key===e.key}const hi=({key:t})=>null!=t?t:null,ci=({ref:t,ref_key:e,ref_for:i})=>("number"===typeof t&&(t=""+t),null!=t?(0,n.Kg)(t)||(0,s.i9)(t)||(0,n.Tn)(t)?{i:I,r:t,k:e,f:!!i}:t:null);function di(t,e=null,i=null,s=0,r=null,o=(t===qe?0:1),a=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&hi(e),ref:e&&ci(e),scopeId:R,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:I};return l?(xi(h,i),128&o&&t.normalize(h)):i&&(h.shapeFlag|=(0,n.Kg)(i)?8:16),ii>0&&!a&&Je&&(h.patchFlag>0||6&o)&&32!==h.patchFlag&&Je.push(h),h}const ui=pi;function pi(t,e=null,i=null,r=0,o=null,a=!1){if(t&&t!==G||(t=Ye),ai(t)){const s=gi(t,e,!0);return i&&xi(s,i),ii>0&&!a&&Je&&(6&s.shapeFlag?Je[Je.indexOf(t)]=s:Je.push(s)),s.patchFlag|=-2,s}if(Wi(t)&&(t=t.__vccOpts),e){e=fi(e);let{class:t,style:i}=e;t&&!(0,n.Kg)(t)&&(e.class=(0,n.C4)(t)),(0,n.Gv)(i)&&((0,s.ju)(i)&&!(0,n.cy)(i)&&(i=(0,n.X$)({},i)),e.style=(0,n.Tr)(i))}const l=(0,n.Kg)(t)?1:X(t)?128:Ke(t)?64:(0,n.Gv)(t)?4:(0,n.Tn)(t)?2:0;return di(t,e,i,r,o,l,a,!0)}function fi(t){return t?(0,s.ju)(t)||ye(t)?(0,n.X$)({},t):t:null}function gi(t,e,i=!1,s=!1){const{props:r,ref:o,patchFlag:a,children:l,transition:h}=t,c=e?wi(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&hi(c),ref:e&&e.ref?i&&o?(0,n.cy)(o)?o.concat(ci(e)):[o,ci(e)]:ci(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qe?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gi(t.ssContent),ssFallback:t.ssFallback&&gi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&s&&(d.transition=h.clone(d)),d}function mi(t=" ",e=0){return ui(Xe,null,t,e)}function bi(t,e){const i=ui(Qe,null,t);return i.staticCount=e,i}function vi(t="",e=!1){return e?(ti(),oi(Ye,null,t)):ui(Ye,null,t)}function yi(t){return null==t||"boolean"===typeof t?ui(Ye):(0,n.cy)(t)?ui(qe,null,t.slice()):"object"===typeof t?_i(t):ui(Xe,null,String(t))}function _i(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:gi(t)}function xi(t,e){let i=0;const{shapeFlag:s}=t;if(null==e)e=null;else if((0,n.cy)(e))i=16;else if("object"===typeof e){if(65&s){const i=e.default;return void(i&&(i._c&&(i._d=!1),xi(t,i()),i._c&&(i._d=!0)))}{i=32;const s=e._;s||ye(e)?3===s&&I&&(1===I.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=I}}else(0,n.Tn)(e)?(e={default:e,_ctx:I},i=32):(e=String(e),64&s?(i=16,e=[mi(e)]):i=8);t.children=e,t.shapeFlag|=i}function wi(...t){const e={};for(let i=0;i<t.length;i++){const s=t[i];for(const t in s)if("class"===t)e.class!==s.class&&(e.class=(0,n.C4)([e.class,s.class]));else if("style"===t)e.style=(0,n.Tr)([e.style,s.style]);else if((0,n.Mp)(t)){const i=e[t],r=s[t];!r||i===r||(0,n.cy)(i)&&i.includes(r)||(e[t]=i?[].concat(i,r):r)}else""!==t&&(e[t]=s[t])}return e}function Ai(t,e,i,s=null){o(t,e,7,[i,s])}const Si=de();let Ei=0;function Ci(t,e,i){const r=t.type,o=(e?e.appContext:t.appContext)||Si,a={uid:Ei++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new s.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Se(r,o),emitsOptions:P(r,o),emit:null,emitted:null,propsDefaults:n.MZ,inheritAttrs:r.inheritAttrs,ctx:n.MZ,data:n.MZ,props:n.MZ,attrs:n.MZ,slots:n.MZ,refs:n.MZ,setupState:n.MZ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=k.bind(null,a),t.ce&&t.ce(a),a}let Mi=null;const Ti=()=>Mi||I;let ki,Pi;{const t=(0,n.We)(),e=(e,i)=>{let s;return(s=t[e])||(s=t[e]=[]),s.push(i),t=>{s.length>1?s.forEach((e=>e(t))):s[0](t)}};ki=e("__VUE_INSTANCE_SETTERS__",(t=>Mi=t)),Pi=e("__VUE_SSR_SETTERS__",(t=>Fi=t))}const Li=t=>{const e=Mi;return ki(t),t.scope.on(),()=>{t.scope.off(),ki(e)}},Ii=()=>{Mi&&Mi.scope.off(),ki(null)};function Ri(t){return 4&t.vnode.shapeFlag}let Di,Oi,Fi=!1;function Ni(t,e=!1){e&&Pi(e);const{props:i,children:s}=t.vnode,n=Ri(t);_e(t,i,n,e),De(t,s);const r=n?Bi(t,e):void 0;return e&&Pi(!1),r}function Bi(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qt);const{setup:o}=i;if(o){const i=t.setupContext=o.length>1?$i(t):null,l=Li(t);(0,s.C4)();const h=r(o,t,0,[t.props,i]);if((0,s.bl)(),l(),(0,n.yL)(h)){if(h.then(Ii,Ii),e)return h.then((i=>{zi(t,i,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=h}else zi(t,h,e)}else Hi(t,e)}function zi(t,e,i){(0,n.Tn)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,n.Gv)(e)&&(t.setupState=(0,s.Pr)(e)),Hi(t,i)}function Hi(t,e,i){const r=t.type;if(!t.render){if(!e&&Di&&!r.render){const e=r.template||ee(t).template;if(e){0;const{isCustomElement:i,compilerOptions:s}=t.appContext.config,{delimiters:o,compilerOptions:a}=r,l=(0,n.X$)((0,n.X$)({isCustomElement:i,delimiters:o},s),a);r.render=Di(e,l)}}t.render=r.render||n.tE,Oi&&Oi(t)}{const e=Li(t);(0,s.C4)();try{Qt(t)}finally{(0,s.bl)(),e()}}}const ji={get(t,e){return(0,s.u4)(t,"get",""),t[e]}};function $i(t){const e=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,ji),slots:t.slots,emit:t.emit,expose:e}}function Ui(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,s.Pr)((0,s.IG)(t.exposed)),{get(e,i){return i in e?e[i]:i in Gt?Gt[i](t):void 0},has(t,e){return e in t||e in Gt}}))}function Vi(t,e=!0){return(0,n.Tn)(t)?t.displayName||t.name:t.name||e&&t.__name}function Wi(t){return(0,n.Tn)(t)&&"__vccOpts"in t}const Gi=(t,e)=>{const i=(0,s.EW)(t,e,Fi);return i};function Ki(t,e,i){const s=arguments.length;return 2===s?(0,n.Gv)(e)&&!(0,n.cy)(e)?ai(e)?ui(t,null,[e]):ui(t,e):ui(t,null,e):(s>3?i=Array.prototype.slice.call(arguments,2):3===s&&ai(i)&&(i=[i]),ui(t,e,i))}const qi="3.4.27"},3751:function(t,e,i){i.d(e,{D$:function(){return St},Ef:function(){return Tt},Jo:function(){return vt},u1:function(){return yt}});var s=i(641),n=i(33),r=i(953);
/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
const o="http://www.w3.org/2000/svg",a="http://www.w3.org/1998/Math/MathML",l="undefined"!==typeof document?document:null,h=l&&l.createElement("template"),c={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,s)=>{const n="svg"===e?l.createElementNS(o,t):"mathml"===e?l.createElementNS(a,t):l.createElement(t,i?{is:i}:void 0);return"select"===t&&s&&null!=s.multiple&&n.setAttribute("multiple",s.multiple),n},createText:t=>l.createTextNode(t),createComment:t=>l.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>l.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,s,n,r){const o=i?i.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling)){while(1)if(e.insertBefore(n.cloneNode(!0),i),n===r||!(n=n.nextSibling))break}else{h.innerHTML="svg"===s?`<svg>${t}</svg>`:"mathml"===s?`<math>${t}</math>`:t;const n=h.content;if("svg"===s||"mathml"===s){const t=n.firstChild;while(t.firstChild)n.appendChild(t.firstChild);n.removeChild(t)}e.insertBefore(n,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},d="transition",u="animation",p=Symbol("_vtc"),f=(t,{slots:e})=>(0,s.h)(s.pR,y(t),e);f.displayName="Transition";const g={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},m=f.props=(0,n.X$)({},s.QP,g),b=(t,e=[])=>{(0,n.cy)(t)?t.forEach((t=>t(...e))):t&&t(...e)},v=t=>!!t&&((0,n.cy)(t)?t.some((t=>t.length>1)):t.length>1);function y(t){const e={};for(const n in t)n in g||(e[n]=t[n]);if(!1===t.css)return e;const{name:i="v",type:s,duration:r,enterFromClass:o=`${i}-enter-from`,enterActiveClass:a=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:h=o,appearActiveClass:c=a,appearToClass:d=l,leaveFromClass:u=`${i}-leave-from`,leaveActiveClass:p=`${i}-leave-active`,leaveToClass:f=`${i}-leave-to`}=t,m=_(r),y=m&&m[0],x=m&&m[1],{onBeforeEnter:E,onEnter:M,onEnterCancelled:T,onLeave:k,onLeaveCancelled:L,onBeforeAppear:I=E,onAppear:R=M,onAppearCancelled:D=T}=e,O=(t,e,i)=>{A(t,e?d:l),A(t,e?c:a),i&&i()},F=(t,e)=>{t._isLeaving=!1,A(t,u),A(t,f),A(t,p),e&&e()},N=t=>(e,i)=>{const n=t?R:M,r=()=>O(e,t,i);b(n,[e,r]),S((()=>{A(e,t?h:o),w(e,t?d:l),v(n)||C(e,s,y,r)}))};return(0,n.X$)(e,{onBeforeEnter(t){b(E,[t]),w(t,o),w(t,a)},onBeforeAppear(t){b(I,[t]),w(t,h),w(t,c)},onEnter:N(!1),onAppear:N(!0),onLeave(t,e){t._isLeaving=!0;const i=()=>F(t,e);w(t,u),w(t,p),P(),S((()=>{t._isLeaving&&(A(t,u),w(t,f),v(k)||C(t,s,x,i))})),b(k,[t,i])},onEnterCancelled(t){O(t,!1),b(T,[t])},onAppearCancelled(t){O(t,!0),b(D,[t])},onLeaveCancelled(t){F(t),b(L,[t])}})}function _(t){if(null==t)return null;if((0,n.Gv)(t))return[x(t.enter),x(t.leave)];{const e=x(t);return[e,e]}}function x(t){const e=(0,n.Ro)(t);return e}function w(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t[p]||(t[p]=new Set)).add(e)}function A(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const i=t[p];i&&(i.delete(e),i.size||(t[p]=void 0))}function S(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let E=0;function C(t,e,i,s){const n=t._endId=++E,r=()=>{n===t._endId&&s()};if(i)return setTimeout(r,i);const{type:o,timeout:a,propCount:l}=M(t,e);if(!o)return s();const h=o+"end";let c=0;const d=()=>{t.removeEventListener(h,u),r()},u=e=>{e.target===t&&++c>=l&&d()};setTimeout((()=>{c<l&&d()}),a+1),t.addEventListener(h,u)}function M(t,e){const i=window.getComputedStyle(t),s=t=>(i[t]||"").split(", "),n=s(`${d}Delay`),r=s(`${d}Duration`),o=T(n,r),a=s(`${u}Delay`),l=s(`${u}Duration`),h=T(a,l);let c=null,p=0,f=0;e===d?o>0&&(c=d,p=o,f=r.length):e===u?h>0&&(c=u,p=h,f=l.length):(p=Math.max(o,h),c=p>0?o>h?d:u:null,f=c?c===d?r.length:l.length:0);const g=c===d&&/\b(transform|all)(,|$)/.test(s(`${d}Property`).toString());return{type:c,timeout:p,propCount:f,hasTransform:g}}function T(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,i)=>k(e)+k(t[i]))))}function k(t){return"auto"===t?0:1e3*Number(t.slice(0,-1).replace(",","."))}function P(){return document.body.offsetHeight}function L(t,e,i){const s=t[p];s&&(e=(e?[e,...s]:[...s]).join(" ")),null==e?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const I=Symbol("_vod"),R=Symbol("_vsh");const D=Symbol("");const O=/(^|;)\s*display\s*:/;function F(t,e,i){const s=t.style,r=(0,n.Kg)(i);let o=!1;if(i&&!r){if(e)if((0,n.Kg)(e))for(const t of e.split(";")){const e=t.slice(0,t.indexOf(":")).trim();null==i[e]&&B(s,e,"")}else for(const t in e)null==i[t]&&B(s,t,"");for(const t in i)"display"===t&&(o=!0),B(s,t,i[t])}else if(r){if(e!==i){const t=s[D];t&&(i+=";"+t),s.cssText=i,o=O.test(i)}}else e&&t.removeAttribute("style");I in t&&(t[I]=o?s.display:"",t[R]&&(s.display="none"))}const N=/\s*!important$/;function B(t,e,i){if((0,n.cy)(i))i.forEach((i=>B(t,e,i)));else if(null==i&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const s=j(t,e);N.test(i)?t.setProperty((0,n.Tg)(s),i.replace(N,""),"important"):t[s]=i}}const z=["Webkit","Moz","ms"],H={};function j(t,e){const i=H[e];if(i)return i;let s=(0,n.PT)(e);if("filter"!==s&&s in t)return H[e]=s;s=(0,n.ZH)(s);for(let n=0;n<z.length;n++){const i=z[n]+s;if(i in t)return H[e]=i}return e}const $="http://www.w3.org/1999/xlink";function U(t,e,i,s,r){if(s&&e.startsWith("xlink:"))null==i?t.removeAttributeNS($,e.slice(6,e.length)):t.setAttributeNS($,e,i);else{const s=(0,n.J$)(e);null==i||s&&!(0,n.Y2)(i)?t.removeAttribute(e):t.setAttribute(e,s?"":i)}}function V(t,e,i,s,r,o,a){if("innerHTML"===e||"textContent"===e)return s&&a(s,r,o),void(t[e]=null==i?"":i);const l=t.tagName;if("value"===e&&"PROGRESS"!==l&&!l.includes("-")){const s="OPTION"===l?t.getAttribute("value")||"":t.value,n=null==i?"":i;return s===n&&"_value"in t||(t.value=n),null==i&&t.removeAttribute(e),void(t._value=i)}let h=!1;if(""===i||null==i){const s=typeof t[e];"boolean"===s?i=(0,n.Y2)(i):null==i&&"string"===s?(i="",h=!0):"number"===s&&(i=0,h=!0)}try{t[e]=i}catch(c){0}h&&t.removeAttribute(e)}function W(t,e,i,s){t.addEventListener(e,i,s)}function G(t,e,i,s){t.removeEventListener(e,i,s)}const K=Symbol("_vei");function q(t,e,i,s,n=null){const r=t[K]||(t[K]={}),o=r[e];if(s&&o)o.value=s;else{const[i,a]=Y(e);if(s){const o=r[e]=tt(s,n);W(t,i,o,a)}else o&&(G(t,i,o,a),r[e]=void 0)}}const X=/(?:Once|Passive|Capture)$/;function Y(t){let e;if(X.test(t)){let i;e={};while(i=t.match(X))t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}const i=":"===t[2]?t.slice(3):(0,n.Tg)(t.slice(2));return[i,e]}let Q=0;const Z=Promise.resolve(),J=()=>Q||(Z.then((()=>Q=0)),Q=Date.now());function tt(t,e){const i=t=>{if(t._vts){if(t._vts<=i.attached)return}else t._vts=Date.now();(0,s.qL)(et(t,i.value),e,5,[t])};return i.value=t,i.attached=J(),i}function et(t,e){if((0,n.cy)(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const it=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,st=(t,e,i,s,r,o,a,l,h)=>{const c="svg"===r;"class"===e?L(t,s,c):"style"===e?F(t,i,s):(0,n.Mp)(e)?(0,n.CP)(e)||q(t,e,i,s,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):nt(t,e,s,c))?V(t,e,s,o,a,l,h):("true-value"===e?t._trueValue=s:"false-value"===e&&(t._falseValue=s),U(t,e,s,c))};function nt(t,e,i,s){if(s)return"innerHTML"===e||"textContent"===e||!!(e in t&&it(e)&&(0,n.Tn)(i));if("spellcheck"===e||"draggable"===e||"translate"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if("width"===e||"height"===e){const e=t.tagName;if("IMG"===e||"VIDEO"===e||"CANVAS"===e||"SOURCE"===e)return!1}return(!it(e)||!(0,n.Kg)(i))&&e in t}
/*! #__NO_SIDE_EFFECTS__ */
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;const rt=new WeakMap,ot=new WeakMap,at=Symbol("_moveCb"),lt=Symbol("_enterCb"),ht={name:"TransitionGroup",props:(0,n.X$)({},m,{tag:String,moveClass:String}),setup(t,{slots:e}){const i=(0,s.nI)(),n=(0,s.Gy)();let o,a;return(0,s.$u)((()=>{if(!o.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!pt(o[0].el,i.vnode.el,e))return;o.forEach(ct),o.forEach(dt);const s=o.filter(ut);P(),s.forEach((t=>{const i=t.el,s=i.style;w(i,e),s.transform=s.webkitTransform=s.transitionDuration="";const n=i[at]=t=>{t&&t.target!==i||t&&!/transform$/.test(t.propertyName)||(i.removeEventListener("transitionend",n),i[at]=null,A(i,e))};i.addEventListener("transitionend",n)}))})),()=>{const l=(0,r.ux)(t),h=y(l);let c=l.tag||s.FK;if(o=[],a)for(let t=0;t<a.length;t++){const e=a[t];e.el&&e.el instanceof Element&&(o.push(e),(0,s.MZ)(e,(0,s.OW)(e,h,n,i)),rt.set(e,e.el.getBoundingClientRect()))}a=e.default?(0,s.Df)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,s.MZ)(e,(0,s.OW)(e,h,n,i))}return(0,s.bF)(c,null,a)}}};ht.props;function ct(t){const e=t.el;e[at]&&e[at](),e[lt]&&e[lt]()}function dt(t){ot.set(t,t.el.getBoundingClientRect())}function ut(t){const e=rt.get(t),i=ot.get(t),s=e.left-i.left,n=e.top-i.top;if(s||n){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${s}px,${n}px)`,e.transitionDuration="0s",t}}function pt(t,e,i){const s=t.cloneNode(),n=t[p];n&&n.forEach((t=>{t.split(/\s+/).forEach((t=>t&&s.classList.remove(t)))})),i.split(/\s+/).forEach((t=>t&&s.classList.add(t))),s.style.display="none";const r=1===e.nodeType?e:e.parentNode;r.appendChild(s);const{hasTransform:o}=M(s);return r.removeChild(s),o}const ft=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,n.cy)(e)?t=>(0,n.DY)(e,t):e};function gt(t){t.target.composing=!0}function mt(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bt=Symbol("_assign"),vt={created(t,{modifiers:{lazy:e,trim:i,number:s}},r){t[bt]=ft(r);const o=s||r.props&&"number"===r.props.type;W(t,e?"change":"input",(e=>{if(e.target.composing)return;let s=t.value;i&&(s=s.trim()),o&&(s=(0,n.bB)(s)),t[bt](s)})),i&&W(t,"change",(()=>{t.value=t.value.trim()})),e||(W(t,"compositionstart",gt),W(t,"compositionend",mt),W(t,"change",mt))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:i,trim:s,number:r}},o){if(t[bt]=ft(o),t.composing)return;const a=!r&&"number"!==t.type||/^0\d/.test(t.value)?t.value:(0,n.bB)(t.value),l=null==e?"":e;if(a!==l){if(document.activeElement===t&&"range"!==t.type){if(i)return;if(s&&t.value.trim()===l)return}t.value=l}}};const yt={deep:!0,created(t,{value:e,modifiers:{number:i}},r){const o=(0,n.vM)(e);W(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>i?(0,n.bB)(xt(t)):xt(t)));t[bt](t.multiple?o?new Set(e):e:e[0]),t._assigning=!0,(0,s.dY)((()=>{t._assigning=!1}))})),t[bt]=ft(r)},mounted(t,{value:e,modifiers:{number:i}}){_t(t,e)},beforeUpdate(t,e,i){t[bt]=ft(i)},updated(t,{value:e,modifiers:{number:i}}){t._assigning||_t(t,e)}};function _t(t,e,i){const s=t.multiple,r=(0,n.cy)(e);if(!s||r||(0,n.vM)(e)){for(let i=0,o=t.options.length;i<o;i++){const o=t.options[i],a=xt(o);if(s)if(r){const t=typeof a;o.selected="string"===t||"number"===t?e.some((t=>String(t)===String(a))):(0,n.u3)(e,a)>-1}else o.selected=e.has(a);else if((0,n.BX)(xt(o),e))return void(t.selectedIndex!==i&&(t.selectedIndex=i))}s||-1===t.selectedIndex||(t.selectedIndex=-1)}}function xt(t){return"_value"in t?t._value:t.value}const wt=["ctrl","shift","alt","meta"],At={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>wt.some((i=>t[`${i}Key`]&&!e.includes(i)))},St=(t,e)=>{const i=t._withMods||(t._withMods={}),s=e.join(".");return i[s]||(i[s]=(i,...s)=>{for(let t=0;t<e.length;t++){const s=At[e[t]];if(s&&s(i,e))return}return t(i,...s)})},Et=(0,n.X$)({patchProp:st},c);let Ct;function Mt(){return Ct||(Ct=(0,s.K9)(Et))}const Tt=(...t)=>{const e=Mt().createApp(...t);const{mount:i}=e;return e.mount=t=>{const s=Pt(t);if(!s)return;const r=e._component;(0,n.Tn)(r)||r.render||r.template||(r.template=s.innerHTML),s.innerHTML="";const o=i(s,!1,kt(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function kt(t){return t instanceof SVGElement?"svg":"function"===typeof MathMLElement&&t instanceof MathMLElement?"mathml":void 0}function Pt(t){if((0,n.Kg)(t)){const e=document.querySelector(t);return e}return t}},33:function(t,e,i){
/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function s(t,e){const i=new Set(t.split(","));return e?t=>i.has(t.toLowerCase()):t=>i.has(t)}i.d(e,{$3:function(){return p},$H:function(){return N},BH:function(){return W},BX:function(){return it},Bm:function(){return x},C4:function(){return Q},CE:function(){return g},CP:function(){return h},DY:function(){return B},Gv:function(){return w},J$:function(){return J},Kg:function(){return _},MZ:function(){return n},Mp:function(){return l},NO:function(){return a},Oj:function(){return r},PT:function(){return I},Qd:function(){return M},Ro:function(){return j},SU:function(){return k},TF:function(){return d},Tg:function(){return D},Tn:function(){return y},Tr:function(){return G},We:function(){return U},X$:function(){return c},Y2:function(){return tt},ZH:function(){return O},Zf:function(){return C},bB:function(){return H},cy:function(){return f},gd:function(){return v},pD:function(){return s},rU:function(){return F},tE:function(){return o},u3:function(){return st},vM:function(){return m},v_:function(){return nt},yI:function(){return T},yL:function(){return A},yQ:function(){return z}});const n={},r=[],o=()=>{},a=()=>!1,l=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),h=t=>t.startsWith("onUpdate:"),c=Object.assign,d=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},u=Object.prototype.hasOwnProperty,p=(t,e)=>u.call(t,e),f=Array.isArray,g=t=>"[object Map]"===E(t),m=t=>"[object Set]"===E(t),b=t=>"[object Date]"===E(t),v=t=>"[object RegExp]"===E(t),y=t=>"function"===typeof t,_=t=>"string"===typeof t,x=t=>"symbol"===typeof t,w=t=>null!==t&&"object"===typeof t,A=t=>(w(t)||y(t))&&y(t.then)&&y(t.catch),S=Object.prototype.toString,E=t=>S.call(t),C=t=>E(t).slice(8,-1),M=t=>"[object Object]"===E(t),T=t=>_(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,k=s(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return i=>{const s=e[i];return s||(e[i]=t(i))}},L=/-(\w)/g,I=P((t=>t.replace(L,((t,e)=>e?e.toUpperCase():"")))),R=/\B([A-Z])/g,D=P((t=>t.replace(R,"-$1").toLowerCase())),O=P((t=>t.charAt(0).toUpperCase()+t.slice(1))),F=P((t=>{const e=t?`on${O(t)}`:"";return e})),N=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let i=0;i<t.length;i++)t[i](e)},z=(t,e,i,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:i})},H=t=>{const e=parseFloat(t);return isNaN(e)?t:e},j=t=>{const e=_(t)?Number(t):NaN;return isNaN(e)?t:e};let $;const U=()=>$||($="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:{});const V="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",W=s(V);function G(t){if(f(t)){const e={};for(let i=0;i<t.length;i++){const s=t[i],n=_(s)?Y(s):G(s);if(n)for(const t in n)e[t]=n[t]}return e}if(_(t)||w(t))return t}const K=/;(?![^(]*\))/g,q=/:([^]+)/,X=/\/\*[^]*?\*\//g;function Y(t){const e={};return t.replace(X,"").split(K).forEach((t=>{if(t){const i=t.split(q);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}function Q(t){let e="";if(_(t))e=t;else if(f(t))for(let i=0;i<t.length;i++){const s=Q(t[i]);s&&(e+=s+" ")}else if(w(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const Z="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",J=s(Z);function tt(t){return!!t||""===t}function et(t,e){if(t.length!==e.length)return!1;let i=!0;for(let s=0;i&&s<t.length;s++)i=it(t[s],e[s]);return i}function it(t,e){if(t===e)return!0;let i=b(t),s=b(e);if(i||s)return!(!i||!s)&&t.getTime()===e.getTime();if(i=x(t),s=x(e),i||s)return t===e;if(i=f(t),s=f(e),i||s)return!(!i||!s)&&et(t,e);if(i=w(t),s=w(e),i||s){if(!i||!s)return!1;const n=Object.keys(t).length,r=Object.keys(e).length;if(n!==r)return!1;for(const i in t){const s=t.hasOwnProperty(i),n=e.hasOwnProperty(i);if(s&&!n||!s&&n||!it(t[i],e[i]))return!1}}return String(t)===String(e)}function st(t,e){return t.findIndex((t=>it(t,e)))}const nt=t=>_(t)?t:null==t?"":f(t)||w(t)&&(t.toString===S||!y(t.toString))?JSON.stringify(t,rt,2):String(t),rt=(t,e)=>e&&e.__v_isRef?rt(t,e.value):g(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,i],s)=>(t[ot(e,s)+" =>"]=i,t)),{})}:m(e)?{[`Set(${e.size})`]:[...e.values()].map((t=>ot(t)))}:x(e)?ot(e):!w(e)||f(e)||M(e)?e:String(e),ot=(t,e="")=>{var i;return x(t)?`Symbol(${null!=(i=t.description)?i:e})`:t}},6262:function(t,e){e.A=(t,e)=>{const i=t.__vccOpts||t;for(const[s,n]of e)i[s]=n;return i}},9306:function(t,e,i){var s=i(4901),n=i(6823),r=TypeError;t.exports=function(t){if(s(t))return t;throw new r(n(t)+" is not a function")}},8551:function(t,e,i){var s=i(34),n=String,r=TypeError;t.exports=function(t){if(s(t))return t;throw new r(n(t)+" is not an object")}},9617:function(t,e,i){var s=i(5397),n=i(5610),r=i(6198),o=function(t){return function(e,i,o){var a=s(e),l=r(a);if(0===l)return!t&&-1;var h,c=n(o,l);if(t&&i!==i){while(l>c)if(h=a[c++],h!==h)return!0}else for(;l>c;c++)if((t||c in a)&&a[c]===i)return t||c||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},4527:function(t,e,i){var s=i(3724),n=i(4376),r=TypeError,o=Object.getOwnPropertyDescriptor,a=s&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(n(t)&&!o(t,"length").writable)throw new r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4576:function(t,e,i){var s=i(9504),n=s({}.toString),r=s("".slice);t.exports=function(t){return r(n(t),8,-1)}},6955:function(t,e,i){var s=i(2140),n=i(4901),r=i(4576),o=i(8227),a=o("toStringTag"),l=Object,h="Arguments"===r(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(i){}};t.exports=s?r:function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=c(e=l(t),a))?i:h?r(e):"Object"===(s=r(e))&&n(e.callee)?"Arguments":s}},7740:function(t,e,i){var s=i(9297),n=i(5031),r=i(7347),o=i(4913);t.exports=function(t,e,i){for(var a=n(e),l=o.f,h=r.f,c=0;c<a.length;c++){var d=a[c];s(t,d)||i&&s(i,d)||l(t,d,h(e,d))}}},6699:function(t,e,i){var s=i(3724),n=i(4913),r=i(6980);t.exports=s?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},6980:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2106:function(t,e,i){var s=i(283),n=i(4913);t.exports=function(t,e,i){return i.get&&s(i.get,e,{getter:!0}),i.set&&s(i.set,e,{setter:!0}),n.f(t,e,i)}},6840:function(t,e,i){var s=i(4901),n=i(4913),r=i(283),o=i(9433);t.exports=function(t,e,i,a){a||(a={});var l=a.enumerable,h=void 0!==a.name?a.name:e;if(s(i)&&r(i,h,a),a.global)l?t[e]=i:o(e,i);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(c){}l?t[e]=i:n.f(t,e,{value:i,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9433:function(t,e,i){var s=i(4475),n=Object.defineProperty;t.exports=function(t,e){try{n(s,t,{value:e,configurable:!0,writable:!0})}catch(i){s[t]=e}return e}},3724:function(t,e,i){var s=i(9039);t.exports=!s((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4055:function(t,e,i){var s=i(4475),n=i(34),r=s.document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},6837:function(t){var e=TypeError,i=9007199254740991;t.exports=function(t){if(t>i)throw e("Maximum allowed index exceeded");return t}},9392:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7388:function(t,e,i){var s,n,r=i(4475),o=i(9392),a=r.process,l=r.Deno,h=a&&a.versions||l&&l.version,c=h&&h.v8;c&&(s=c.split("."),n=s[0]>0&&s[0]<4?1:+(s[0]+s[1])),!n&&o&&(s=o.match(/Edge\/(\d+)/),(!s||s[1]>=74)&&(s=o.match(/Chrome\/(\d+)/),s&&(n=+s[1]))),t.exports=n},8727:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(t,e,i){var s=i(4475),n=i(7347).f,r=i(6699),o=i(6840),a=i(9433),l=i(7740),h=i(2796);t.exports=function(t,e){var i,c,d,u,p,f,g=t.target,m=t.global,b=t.stat;if(c=m?s:b?s[g]||a(g,{}):s[g]&&s[g].prototype,c)for(d in e){if(p=e[d],t.dontCallGetSet?(f=n(c,d),u=f&&f.value):u=c[d],i=h(m?d:g+(b?".":"#")+d,t.forced),!i&&void 0!==u){if(typeof p==typeof u)continue;l(p,u)}(t.sham||u&&u.sham)&&r(p,"sham",!0),o(c,d,p,t)}}},9039:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},616:function(t,e,i){var s=i(9039);t.exports=!s((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9565:function(t,e,i){var s=i(616),n=Function.prototype.call;t.exports=s?n.bind(n):function(){return n.apply(n,arguments)}},350:function(t,e,i){var s=i(3724),n=i(9297),r=Function.prototype,o=s&&Object.getOwnPropertyDescriptor,a=n(r,"name"),l=a&&"something"===function(){}.name,h=a&&(!s||s&&o(r,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:h}},9504:function(t,e,i){var s=i(616),n=Function.prototype,r=n.call,o=s&&n.bind.bind(r,r);t.exports=s?o:function(t){return function(){return r.apply(t,arguments)}}},7751:function(t,e,i){var s=i(4475),n=i(4901),r=function(t){return n(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?r(s[t]):s[t]&&s[t][e]}},5966:function(t,e,i){var s=i(9306),n=i(4117);t.exports=function(t,e){var i=t[e];return n(i)?void 0:s(i)}},4475:function(t,e,i){var s=function(t){return t&&t.Math===Math&&t};t.exports=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof i.g&&i.g)||s("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:function(t,e,i){var s=i(9504),n=i(8981),r=s({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(n(t),e)}},421:function(t){t.exports={}},5917:function(t,e,i){var s=i(3724),n=i(9039),r=i(4055);t.exports=!s&&!n((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},7055:function(t,e,i){var s=i(9504),n=i(9039),r=i(4576),o=Object,a=s("".split);t.exports=n((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"===r(t)?a(t,""):o(t)}:o},3706:function(t,e,i){var s=i(9504),n=i(4901),r=i(7629),o=s(Function.toString);n(r.inspectSource)||(r.inspectSource=function(t){return o(t)}),t.exports=r.inspectSource},1181:function(t,e,i){var s,n,r,o=i(8622),a=i(4475),l=i(34),h=i(6699),c=i(9297),d=i(7629),u=i(6119),p=i(421),f="Object already initialized",g=a.TypeError,m=a.WeakMap,b=function(t){return r(t)?n(t):s(t,{})},v=function(t){return function(e){var i;if(!l(e)||(i=n(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return i}};if(o||d.state){var y=d.state||(d.state=new m);y.get=y.get,y.has=y.has,y.set=y.set,s=function(t,e){if(y.has(t))throw new g(f);return e.facade=t,y.set(t,e),e},n=function(t){return y.get(t)||{}},r=function(t){return y.has(t)}}else{var _=u("state");p[_]=!0,s=function(t,e){if(c(t,_))throw new g(f);return e.facade=t,h(t,_,e),e},n=function(t){return c(t,_)?t[_]:{}},r=function(t){return c(t,_)}}t.exports={set:s,get:n,has:r,enforce:b,getterFor:v}},4376:function(t,e,i){var s=i(4576);t.exports=Array.isArray||function(t){return"Array"===s(t)}},4901:function(t){var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2796:function(t,e,i){var s=i(9039),n=i(4901),r=/#|\.prototype\./,o=function(t,e){var i=l[a(t)];return i===c||i!==h&&(n(e)?s(e):!!e)},a=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=o.data={},h=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},4117:function(t){t.exports=function(t){return null===t||void 0===t}},34:function(t,e,i){var s=i(4901);t.exports=function(t){return"object"==typeof t?null!==t:s(t)}},6395:function(t){t.exports=!1},757:function(t,e,i){var s=i(7751),n=i(4901),r=i(1625),o=i(7040),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=s("Symbol");return n(e)&&r(e.prototype,a(t))}},6198:function(t,e,i){var s=i(8014);t.exports=function(t){return s(t.length)}},283:function(t,e,i){var s=i(9504),n=i(9039),r=i(4901),o=i(9297),a=i(3724),l=i(350).CONFIGURABLE,h=i(3706),c=i(1181),d=c.enforce,u=c.get,p=String,f=Object.defineProperty,g=s("".slice),m=s("".replace),b=s([].join),v=a&&!n((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),_=t.exports=function(t,e,i){"Symbol("===g(p(e),0,7)&&(e="["+m(p(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!o(t,"name")||l&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),v&&i&&o(i,"arity")&&t.length!==i.arity&&f(t,"length",{value:i.arity});try{i&&o(i,"constructor")&&i.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(n){}var s=d(t);return o(s,"source")||(s.source=b(y,"string"==typeof e?e:"")),t};Function.prototype.toString=_((function(){return r(this)&&u(this).source||h(this)}),"toString")},741:function(t){var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var s=+t;return(s>0?i:e)(s)}},4913:function(t,e,i){var s=i(3724),n=i(5917),r=i(8686),o=i(8551),a=i(6969),l=TypeError,h=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",u="configurable",p="writable";e.f=s?r?function(t,e,i){if(o(t),e=a(e),o(i),"function"===typeof t&&"prototype"===e&&"value"in i&&p in i&&!i[p]){var s=c(t,e);s&&s[p]&&(t[e]=i.value,i={configurable:u in i?i[u]:s[u],enumerable:d in i?i[d]:s[d],writable:!1})}return h(t,e,i)}:h:function(t,e,i){if(o(t),e=a(e),o(i),n)try{return h(t,e,i)}catch(s){}if("get"in i||"set"in i)throw new l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},7347:function(t,e,i){var s=i(3724),n=i(9565),r=i(8773),o=i(6980),a=i(5397),l=i(6969),h=i(9297),c=i(5917),d=Object.getOwnPropertyDescriptor;e.f=s?d:function(t,e){if(t=a(t),e=l(e),c)try{return d(t,e)}catch(i){}if(h(t,e))return o(!n(r.f,t,e),t[e])}},8480:function(t,e,i){var s=i(1828),n=i(8727),r=n.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,r)}},3717:function(t,e){e.f=Object.getOwnPropertySymbols},1625:function(t,e,i){var s=i(9504);t.exports=s({}.isPrototypeOf)},1828:function(t,e,i){var s=i(9504),n=i(9297),r=i(5397),o=i(9617).indexOf,a=i(421),l=s([].push);t.exports=function(t,e){var i,s=r(t),h=0,c=[];for(i in s)!n(a,i)&&n(s,i)&&l(c,i);while(e.length>h)n(s,i=e[h++])&&(~o(c,i)||l(c,i));return c}},8773:function(t,e){var i={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,n=s&&!i.call({1:2},1);e.f=n?function(t){var e=s(this,t);return!!e&&e.enumerable}:i},4270:function(t,e,i){var s=i(9565),n=i(4901),r=i(34),o=TypeError;t.exports=function(t,e){var i,a;if("string"===e&&n(i=t.toString)&&!r(a=s(i,t)))return a;if(n(i=t.valueOf)&&!r(a=s(i,t)))return a;if("string"!==e&&n(i=t.toString)&&!r(a=s(i,t)))return a;throw new o("Can't convert object to primitive value")}},5031:function(t,e,i){var s=i(7751),n=i(9504),r=i(8480),o=i(3717),a=i(8551),l=n([].concat);t.exports=s("Reflect","ownKeys")||function(t){var e=r.f(a(t)),i=o.f;return i?l(e,i(t)):e}},7750:function(t,e,i){var s=i(4117),n=TypeError;t.exports=function(t){if(s(t))throw new n("Can't call method on "+t);return t}},6119:function(t,e,i){var s=i(5745),n=i(3392),r=s("keys");t.exports=function(t){return r[t]||(r[t]=n(t))}},7629:function(t,e,i){var s=i(6395),n=i(4475),r=i(9433),o="__core-js_shared__",a=t.exports=n[o]||r(o,{});(a.versions||(a.versions=[])).push({version:"3.37.1",mode:s?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(t,e,i){var s=i(7629);t.exports=function(t,e){return s[t]||(s[t]=e||{})}},4495:function(t,e,i){var s=i(7388),n=i(9039),r=i(4475),o=r.String;t.exports=!!Object.getOwnPropertySymbols&&!n((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&s&&s<41}))},5610:function(t,e,i){var s=i(1291),n=Math.max,r=Math.min;t.exports=function(t,e){var i=s(t);return i<0?n(i+e,0):r(i,e)}},5397:function(t,e,i){var s=i(7055),n=i(7750);t.exports=function(t){return s(n(t))}},1291:function(t,e,i){var s=i(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:s(e)}},8014:function(t,e,i){var s=i(1291),n=Math.min;t.exports=function(t){var e=s(t);return e>0?n(e,9007199254740991):0}},8981:function(t,e,i){var s=i(7750),n=Object;t.exports=function(t){return n(s(t))}},2777:function(t,e,i){var s=i(9565),n=i(34),r=i(757),o=i(5966),a=i(4270),l=i(8227),h=TypeError,c=l("toPrimitive");t.exports=function(t,e){if(!n(t)||r(t))return t;var i,l=o(t,c);if(l){if(void 0===e&&(e="default"),i=s(l,t,e),!n(i)||r(i))return i;throw new h("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},6969:function(t,e,i){var s=i(2777),n=i(757);t.exports=function(t){var e=s(t,"string");return n(e)?e:e+""}},2140:function(t,e,i){var s=i(8227),n=s("toStringTag"),r={};r[n]="z",t.exports="[object z]"===String(r)},655:function(t,e,i){var s=i(6955),n=String;t.exports=function(t){if("Symbol"===s(t))throw new TypeError("Cannot convert a Symbol value to a string");return n(t)}},6823:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(i){return"Object"}}},3392:function(t,e,i){var s=i(9504),n=0,r=Math.random(),o=s(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++n+r,36)}},7040:function(t,e,i){var s=i(4495);t.exports=s&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:function(t,e,i){var s=i(3724),n=i(9039);t.exports=s&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2812:function(t){var e=TypeError;t.exports=function(t,i){if(t<i)throw new e("Not enough arguments");return t}},8622:function(t,e,i){var s=i(4475),n=i(4901),r=s.WeakMap;t.exports=n(r)&&/native code/.test(String(r))},8227:function(t,e,i){var s=i(4475),n=i(5745),r=i(9297),o=i(3392),a=i(4495),l=i(7040),h=s.Symbol,c=n("wks"),d=l?h["for"]||h:h&&h.withoutSetter||o;t.exports=function(t){return r(c,t)||(c[t]=a&&r(h,t)?h[t]:d("Symbol."+t)),c[t]}},4114:function(t,e,i){var s=i(6518),n=i(8981),r=i(6198),o=i(4527),a=i(6837),l=i(9039),h=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},d=h||!c();s({target:"Array",proto:!0,arity:1,forced:d},{push:function(t){var e=n(this),i=r(e),s=arguments.length;a(i+s);for(var l=0;l<s;l++)e[i]=arguments[l],i++;return o(e,i),i}})},4603:function(t,e,i){var s=i(6840),n=i(9504),r=i(655),o=i(2812),a=URLSearchParams,l=a.prototype,h=n(l.append),c=n(l["delete"]),d=n(l.forEach),u=n([].push),p=new a("a=1&a=2&b=3");p["delete"]("a",1),p["delete"]("b",void 0),p+""!=="a=2"&&s(l,"delete",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return c(this,t);var s=[];d(this,(function(t,e){u(s,{key:e,value:t})})),o(e,1);var n,a=r(t),l=r(i),p=0,f=0,g=!1,m=s.length;while(p<m)n=s[p++],g||n.key===a?(g=!0,c(this,n.key)):f++;while(f<m)n=s[f++],n.key===a&&n.value===l||h(this,n.key,n.value)}),{enumerable:!0,unsafe:!0})},7566:function(t,e,i){var s=i(6840),n=i(9504),r=i(655),o=i(2812),a=URLSearchParams,l=a.prototype,h=n(l.getAll),c=n(l.has),d=new a("a=1");!d.has("a",2)&&d.has("a",void 0)||s(l,"has",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return c(this,t);var s=h(this,t);o(e,1);var n=r(i),a=0;while(a<s.length)if(s[a++]===n)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(t,e,i){var s=i(3724),n=i(9504),r=i(2106),o=URLSearchParams.prototype,a=n(o.forEach);s&&!("size"in o)&&r(o,"size",{get:function(){var t=0;return a(this,(function(){t++})),t},configurable:!0,enumerable:!0})},2022:function(t,e,i){
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */
function s(t){return t+.5|0}i.d(e,{A6:function(){return Ls},E8:function(){return Jr},PP:function(){return No},t1:function(){return $r},s$:function(){return lo},kc:function(){return jo},hE:function(){return uo},m_:function(){return Io}});const n=(t,e,i)=>Math.max(Math.min(t,i),e);function r(t){return n(s(2.55*t),0,255)}function o(t){return n(s(255*t),0,255)}function a(t){return n(s(t/2.55)/100,0,1)}function l(t){return n(s(100*t),0,100)}const h={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},c=[..."0123456789ABCDEF"],d=t=>c[15&t],u=t=>c[(240&t)>>4]+c[15&t],p=t=>(240&t)>>4===(15&t),f=t=>p(t.r)&&p(t.g)&&p(t.b)&&p(t.a);function g(t){var e,i=t.length;return"#"===t[0]&&(4===i||5===i?e={r:255&17*h[t[1]],g:255&17*h[t[2]],b:255&17*h[t[3]],a:5===i?17*h[t[4]]:255}:7!==i&&9!==i||(e={r:h[t[1]]<<4|h[t[2]],g:h[t[3]]<<4|h[t[4]],b:h[t[5]]<<4|h[t[6]],a:9===i?h[t[7]]<<4|h[t[8]]:255})),e}const m=(t,e)=>t<255?e(t):"";function b(t){var e=f(t)?d:u;return t?"#"+e(t.r)+e(t.g)+e(t.b)+m(t.a,e):void 0}const v=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function y(t,e,i){const s=e*Math.min(i,1-i),n=(e,n=(e+t/30)%12)=>i-s*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function _(t,e,i){const s=(s,n=(s+t/60)%6)=>i-i*e*Math.max(Math.min(n,4-n,1),0);return[s(5),s(3),s(1)]}function x(t,e,i){const s=y(t,1,.5);let n;for(e+i>1&&(n=1/(e+i),e*=n,i*=n),n=0;n<3;n++)s[n]*=1-e-i,s[n]+=e;return s}function w(t,e,i,s,n){return t===n?(e-i)/s+(e<i?6:0):e===n?(i-t)/s+2:(t-e)/s+4}function A(t){const e=255,i=t.r/e,s=t.g/e,n=t.b/e,r=Math.max(i,s,n),o=Math.min(i,s,n),a=(r+o)/2;let l,h,c;return r!==o&&(c=r-o,h=a>.5?c/(2-r-o):c/(r+o),l=w(i,s,n,c,r),l=60*l+.5),[0|l,h||0,a]}function S(t,e,i,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,s)).map(o)}function E(t,e,i){return S(y,t,e,i)}function C(t,e,i){return S(x,t,e,i)}function M(t,e,i){return S(_,t,e,i)}function T(t){return(t%360+360)%360}function k(t){const e=v.exec(t);let i,s=255;if(!e)return;e[5]!==i&&(s=e[6]?r(+e[5]):o(+e[5]));const n=T(+e[2]),a=+e[3]/100,l=+e[4]/100;return i="hwb"===e[1]?C(n,a,l):"hsv"===e[1]?M(n,a,l):E(n,a,l),{r:i[0],g:i[1],b:i[2],a:s}}function P(t,e){var i=A(t);i[0]=T(i[0]+e),i=E(i),t.r=i[0],t.g=i[1],t.b=i[2]}function L(t){if(!t)return;const e=A(t),i=e[0],s=l(e[1]),n=l(e[2]);return t.a<255?`hsla(${i}, ${s}%, ${n}%, ${a(t.a)})`:`hsl(${i}, ${s}%, ${n}%)`}const I={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},R={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function D(){const t={},e=Object.keys(R),i=Object.keys(I);let s,n,r,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],n=0;n<i.length;n++)r=i[n],a=a.replace(r,I[r]);r=parseInt(R[o],16),t[a]=[r>>16&255,r>>8&255,255&r]}return t}let O;function F(t){O||(O=D(),O.transparent=[0,0,0,0]);const e=O[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const N=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function B(t){const e=N.exec(t);let i,s,o,a=255;if(e){if(e[7]!==i){const t=+e[7];a=e[8]?r(t):n(255*t,0,255)}return i=+e[1],s=+e[3],o=+e[5],i=255&(e[2]?r(i):n(i,0,255)),s=255&(e[4]?r(s):n(s,0,255)),o=255&(e[6]?r(o):n(o,0,255)),{r:i,g:s,b:o,a:a}}}function z(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${a(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const H=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,j=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function $(t,e,i){const s=j(a(t.r)),n=j(a(t.g)),r=j(a(t.b));return{r:o(H(s+i*(j(a(e.r))-s))),g:o(H(n+i*(j(a(e.g))-n))),b:o(H(r+i*(j(a(e.b))-r))),a:t.a+i*(e.a-t.a)}}function U(t,e,i){if(t){let s=A(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,0===e?360:1)),s=E(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function V(t,e){return t?Object.assign(e||{},t):t}function W(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=o(t[3]))):(e=V(t,{r:0,g:0,b:0,a:1}),e.a=o(e.a)),e}function G(t){return"r"===t.charAt(0)?B(t):k(t)}class K{constructor(t){if(t instanceof K)return t;const e=typeof t;let i;"object"===e?i=W(t):"string"===e&&(i=g(t)||F(t)||G(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=V(this._rgb);return t&&(t.a=a(t.a)),t}set rgb(t){this._rgb=W(t)}rgbString(){return this._valid?z(this._rgb):void 0}hexString(){return this._valid?b(this._rgb):void 0}hslString(){return this._valid?L(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let n;const r=e===n?.5:e,o=2*r-1,a=i.a-s.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;n=1-l,i.r=255&l*i.r+n*s.r+.5,i.g=255&l*i.g+n*s.g+.5,i.b=255&l*i.b+n*s.b+.5,i.a=r*i.a+(1-r)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=$(this._rgb,t._rgb,e)),this}clone(){return new K(this.rgb)}alpha(t){return this._rgb.a=o(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=s(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return U(this._rgb,2,t),this}darken(t){return U(this._rgb,2,-t),this}saturate(t){return U(this._rgb,1,t),this}desaturate(t){return U(this._rgb,1,-t),this}rotate(t){return P(this._rgb,t),this}}
/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */
function q(){}const X=(()=>{let t=0;return()=>t++})();function Y(t){return null===t||"undefined"===typeof t}function Q(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Z(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function J(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function tt(t,e){return J(t)?t:e}function et(t,e){return"undefined"===typeof t?e:t}const it=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function st(t,e,i){if(t&&"function"===typeof t.call)return t.apply(i,e)}function nt(t,e,i,s){let n,r,o;if(Q(t))if(r=t.length,s)for(n=r-1;n>=0;n--)e.call(i,t[n],n);else for(n=0;n<r;n++)e.call(i,t[n],n);else if(Z(t))for(o=Object.keys(t),r=o.length,n=0;n<r;n++)e.call(i,t[o[n]],o[n])}function rt(t,e){let i,s,n,r;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(n=t[i],r=e[i],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function ot(t){if(Q(t))return t.map(ot);if(Z(t)){const e=Object.create(null),i=Object.keys(t),s=i.length;let n=0;for(;n<s;++n)e[i[n]]=ot(t[i[n]]);return e}return t}function at(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function lt(t,e,i,s){if(!at(t))return;const n=e[t],r=i[t];Z(n)&&Z(r)?ht(n,r,s):e[t]=ot(r)}function ht(t,e,i){const s=Q(e)?e:[e],n=s.length;if(!Z(t))return t;i=i||{};const r=i.merger||lt;let o;for(let a=0;a<n;++a){if(o=s[a],!Z(o))continue;const e=Object.keys(o);for(let s=0,n=e.length;s<n;++s)r(e[s],t,o,i)}return t}function ct(t,e){return ht(t,e,{merger:dt})}function dt(t,e,i){if(!at(t))return;const s=e[t],n=i[t];Z(s)&&Z(n)?ct(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ot(n))}const ut={"":t=>t,x:t=>t.x,y:t=>t.y};function pt(t){const e=t.split("."),i=[];let s="";for(const n of e)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}function ft(t){const e=pt(t);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}function gt(t,e){const i=ut[e]||(ut[e]=ft(e));return i(t)}function mt(t){return t.charAt(0).toUpperCase()+t.slice(1)}const bt=t=>"undefined"!==typeof t,vt=t=>"function"===typeof t,yt=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function _t(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const xt=Math.PI,wt=2*xt,At=Number.POSITIVE_INFINITY,St=xt/180,Et=xt/2,Ct=xt/4,Mt=2*xt/3,Tt=Math.log10,kt=Math.sign;function Pt(t,e,i){return Math.abs(t-e)<i}function Lt(t){const e=Math.round(t);t=Pt(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(Tt(t))),s=t/i,n=s<=1?1:s<=2?2:s<=5?5:10;return n*i}function It(t){const e=[],i=Math.sqrt(t);let s;for(s=1;s<i;s++)t%s===0&&(e.push(s),e.push(t/s));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}function Rt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Dt(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function Ot(t,e,i){let s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s][i],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Ft(t){return t*(xt/180)}function Nt(t){return t*(180/xt)}function Bt(t){if(!J(t))return;let e=1,i=0;while(Math.round(t*e)/e!==t)e*=10,i++;return i}function zt(t,e){const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);let r=Math.atan2(s,i);return r<-.5*xt&&(r+=wt),{angle:r,distance:n}}function Ht(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function jt(t){return(t%wt+wt)%wt}function $t(t,e,i,s){const n=jt(t),r=jt(e),o=jt(i),a=jt(r-n),l=jt(o-n),h=jt(n-r),c=jt(n-o);return n===r||n===o||s&&r===o||a>l&&h<c}function Ut(t,e,i){return Math.max(e,Math.min(i,t))}function Vt(t){return Ut(t,-32768,32767)}function Wt(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function Gt(t,e,i){i=i||(i=>t[i]<e);let s,n=t.length-1,r=0;while(n-r>1)s=r+n>>1,i(s)?r=s:n=s;return{lo:r,hi:n}}const Kt=(t,e,i,s)=>Gt(t,i,s?s=>{const n=t[s][e];return n<i||n===i&&t[s+1][e]===i}:s=>t[s][e]<i),qt=(t,e,i)=>Gt(t,i,(s=>t[s][e]>=i));function Xt(t,e,i){let s=0,n=t.length;while(s<n&&t[s]<e)s++;while(n>s&&t[n-1]>i)n--;return s>0||n<t.length?t.slice(s,n):t}const Yt=["push","pop","shift","splice","unshift"];function Qt(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Yt.forEach((e=>{const i="_onData"+mt(e),s=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const n=s.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"===typeof t[i]&&t[i](...e)})),n}})})))}function Zt(t,e){const i=t._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(e);-1!==n&&s.splice(n,1),s.length>0||(Yt.forEach((e=>{delete t[e]})),delete t._chartjs)}function Jt(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const te=function(){return"undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame}();function ee(t,e){let i=[],s=!1;return function(...n){i=n,s||(s=!0,te.call(window,(()=>{s=!1,t.apply(e,i)})))}}function ie(t,e){let i;return function(...s){return e?(clearTimeout(i),i=setTimeout(t,e,s)):t.apply(this,s),e}}const se=t=>"start"===t?"left":"end"===t?"right":"center",ne=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,re=(t,e,i,s)=>{const n=s?"left":"right";return t===n?i:"center"===t?(e+i)/2:e};const oe=t=>0===t||1===t,ae=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*wt/i),le=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*wt/i)+1,he={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Et),easeOutSine:t=>Math.sin(t*Et),easeInOutSine:t=>-.5*(Math.cos(xt*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>oe(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>oe(t)?t:ae(t,.075,.3),easeOutElastic:t=>oe(t)?t:le(t,.075,.3),easeInOutElastic(t){const e=.1125,i=.45;return oe(t)?t:t<.5?.5*ae(2*t,e,i):.5+.5*le(2*t-1,e,i)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-he.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*he.easeInBounce(2*t):.5*he.easeOutBounce(2*t-1)+.5};function ce(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function de(t){return ce(t)?t:new K(t)}function ue(t){return ce(t)?t:new K(t).saturate(.5).darken(.1).hexString()}const pe=["x","y","borderWidth","radius","tension"],fe=["color","borderColor","backgroundColor"];function ge(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:fe},numbers:{type:"number",properties:pe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})}function me(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const be=new Map;function ve(t,e){e=e||{};const i=t+JSON.stringify(e);let s=be.get(i);return s||(s=new Intl.NumberFormat(t,e),be.set(i,s)),s}function ye(t,e,i){return ve(e,i).format(t)}const _e={values(t){return Q(t)?t:""+t},numeric(t,e,i){if(0===t)return"0";const s=this.chart.options.locale;let n,r=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(n="scientific"),r=xe(t,i)}const o=Tt(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ye(t,s,l)},logarithmic(t,e,i){if(0===t)return"0";const s=i[e].significand||t/Math.pow(10,Math.floor(Tt(t)));return[1,2,3,5,10,15].includes(s)||e>.8*i.length?_e.numeric.call(this,t,e,i):""}};function xe(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var we={formatters:_e};function Ae(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:we.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}const Se=Object.create(null),Ee=Object.create(null);function Ce(t,e){if(!e)return t;const i=e.split(".");for(let s=0,n=i.length;s<n;++s){const e=i[s];t=t[e]||(t[e]=Object.create(null))}return t}function Me(t,e,i){return"string"===typeof e?ht(Ce(t,e),i):ht(Ce(t,""),e)}class Te{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ue(e.backgroundColor),this.hoverBorderColor=(t,e)=>ue(e.borderColor),this.hoverColor=(t,e)=>ue(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Me(this,t,e)}get(t){return Ce(this,t)}describe(t,e){return Me(Ee,t,e)}override(t,e){return Me(Se,t,e)}route(t,e,i,s){const n=Ce(this,t),r=Ce(this,i),o="_"+e;Object.defineProperties(n,{[o]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=r[s];return Z(t)?Object.assign({},e,t):et(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach((t=>t(this)))}}var ke=new Te({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ge,me,Ae]);function Pe(t){return!t||Y(t.size)||Y(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Le(t,e,i,s,n){let r=e[n];return r||(r=e[n]=t.measureText(n).width,i.push(n)),r>s&&(s=r),s}function Ie(t,e,i){const s=t.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((e-n)*s)/s+n}function Re(t,e){(e||t)&&(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function De(t,e,i,s){Oe(t,e,i,s,null)}function Oe(t,e,i,s,n){let r,o,a,l,h,c,d,u;const p=e.pointStyle,f=e.rotation,g=e.radius;let m=(f||0)*St;if(p&&"object"===typeof p&&(r=p.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(i,s),t.rotate(m),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:n?t.ellipse(i,s,n/2,g,0,0,wt):t.arc(i,s,g,0,wt),t.closePath();break;case"triangle":c=n?n/2:g,t.moveTo(i+Math.sin(m)*c,s-Math.cos(m)*g),m+=Mt,t.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*g),m+=Mt,t.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*g),t.closePath();break;case"rectRounded":h=.516*g,l=g-h,o=Math.cos(m+Ct)*l,d=Math.cos(m+Ct)*(n?n/2-h:l),a=Math.sin(m+Ct)*l,u=Math.sin(m+Ct)*(n?n/2-h:l),t.arc(i-d,s-a,h,m-xt,m-Et),t.arc(i+u,s-o,h,m-Et,m),t.arc(i+d,s+a,h,m,m+Et),t.arc(i-u,s+o,h,m+Et,m+xt),t.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*g,c=n?n/2:l,t.rect(i-c,s-l,2*c,2*l);break}m+=Ct;case"rectRot":d=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),t.moveTo(i-d,s-a),t.lineTo(i+u,s-o),t.lineTo(i+d,s+a),t.lineTo(i-u,s+o),t.closePath();break;case"crossRot":m+=Ct;case"cross":d=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),t.moveTo(i-d,s-a),t.lineTo(i+d,s+a),t.moveTo(i+u,s-o),t.lineTo(i-u,s+o);break;case"star":d=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),t.moveTo(i-d,s-a),t.lineTo(i+d,s+a),t.moveTo(i+u,s-o),t.lineTo(i-u,s+o),m+=Ct,d=Math.cos(m)*(n?n/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),t.moveTo(i-d,s-a),t.lineTo(i+d,s+a),t.moveTo(i+u,s-o),t.lineTo(i-u,s+o);break;case"line":o=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(i-o,s-a),t.lineTo(i+o,s+a);break;case"dash":t.moveTo(i,s),t.lineTo(i+Math.cos(m)*(n?n/2:g),s+Math.sin(m)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Fe(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Ne(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Be(t){t.restore()}function ze(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Y(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function He(t,e,i,s,n){if(n.strikethrough||n.underline){const r=t.measureText(s),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,h=i+r.actualBoundingBoxDescent,c=n.strikethrough?(l+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(o,c),t.lineTo(a,c),t.stroke()}}function je(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function $e(t,e,i,s,n,r={}){const o=Q(e)?e:[e],a=r.strokeWidth>0&&""!==r.strokeColor;let l,h;for(t.save(),t.font=n.string,ze(t,r),l=0;l<o.length;++l)h=o[l],r.backdrop&&je(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Y(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(h,i,s,r.maxWidth)),t.fillText(h,i,s,r.maxWidth),He(t,i,s,h,r),s+=Number(n.lineHeight);t.restore()}function Ue(t,e){const{x:i,y:s,w:n,h:r,radius:o}=e;t.arc(i+o.topLeft,s+o.topLeft,o.topLeft,1.5*xt,xt,!0),t.lineTo(i,s+r-o.bottomLeft),t.arc(i+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,xt,Et,!0),t.lineTo(i+n-o.bottomRight,s+r),t.arc(i+n-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Et,0,!0),t.lineTo(i+n,s+o.topRight),t.arc(i+n-o.topRight,s+o.topRight,o.topRight,0,-Et,!0),t.lineTo(i+o.topLeft,s)}const Ve=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,We=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ge(t,e){const i=(""+t).match(Ve);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const Ke=t=>+t||0;function qe(t,e){const i={},s=Z(e),n=s?Object.keys(e):e,r=Z(t)?s?i=>et(t[i],t[e[i]]):e=>t[e]:()=>t;for(const o of n)i[o]=Ke(r(o));return i}function Xe(t){return qe(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ye(t){return qe(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Qe(t){const e=Xe(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ze(t,e){t=t||{},e=e||ke.font;let i=et(t.size,e.size);"string"===typeof i&&(i=parseInt(i,10));let s=et(t.style,e.style);s&&!(""+s).match(We)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:et(t.family,e.family),lineHeight:Ge(et(t.lineHeight,e.lineHeight),i),size:i,style:s,weight:et(t.weight,e.weight),string:""};return n.string=Pe(n),n}function Je(t,e,i,s){let n,r,o,a=!0;for(n=0,r=t.length;n<r;++n)if(o=t[n],void 0!==o&&(void 0!==e&&"function"===typeof o&&(o=o(e),a=!1),void 0!==i&&Q(o)&&(o=o[i%o.length],a=!1),void 0!==o))return s&&!a&&(s.cacheable=!1),o}function ti(t,e,i){const{min:s,max:n}=t,r=it(e,(n-s)/2),o=(t,e)=>i&&0===t?0:t+e;return{min:o(s,-Math.abs(r)),max:o(n,r)}}function ei(t,e){return Object.assign(Object.create(t),e)}function ii(t,e=[""],i,s,n=(()=>t[0])){const r=i||t;"undefined"===typeof s&&(s=vi("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:s,_getTarget:n,override:i=>ii([i,...t],e,r,s)};return new Proxy(o,{deleteProperty(e,i){return delete e[i],delete e._keys,delete t[0][i],!0},get(i,s){return ai(i,s,(()=>bi(s,e,t,i)))},getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(t._scopes[0],e)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(t,e){return yi(t).includes(e)},ownKeys(t){return yi(t)},set(t,e,i){const s=t._storage||(t._storage=n());return t[e]=s[e]=i,delete t._keys,!0}})}function si(t,e,i,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:ni(t,s),setContext:e=>si(t,e,i,s),override:n=>si(t.override(n),e,i,s)};return new Proxy(n,{deleteProperty(e,i){return delete e[i],delete t[i],!0},get(t,e,i){return ai(t,e,(()=>li(t,e,i)))},getOwnPropertyDescriptor(e,i){return e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(e,i){return Reflect.has(t,i)},ownKeys(){return Reflect.ownKeys(t)},set(e,i,s){return t[i]=s,delete e[i],!0}})}function ni(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:i,indexable:s,isScriptable:vt(i)?i:()=>i,isIndexable:vt(s)?s:()=>s}}const ri=(t,e)=>t?t+mt(e):e,oi=(t,e)=>Z(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function ai(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const s=i();return t[e]=s,s}function li(t,e,i){const{_proxy:s,_context:n,_subProxy:r,_descriptors:o}=t;let a=s[e];return vt(a)&&o.isScriptable(e)&&(a=hi(e,a,t,i)),Q(a)&&a.length&&(a=ci(e,a,t,o.isIndexable)),oi(e,a)&&(a=si(a,n,r&&r[e],o)),a}function hi(t,e,i,s){const{_proxy:n,_context:r,_subProxy:o,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||s);return a.delete(t),oi(t,l)&&(l=fi(n._scopes,n,t,l)),l}function ci(t,e,i,s){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=i;if("undefined"!==typeof r.index&&s(t))return e[r.index%e.length];if(Z(e[0])){const i=e,s=n._scopes.filter((t=>t!==i));e=[];for(const l of i){const i=fi(s,n,t,l);e.push(si(i,r,o&&o[t],a))}}return e}function di(t,e,i){return vt(t)?t(e,i):t}const ui=(t,e)=>!0===t?e:"string"===typeof t?gt(e,t):void 0;function pi(t,e,i,s,n){for(const r of e){const e=ui(i,r);if(e){t.add(e);const r=di(e._fallback,i,n);if("undefined"!==typeof r&&r!==i&&r!==s)return r}else if(!1===e&&"undefined"!==typeof s&&i!==s)return null}return!1}function fi(t,e,i,s){const n=e._rootScopes,r=di(e._fallback,i,s),o=[...t,...n],a=new Set;a.add(s);let l=gi(a,o,i,r||i,s);return null!==l&&(("undefined"===typeof r||r===i||(l=gi(a,o,r,l,s),null!==l))&&ii(Array.from(a),[""],n,r,(()=>mi(e,i,s))))}function gi(t,e,i,s,n){while(i)i=pi(t,e,i,s,n);return i}function mi(t,e,i){const s=t._getTarget();e in s||(s[e]={});const n=s[e];return Q(n)&&Z(i)?i:n||{}}function bi(t,e,i,s){let n;for(const r of e)if(n=vi(ri(r,t),i),"undefined"!==typeof n)return oi(t,n)?fi(i,s,t,n):n}function vi(t,e){for(const i of e){if(!i)continue;const e=i[t];if("undefined"!==typeof e)return e}}function yi(t){let e=t._keys;return e||(e=t._keys=_i(t._scopes)),e}function _i(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}Number.EPSILON;function xi(){return"undefined"!==typeof window&&"undefined"!==typeof document}function wi(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Ai(t,e,i){let s;return"string"===typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e.parentNode[i])):s=t,s}const Si=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Ei(t,e){return Si(t).getPropertyValue(e)}const Ci=["top","right","bottom","left"];function Mi(t,e,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const r=Ci[n];s[r]=parseFloat(t[e+"-"+r+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Ti=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function ki(t,e){const i=t.touches,s=i&&i.length?i[0]:t,{offsetX:n,offsetY:r}=s;let o,a,l=!1;if(Ti(n,r,t.target))o=n,a=r;else{const t=e.getBoundingClientRect();o=s.clientX-t.left,a=s.clientY-t.top,l=!0}return{x:o,y:a,box:l}}function Pi(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:s}=e,n=Si(i),r="border-box"===n.boxSizing,o=Mi(n,"padding"),a=Mi(n,"border","width"),{x:l,y:h,box:c}=ki(t,i),d=o.left+(c&&a.left),u=o.top+(c&&a.top);let{width:p,height:f}=e;return r&&(p-=o.width+a.width,f-=o.height+a.height),{x:Math.round((l-d)/p*i.width/s),y:Math.round((h-u)/f*i.height/s)}}function Li(t,e,i){let s,n;if(void 0===e||void 0===i){const r=t&&wi(t);if(r){const t=r.getBoundingClientRect(),o=Si(r),a=Mi(o,"border","width"),l=Mi(o,"padding");e=t.width-l.width-a.width,i=t.height-l.height-a.height,s=Ai(o.maxWidth,r,"clientWidth"),n=Ai(o.maxHeight,r,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:s||At,maxHeight:n||At}}const Ii=t=>Math.round(10*t)/10;function Ri(t,e,i,s){const n=Si(t),r=Mi(n,"margin"),o=Ai(n.maxWidth,t,"clientWidth")||At,a=Ai(n.maxHeight,t,"clientHeight")||At,l=Li(t,e,i);let{width:h,height:c}=l;if("content-box"===n.boxSizing){const t=Mi(n,"border","width"),e=Mi(n,"padding");h-=e.width+t.width,c-=e.height+t.height}h=Math.max(0,h-r.width),c=Math.max(0,s?h/s:c-r.height),h=Ii(Math.min(h,o,l.maxWidth)),c=Ii(Math.min(c,a,l.maxHeight)),h&&!c&&(c=Ii(h/2));const d=void 0!==e||void 0!==i;return d&&s&&l.height&&c>l.height&&(c=l.height,h=Ii(Math.floor(c*s))),{width:h,height:c}}function Di(t,e,i){const s=e||1,n=Math.floor(t.height*s),r=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==s||o.height!==n||o.width!==r)&&(t.currentDevicePixelRatio=s,o.height=n,o.width=r,t.ctx.setTransform(s,0,0,s,0,0),!0)}const Oi=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};xi()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function Fi(t,e){const i=Ei(t,e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const Ni=function(t,e){return{x(i){return t+t+e-i},setWidth(t){e=t},textAlign(t){return"center"===t?t:"right"===t?"left":"right"},xPlus(t,e){return t-e},leftForLtr(t,e){return t-e}}},Bi=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function zi(t,e,i){return t?Ni(e,i):Bi()}function Hi(t,e){let i,s;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=s)}function ji(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}
/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */
class $i{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const n=e.listeners[s],r=e.duration;n.forEach((s=>s({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(i-e.start,r)})))}_refresh(){this._request||(this._running=!0,this._request=te.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,s)=>{if(!i.running||!i.items.length)return;const n=i.items;let r,o=n.length-1,a=!1;for(;o>=0;--o)r=n[o],r._active?(r._total>i.duration&&(i.duration=r._total),r.tick(t),a=!0):(n[o]=n[n.length-1],n.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),n.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=n.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ui=new $i;const Vi="transparent",Wi={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const s=de(t||Vi),n=s.valid&&de(e||Vi);return n&&n.valid?n.mix(s,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class Gi{constructor(t,e,i,s){const n=e[i];s=Je([t.to,s,n,t.from]);const r=Je([t.from,n,s]);this._active=!0,this._fn=t.fn||Wi[t.type||typeof r],this._easing=he[t.easing]||he.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],n=i-this._start,r=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=n,this._loop=!!t.loop,this._to=Je([t.to,e,s,t.from]),this._from=Je([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,n=this._from,r=this._loop,o=this._to;let a;if(this._active=n!==o&&(r||e<i),!this._active)return this._target[s]=o,void this._notify(!0);e<0?this._target[s]=n:(a=e/i%2,a=r&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[s]=this._fn(n,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class Ki{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Z(t))return;const e=Object.keys(ke.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach((s=>{const n=t[s];if(!Z(n))return;const r={};for(const t of e)r[t]=n[t];(Q(n.properties)&&n.properties||[s]).forEach((t=>{t!==s&&i.has(t)||i.set(t,r)}))}))}_animateOptions(t,e){const i=e.options,s=Xi(t,i);if(!s)return[];const n=this._createAnimations(s,i);return i.$shared&&qi(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),n}_createAnimations(t,e){const i=this._properties,s=[],n=t.$animations||(t.$animations={}),r=Object.keys(e),o=Date.now();let a;for(a=r.length-1;a>=0;--a){const l=r[a];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(t,e));continue}const h=e[l];let c=n[l];const d=i.get(l);if(c){if(d&&c.active()){c.update(d,h,o);continue}c.cancel()}d&&d.duration?(n[l]=c=new Gi(d,t,l,h),s.push(c)):t[l]=h}return s}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(Ui.add(this._chart,i),!0):void 0}}function qi(t,e){const i=[],s=Object.keys(e);for(let n=0;n<s.length;n++){const e=t[s[n]];e&&e.active()&&i.push(e.wait())}return Promise.all(i)}function Xi(t,e){if(!e)return;let i=t.options;if(i)return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i;t.options=e}function Yi(t,e){const i=t&&t.options||{},s=i.reverse,n=void 0===i.min?e:0,r=void 0===i.max?e:0;return{start:s?r:n,end:s?n:r}}function Qi(t,e,i){if(!1===i)return!1;const s=Yi(t,i),n=Yi(e,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function Zi(t){let e,i,s,n;return Z(t)?(e=t.top,i=t.right,s=t.bottom,n=t.left):e=i=s=n=t,{top:e,right:i,bottom:s,left:n,disabled:!1===t}}function Ji(t,e){const i=[],s=t._getSortedDatasetMetas(e);let n,r;for(n=0,r=s.length;n<r;++n)i.push(s[n].index);return i}function ts(t,e,i,s={}){const n=t.keys,r="single"===s.mode;let o,a,l,h;if(null!==e){for(o=0,a=n.length;o<a;++o){if(l=+n[o],l===i){if(s.all)continue;break}h=t.values[l],J(h)&&(r||0===e||kt(e)===kt(h))&&(e+=h)}return e}}function es(t,e){const{iScale:i,vScale:s}=e,n="x"===i.axis?"x":"y",r="x"===s.axis?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,h,c;for(l=0,h=o.length;l<h;++l)c=o[l],a[l]={[n]:c,[r]:t[c]};return a}function is(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function ss(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function ns(t){const{min:e,max:i,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}function rs(t,e,i){const s=t[e]||(t[e]={});return s[i]||(s[i]={})}function os(t,e,i,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const e=t[n.index];if(i&&e>0||!i&&e<0)return n.index}return null}function as(t,e){const{chart:i,_cachedMeta:s}=t,n=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,h=o.axis,c=ss(r,o,s),d=e.length;let u;for(let p=0;p<d;++p){const t=e[p],{[l]:i,[h]:r}=t,d=t._stacks||(t._stacks={});u=d[h]=rs(n,c,i),u[a]=r,u._top=os(u,o,!0,s.type),u._bottom=os(u,o,!1,s.type);const f=u._visualValues||(u._visualValues={});f[a]=r}}function ls(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function hs(t,e){return ei(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function cs(t,e,i){return ei(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function ds(t,e){const i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[s]||void 0===e[s][i])return;delete e[s][i],void 0!==e[s]._visualValues&&void 0!==e[s]._visualValues[i]&&delete e[s]._visualValues[i]}}}const us=t=>"reset"===t||"none"===t,ps=(t,e)=>e?t:Object.assign({},t),fs=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Ji(i,!0),values:null};class gs{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=is(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ds(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(t,e,i,s)=>"x"===t?e:"r"===t?s:i,n=e.xAxisID=et(i.xAxisID,ls(t,"x")),r=e.yAxisID=et(i.yAxisID,ls(t,"y")),o=e.rAxisID=et(i.rAxisID,ls(t,"r")),a=e.indexAxis,l=e.iAxisID=s(a,n,r,o),h=e.vAxisID=s(a,r,n,o);e.xScale=this.getScaleForId(n),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Zt(this._data,this),t._stacked&&ds(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Z(e)){const t=this._cachedMeta;this._data=es(e,t)}else if(i!==e){if(i){Zt(i,this);const t=this._cachedMeta;ds(t),t._parsed=[]}e&&Object.isExtensible(e)&&Qt(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const n=e._stacked;e._stacked=is(e.vScale,e),e.stack!==i.stack&&(s=!0,ds(e),e.stack=i.stack),this._resyncElements(t),(s||n!==e._stacked)&&as(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:n,_stacked:r}=i,o=n.axis;let a,l,h,c=0===t&&e===s.length||i._sorted,d=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,h=s;else{h=Q(s[t])?this.parseArrayData(i,s,t,e):Z(s[t])?this.parseObjectData(i,s,t,e):this.parsePrimitiveData(i,s,t,e);const n=()=>null===l[o]||d&&l[o]<d[o];for(a=0;a<e;++a)i._parsed[a+t]=l=h[a],c&&(n()&&(c=!1),d=l);i._sorted=c}r&&as(this,h)}parsePrimitiveData(t,e,i,s){const{iScale:n,vScale:r}=t,o=n.axis,a=r.axis,l=n.getLabels(),h=n===r,c=new Array(s);let d,u,p;for(d=0,u=s;d<u;++d)p=d+i,c[d]={[o]:h||n.parse(l[p],p),[a]:r.parse(e[p],p)};return c}parseArrayData(t,e,i,s){const{xScale:n,yScale:r}=t,o=new Array(s);let a,l,h,c;for(a=0,l=s;a<l;++a)h=a+i,c=e[h],o[a]={x:n.parse(c[0],h),y:r.parse(c[1],h)};return o}parseObjectData(t,e,i,s){const{xScale:n,yScale:r}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(s);let h,c,d,u;for(h=0,c=s;h<c;++h)d=h+i,u=e[d],l[h]={x:n.parse(gt(u,o),d),y:r.parse(gt(u,a),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,n=this._cachedMeta,r=e[t.axis],o={keys:Ji(s,!0),values:e._stacks[t.axis]._visualValues};return ts(o,r,n.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const n=i[e.axis];let r=null===n?NaN:n;const o=s&&i._stacks[e.axis];s&&o&&(s.values=o,r=ts(s,n,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,n=i._sorted&&t===i.iScale,r=s.length,o=this._getOtherScale(t),a=fs(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:c}=ns(o);let d,u;function p(){u=s[d];const e=u[o.axis];return!J(u[t.axis])||h>e||c<e}for(d=0;d<r;++d)if(!p()&&(this.updateRangeFromParsed(l,t,u,a),n))break;if(n)for(d=r-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(l,t,u,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s][t.axis],J(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,n=this.getParsed(t);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Zi(et(this.options.clip,Qi(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],n=e.chartArea,r=[],o=this._drawStart||0,a=this._drawCount||s.length-o,l=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,n,o,a),h=o;h<o+a;++h){const e=s[h];e.hidden||(e.active&&l?r.push(e):e.draw(t,n))}for(h=0;h<r.length;++h)r[h].draw(t,n)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let n;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];n=e.$context||(e.$context=cs(this.getContext(),t,e)),n.parsed=this.getParsed(t),n.raw=s.data[t],n.index=n.dataIndex=t}else n=this.$context||(this.$context=hs(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=i,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s="active"===e,n=this._cachedDataOpts,r=t+"-"+e,o=n[r],a=this.enableOptionSharing&&bt(i);if(o)return ps(o,a);const l=this.chart.config,h=l.datasetElementScopeKeys(this._type,t),c=s?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),h),u=Object.keys(ke.elements[t]),p=()=>this.getContext(i,s,e),f=l.resolveNamedOptions(d,u,p,c);return f.$shared&&(f.$shared=a,n[r]=Object.freeze(ps(f,a))),f}_resolveAnimations(t,e,i){const s=this.chart,n=this._cachedDataOpts,r=`animation-${e}`,o=n[r];if(o)return o;let a;if(!1!==s.options.animation){const s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,e),r=s.getOptionScopes(this.getDataset(),n);a=s.createResolver(r,this.getContext(t,i,e))}const l=new Ki(s,a&&a.animations);return a&&a._cacheable&&(n[r]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||us(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,n=this.getSharedOptions(i),r=this.includeOptions(e,n)||n!==s;return this.updateSharedOptions(n,e,i),{sharedOptions:n,includeOptions:r}}updateElement(t,e,i,s){us(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!us(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const n=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const s=i.length,n=e.length,r=Math.min(n,s);r&&this.parse(0,r),n>s?this._insertElements(s,n-s,t):n<s&&this._removeElements(n,s-n)}_insertElements(t,e,i=!0){const s=this._cachedMeta,n=s.data,r=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=r;o--)t[o]=t[o-e]};for(a(n),o=t;o<r;++o)n[o]=new this.dataElementType;this._parsing&&a(s._parsed),this.parse(t,e),i&&this.updateElements(n,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&ds(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ms(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let s=[];for(let e=0,n=i.length;e<n;e++)s=s.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=Jt(s.sort(((t,e)=>t-e)))}return t._cache.$bar}function bs(t){const e=t.iScale,i=ms(e,t.type);let s,n,r,o,a=e._length;const l=()=>{32767!==r&&-32768!==r&&(bt(o)&&(a=Math.min(a,Math.abs(r-o)||a)),o=r)};for(s=0,n=i.length;s<n;++s)r=e.getPixelForValue(i[s]),l();for(o=void 0,s=0,n=e.ticks.length;s<n;++s)r=e.getPixelForTick(s),l();return a}function vs(t,e,i,s){const n=i.barThickness;let r,o;return Y(n)?(r=e.min*i.categoryPercentage,o=i.barPercentage):(r=n*s,o=1),{chunk:r/s,ratio:o,start:e.pixels[t]-r/2}}function ys(t,e,i,s){const n=e.pixels,r=n[t];let o=t>0?n[t-1]:null,a=t<n.length-1?n[t+1]:null;const l=i.categoryPercentage;null===o&&(o=r-(null===a?e.end-e.start:a-r)),null===a&&(a=r+r-o);const h=r-(r-Math.min(o,a))/2*l,c=Math.abs(a-o)/2*l;return{chunk:c/s,ratio:i.barPercentage,start:h}}function _s(t,e,i,s){const n=i.parse(t[0],s),r=i.parse(t[1],s),o=Math.min(n,r),a=Math.max(n,r);let l=o,h=a;Math.abs(o)>Math.abs(a)&&(l=a,h=o),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:n,end:r,min:o,max:a}}function xs(t,e,i,s){return Q(t)?_s(t,e,i,s):e[i.axis]=i.parse(t,s),e}function ws(t,e,i,s){const n=t.iScale,r=t.vScale,o=n.getLabels(),a=n===r,l=[];let h,c,d,u;for(h=i,c=i+s;h<c;++h)u=e[h],d={},d[n.axis]=a||n.parse(o[h],h),l.push(xs(u,d,r,h));return l}function As(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Ss(t,e,i){return 0!==t?kt(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function Es(t){let e,i,s,n,r;return t.horizontal?(e=t.base>t.x,i="left",s="right"):(e=t.base<t.y,i="bottom",s="top"),e?(n="end",r="start"):(n="start",r="end"),{start:i,end:s,reverse:e,top:n,bottom:r}}function Cs(t,e,i,s){let n=e.borderSkipped;const r={};if(!n)return void(t.borderSkipped=r);if(!0===n)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:h,bottom:c}=Es(t);"middle"===n&&i&&(t.enableBorderRadius=!0,(i._top||0)===s?n=h:(i._bottom||0)===s?n=c:(r[Ms(c,o,a,l)]=!0,n=h)),r[Ms(n,o,a,l)]=!0,t.borderSkipped=r}function Ms(t,e,i,s){return s?(t=Ts(t,e,i),t=ks(t,i,e)):t=ks(t,e,i),t}function Ts(t,e,i){return t===e?i:t===i?e:t}function ks(t,e,i){return"start"===t?e:"end"===t?i:t}function Ps(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}class Ls extends gs{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,s){return ws(t,e,i,s)}parseArrayData(t,e,i,s){return ws(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:n,vScale:r}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===n.axis?o:a,h="x"===r.axis?o:a,c=[];let d,u,p,f;for(d=i,u=i+s;d<u;++d)f=e[d],p={},p[n.axis]=n.parse(gt(f,l),d),c.push(xs(gt(f,h),p,r,d));return c}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const n=i._custom;n&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,n.min),t.max=Math.max(t.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,n=this.getParsed(t),r=n._custom,o=As(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+i.getLabelForValue(n[i.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const n="reset"===s,{index:r,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),h=this._getRuler(),{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,s);for(let u=e;u<e+i;u++){const e=this.getParsed(u),i=n||Y(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(u),p=this._calculateBarIndexPixels(u,h),f=(e._stacks||{})[o.axis],g={horizontal:l,base:i.base,enableBorderRadius:!f||As(e._custom)||r===f._top||r===f._bottom,x:l?i.head:p.center,y:l?p.center:i.head,height:l?p.size:Math.abs(i.size),width:l?Math.abs(i.size):p.size};d&&(g.options=c||this.resolveDataElementOptions(u,t[u].active?"active":s));const m=g.options||t[u].options;Cs(g,m,f,r),Ps(g,m,h.ratio),this.updateElement(t[u],u,g,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),n=i.options.stacked,r=[],o=t=>{const i=t.controller.getParsed(e),s=i&&i[t.vScale.axis];if(Y(s)||isNaN(s))return!0};for(const a of s)if((void 0===e||!o(a))&&((!1===n||-1===r.indexOf(a.stack)||void 0===n&&void 0===a.stack)&&r.push(a.stack),a.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),n=void 0!==e?s.indexOf(e):-1;return-1===n?s.length-1:n}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let n,r;for(n=0,r=e.data.length;n<r;++n)s.push(i.getPixelForValue(this.getParsed(n)[i.axis],n));const o=t.barThickness,a=o||bs(e);return{min:a,pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:n,minBarLength:r}}=this,o=n||0,a=this.getParsed(t),l=a._custom,h=As(l);let c,d,u=a[e.axis],p=0,f=i?this.applyStack(e,a,i):u;f!==u&&(p=f-u,f=u),h&&(u=l.barStart,f=l.barEnd-l.barStart,0!==u&&kt(u)!==kt(l.barEnd)&&(p=0),p+=u);const g=Y(n)||h?p:n;let m=e.getPixelForValue(g);if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(p+f):m,d=c-m,Math.abs(d)<r){d=Ss(d,e,o)*r,u===o&&(m-=d/2);const t=e.getPixelForDecimal(0),n=e.getPixelForDecimal(1),l=Math.min(t,n),p=Math.max(t,n);m=Math.max(Math.min(m,p),l),c=m+d,i&&!h&&(a._stacks[e.axis]._visualValues[s]=e.getValueForPixel(c)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=kt(d)*e.getLineWidthForValue(o)/2;m+=t,d-=t}return{size:d,base:m,head:c,center:c+d/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,n=s.skipNull,r=et(s.maxBarThickness,1/0);let o,a;if(e.grouped){const i=n?this._getStackCount(t):e.stackCount,l="flex"===s.barThickness?ys(t,e,s,i):vs(t,e,s,i),h=this._getStackIndex(this.index,this._cachedMeta.stack,n?t:void 0);o=l.start+l.chunk*h+l.chunk/2,a=Math.min(r,l.chunk*l.ratio)}else o=i.getPixelForValue(this.getParsed(t)[i.axis],t),a=Math.min(r,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let n=0;for(;n<s;++n)null===this.getParsed(n)[e.axis]||i[n].hidden||i[n].draw(this._ctx)}}function Is(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Rs{static override(t){Object.assign(Rs.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Is()}parse(){return Is()}format(){return Is()}add(){return Is()}diff(){return Is()}startOf(){return Is()}endOf(){return Is()}}var Ds={_date:Rs};function Os(t,e,i,s){const{controller:n,data:r,_sorted:o}=t,a=n._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&r.length){const t=a._reversePixels?qt:Kt;if(!s)return t(r,e,i);if(n._sharedOptions){const s=r[0],n="function"===typeof s.getRange&&s.getRange(e);if(n){const s=t(r,e,i-n),o=t(r,e,i+n);return{lo:s.lo,hi:o.hi}}}}return{lo:0,hi:r.length-1}}function Fs(t,e,i,s,n){const r=t.getSortedVisibleDatasetMetas(),o=i[e];for(let a=0,l=r.length;a<l;++a){const{index:t,data:i}=r[a],{lo:l,hi:h}=Os(r[a],e,o,n);for(let e=l;e<=h;++e){const n=i[e];n.skip||s(n,t,e)}}}function Ns(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,s){const n=e?Math.abs(t.x-s.x):0,r=i?Math.abs(t.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}}function Bs(t,e,i,s,n){const r=[];if(!n&&!t.isPointInArea(e))return r;const o=function(i,o,a){(n||Fe(i,t.chartArea,0))&&i.inRange(e.x,e.y,s)&&r.push({element:i,datasetIndex:o,index:a})};return Fs(t,i,e,o,!0),r}function zs(t,e,i,s){let n=[];function r(t,i,r){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],s),{angle:l}=zt(t,{x:e.x,y:e.y});$t(l,o,a)&&n.push({element:t,datasetIndex:i,index:r})}return Fs(t,i,e,r),n}function Hs(t,e,i,s,n,r){let o=[];const a=Ns(i);let l=Number.POSITIVE_INFINITY;function h(i,h,c){const d=i.inRange(e.x,e.y,n);if(s&&!d)return;const u=i.getCenterPoint(n),p=!!r||t.isPointInArea(u);if(!p&&!d)return;const f=a(e,u);f<l?(o=[{element:i,datasetIndex:h,index:c}],l=f):f===l&&o.push({element:i,datasetIndex:h,index:c})}return Fs(t,i,e,h),o}function js(t,e,i,s,n,r){return r||t.isPointInArea(e)?"r"!==i||s?Hs(t,e,i,s,n,r):zs(t,e,i,n):[]}function $s(t,e,i,s,n){const r=[],o="x"===i?"inXRange":"inYRange";let a=!1;return Fs(t,i,e,((t,s,l)=>{t[o](e[i],n)&&(r.push({element:t,datasetIndex:s,index:l}),a=a||t.inRange(e.x,e.y,n))})),s&&!a?[]:r}var Us={evaluateInteractionItems:Fs,modes:{index(t,e,i,s){const n=Pi(e,t),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?Bs(t,n,r,s,o):js(t,n,r,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,i,s){const n=Pi(e,t),r=i.axis||"xy",o=i.includeInvisible||!1;let a=i.intersect?Bs(t,n,r,s,o):js(t,n,r,!1,s,o);if(a.length>0){const e=a[0].datasetIndex,i=t.getDatasetMeta(e).data;a=[];for(let t=0;t<i.length;++t)a.push({element:i[t],datasetIndex:e,index:t})}return a},point(t,e,i,s){const n=Pi(e,t),r=i.axis||"xy",o=i.includeInvisible||!1;return Bs(t,n,r,s,o)},nearest(t,e,i,s){const n=Pi(e,t),r=i.axis||"xy",o=i.includeInvisible||!1;return js(t,n,r,i.intersect,s,o)},x(t,e,i,s){const n=Pi(e,t);return $s(t,n,"x",i.intersect,s)},y(t,e,i,s){const n=Pi(e,t);return $s(t,n,"y",i.intersect,s)}}};const Vs=["left","top","right","bottom"];function Ws(t,e){return t.filter((t=>t.pos===e))}function Gs(t,e){return t.filter((t=>-1===Vs.indexOf(t.pos)&&t.box.axis===e))}function Ks(t,e){return t.sort(((t,i)=>{const s=e?i:t,n=e?t:i;return s.weight===n.weight?s.index-n.index:s.weight-n.weight}))}function qs(t){const e=[];let i,s,n,r,o,a;for(i=0,s=(t||[]).length;i<s;++i)n=t[i],({position:r,options:{stack:o,stackWeight:a=1}}=n),e.push({index:i,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&r+o,stackWeight:a});return e}function Xs(t){const e={};for(const i of t){const{stack:t,pos:s,stackWeight:n}=i;if(!t||!Vs.includes(s))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=n}return e}function Ys(t,e){const i=Xs(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:o}=a.box,l=i[a.stack],h=l&&a.stackWeight/l.weight;a.horizontal?(a.width=h?h*s:o&&e.availableWidth,a.height=n):(a.width=s,a.height=h?h*n:o&&e.availableHeight)}return i}function Qs(t){const e=qs(t),i=Ks(e.filter((t=>t.box.fullSize)),!0),s=Ks(Ws(e,"left"),!0),n=Ks(Ws(e,"right")),r=Ks(Ws(e,"top"),!0),o=Ks(Ws(e,"bottom")),a=Gs(e,"x"),l=Gs(e,"y");return{fullSize:i,leftAndTop:s.concat(r),rightAndBottom:n.concat(l).concat(o).concat(a),chartArea:Ws(e,"chartArea"),vertical:s.concat(n).concat(l),horizontal:r.concat(o).concat(a)}}function Zs(t,e,i,s){return Math.max(t[i],e[i])+Math.max(t[s],e[s])}function Js(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function tn(t,e,i,s){const{pos:n,box:r}=i,o=t.maxPadding;if(!Z(n)){i.size&&(t[n]-=i.size);const e=s[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?r.height:r.width),i.size=e.size/e.count,t[n]+=i.size}r.getPadding&&Js(o,r.getPadding());const a=Math.max(0,e.outerWidth-Zs(o,t,"left","right")),l=Math.max(0,e.outerHeight-Zs(o,t,"top","bottom")),h=a!==t.w,c=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}function en(t){const e=t.maxPadding;function i(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function sn(t,e){const i=e.maxPadding;function s(t){const s={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{s[t]=Math.max(e[t],i[t])})),s}return s(t?["left","right"]:["top","bottom"])}function nn(t,e,i,s){const n=[];let r,o,a,l,h,c;for(r=0,o=t.length,h=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,sn(a.horizontal,e));const{same:o,other:d}=tn(e,i,a,s);h|=o&&n.length,c=c||d,l.fullSize||n.push(a)}return h&&nn(n,e,i,s)||c}function rn(t,e,i,s,n){t.top=i,t.left=e,t.right=e+s,t.bottom=i+n,t.width=s,t.height=n}function on(t,e,i,s){const n=i.padding;let{x:r,y:o}=e;for(const a of t){const t=a.box,l=s[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/l.weight||1;if(a.horizontal){const s=e.w*h,r=l.size||t.height;bt(l.start)&&(o=l.start),t.fullSize?rn(t,n.left,o,i.outerWidth-n.right-n.left,r):rn(t,e.left+l.placed,o,s,r),l.start=o,l.placed+=s,o=t.bottom}else{const s=e.h*h,o=l.size||t.width;bt(l.start)&&(r=l.start),t.fullSize?rn(t,r,n.top,o,i.outerHeight-n.bottom-n.top):rn(t,r,e.top+l.placed,o,s),l.start=r,l.placed+=s,r=t.right}}e.x=r,e.y=o}var an={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,s){if(!t)return;const n=Qe(t.options.layout.padding),r=Math.max(e-n.width,0),o=Math.max(i-n.height,0),a=Qs(t.boxes),l=a.vertical,h=a.horizontal;nt(t.boxes,(t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()}));const c=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,d=Object.freeze({outerWidth:e,outerHeight:i,padding:n,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/c,hBoxMaxHeight:o/2}),u=Object.assign({},n);Js(u,Qe(s));const p=Object.assign({maxPadding:u,w:r,h:o,x:n.left,y:n.top},n),f=Ys(l.concat(h),d);nn(a.fullSize,p,d,f),nn(l,p,d,f),nn(h,p,d,f)&&nn(l,p,d,f),en(p),on(a.leftAndTop,p,d,f),p.x+=p.w,p.y+=p.h,on(a.rightAndBottom,p,d,f),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},nt(a.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class ln{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class hn extends ln{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const cn="$chartjs",dn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},un=t=>null===t||""===t;function pn(t,e){const i=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[cn]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",un(n)){const e=Fi(t,"width");void 0!==e&&(t.width=e)}if(un(s))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Fi(t,"height");void 0!==e&&(t.height=e)}return t}const fn=!!Oi&&{passive:!0};function gn(t,e,i){t&&t.addEventListener(e,i,fn)}function mn(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,fn)}function bn(t,e){const i=dn[t.type]||t.type,{x:s,y:n}=Pi(t,e);return{type:i,chart:e,native:t,x:void 0!==s?s:null,y:void 0!==n?n:null}}function vn(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function yn(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||vn(i.addedNodes,s),e=e&&!vn(i.removedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}function _n(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||vn(i.removedNodes,s),e=e&&!vn(i.addedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}const xn=new Map;let wn=0;function An(){const t=window.devicePixelRatio;t!==wn&&(wn=t,xn.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function Sn(t,e){xn.size||window.addEventListener("resize",An),xn.set(t,e)}function En(t){xn.delete(t),xn.size||window.removeEventListener("resize",An)}function Cn(t,e,i){const s=t.canvas,n=s&&wi(s);if(!n)return;const r=ee(((t,e)=>{const s=n.clientWidth;i(t,e),s<n.clientWidth&&i()}),window),o=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,s=e.contentRect.height;0===i&&0===s||r(i,s)}));return o.observe(n),Sn(t,r),o}function Mn(t,e,i){i&&i.disconnect(),"resize"===e&&En(t)}function Tn(t,e,i){const s=t.canvas,n=ee((e=>{null!==t.ctx&&i(bn(e,t))}),t);return gn(s,e,n),n}class kn extends ln{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(pn(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[cn])return!1;const i=e[cn].initial;["height","width"].forEach((t=>{const s=i[t];Y(s)?e.removeAttribute(t):e.setAttribute(t,s)}));const s=i.style||{};return Object.keys(s).forEach((t=>{e.style[t]=s[t]})),e.width=e.width,delete e[cn],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),n={attach:yn,detach:_n,resize:Cn},r=n[e]||Tn;s[e]=r(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;const n={attach:Mn,detach:Mn,resize:Mn},r=n[e]||mn;r(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return Ri(t,e,i,s)}isAttached(t){const e=t&&wi(t);return!(!e||!e.isConnected)}}function Pn(t){return!xi()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?hn:kn}class Ln{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Rt(this.x)&&Rt(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach((t=>{s[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),s}}function In(t,e){const i=t.options.ticks,s=Rn(t),n=Math.min(i.maxTicksLimit||s,s),r=i.major.enabled?On(e):[],o=r.length,a=r[0],l=r[o-1],h=[];if(o>n)return Fn(e,h,r,o/n),h;const c=Dn(r,e,n);if(o>0){let t,i;const s=o>1?Math.round((l-a)/(o-1)):null;for(Nn(e,h,c,Y(s)?0:a-s,a),t=0,i=o-1;t<i;t++)Nn(e,h,c,r[t],r[t+1]);return Nn(e,h,c,l,Y(s)?e.length:l+s),h}return Nn(e,h,c),h}function Rn(t){const e=t.options.offset,i=t._tickSize(),s=t._length/i+(e?0:1),n=t._maxLength/i;return Math.floor(Math.min(s,n))}function Dn(t,e,i){const s=Bn(t),n=e.length/i;if(!s)return Math.max(n,1);const r=It(s);for(let o=0,a=r.length-1;o<a;o++){const t=r[o];if(t>n)return t}return Math.max(n,1)}function On(t){const e=[];let i,s;for(i=0,s=t.length;i<s;i++)t[i].major&&e.push(i);return e}function Fn(t,e,i,s){let n,r=0,o=i[0];for(s=Math.ceil(s),n=0;n<t.length;n++)n===o&&(e.push(t[n]),r++,o=i[r*s])}function Nn(t,e,i,s,n){const r=et(s,0),o=Math.min(et(n,t.length),t.length);let a,l,h,c=0;i=Math.ceil(i),n&&(a=n-s,i=a/Math.floor(a/i)),h=r;while(h<0)c++,h=Math.round(r+c*i);for(l=Math.max(r,0);l<o;l++)l===h&&(e.push(t[l]),c++,h=Math.round(r+c*i))}function Bn(t){const e=t.length;let i,s;if(e<2)return!1;for(s=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==s)return!1;return s}const zn=t=>"left"===t?"right":"right"===t?"left":t,Hn=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,jn=(t,e)=>Math.min(e||t,t);function $n(t,e){const i=[],s=t.length/e,n=t.length;let r=0;for(;r<n;r+=s)i.push(t[Math.floor(r)]);return i}function Un(t,e,i){const s=t.ticks.length,n=Math.min(e,s-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l,h=t.getPixelForTick(n);if(!(i&&(l=1===s?Math.max(h-r,o-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(n-1))/2,h+=n<e?l:-l,h<r-a||h>o+a)))return h}function Vn(t,e){nt(t,(t=>{const i=t.gc,s=i.length/2;let n;if(s>e){for(n=0;n<s;++n)delete t.data[i[n]];i.splice(0,s)}}))}function Wn(t){return t.drawTicks?t.tickLength:0}function Gn(t,e){if(!t.display)return 0;const i=Ze(t.font,e),s=Qe(t.padding),n=Q(t.text)?t.text.length:1;return n*i.lineHeight+s.height}function Kn(t,e){return ei(t,{scale:e,type:"scale"})}function qn(t,e,i){return ei(t,{tick:i,index:e,type:"tick"})}function Xn(t,e,i){let s=se(t);return(i&&"right"!==e||!i&&"right"===e)&&(s=zn(s)),s}function Yn(t,e,i,s){const{top:n,left:r,bottom:o,right:a,chart:l}=t,{chartArea:h,scales:c}=l;let d,u,p,f=0;const g=o-n,m=a-r;if(t.isHorizontal()){if(u=ne(s,r,a),Z(i)){const t=Object.keys(i)[0],s=i[t];p=c[t].getPixelForValue(s)+g-e}else p="center"===i?(h.bottom+h.top)/2+g-e:Hn(t,i,e);d=a-r}else{if(Z(i)){const t=Object.keys(i)[0],s=i[t];u=c[t].getPixelForValue(s)-m+e}else u="center"===i?(h.left+h.right)/2-m+e:Hn(t,i,e);p=ne(s,o,n),f="left"===i?-Et:Et}return{titleX:u,titleY:p,maxWidth:d,rotation:f}}class Qn extends Ln{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=tt(t,Number.POSITIVE_INFINITY),e=tt(e,Number.NEGATIVE_INFINITY),i=tt(i,Number.POSITIVE_INFINITY),s=tt(s,Number.NEGATIVE_INFINITY),{min:tt(t,i),max:tt(e,s),minDefined:J(t),maxDefined:J(e)}}getMinMax(t){let e,{min:i,max:s,minDefined:n,maxDefined:r}=this.getUserBounds();if(n&&r)return{min:i,max:s};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)e=o[a].controller.getMinMax(this,t),n||(i=Math.min(i,e.min)),r||(s=Math.max(s,e.max));return i=r&&i>s?s:i,s=n&&i>s?i:s,{min:tt(i,tt(s,i)),max:tt(s,tt(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){const e=this._labelItems||(this._labelItems=this._computeLabelItems(t));return e}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){st(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:n,ticks:r}=this.options,o=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ti(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?$n(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=In(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){st(this.options.afterUpdate,[this])}beforeSetDimensions(){st(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){st(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),st(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){st(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,n;for(i=0,s=t.length;i<s;i++)n=t[i],n.label=st(e.callback,[n.value,i,t],this)}afterTickToLabelConversion(){st(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){st(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=jn(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,n=e.maxRotation;let r,o,a,l=s;if(!this._isVisible()||!e.display||s>=n||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const h=this._getLabelSizes(),c=h.widest.width,d=h.highest.height,u=Ut(this.chart.width-c,0,this.maxWidth);r=t.offset?this.maxWidth/i:u/(i-1),c+6>r&&(r=u/(i-(t.offset?.5:1)),o=this.maxHeight-Wn(t.grid)-e.padding-Gn(t.title,this.chart.options.font),a=Math.sqrt(c*c+d*d),l=Nt(Math.min(Math.asin(Ut((h.highest.height+6)/r,-1,1)),Math.asin(Ut(o/a,-1,1))-Math.asin(Ut(d/a,-1,1)))),l=Math.max(s,Math.min(n,l))),this.labelRotation=l}afterCalculateLabelRotation(){st(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){st(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:n}}=this,r=this._isVisible(),o=this.isHorizontal();if(r){const r=Gn(s,e.options.font);if(o?(t.width=this.maxWidth,t.height=Wn(n)+r):(t.height=this.maxHeight,t.width=Wn(n)+r),i.display&&this.ticks.length){const{first:e,last:s,widest:n,highest:r}=this._getLabelSizes(),a=2*i.padding,l=Ft(this.labelRotation),h=Math.cos(l),c=Math.sin(l);if(o){const e=i.mirror?0:c*n.width+h*r.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=i.mirror?0:h*n.width+c*r.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,s,c,h)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:n,padding:r},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,d=0;a?l?(c=s*t.width,d=i*e.height):(c=i*t.height,d=s*e.width):"start"===n?d=e.width:"end"===n?c=t.width:"inner"!==n&&(c=t.width/2,d=e.width/2),this.paddingLeft=Math.max((c-o+r)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-h+r)*this.width/(this.width-h),0)}else{let i=e.height/2,s=t.height/2;"start"===n?(i=0,s=t.height):"end"===n&&(i=e.height,s=0),this.paddingTop=i+r,this.paddingBottom=s+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){st(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)Y(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=$n(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:n}=this,r=[],o=[],a=Math.floor(e/jn(e,i));let l,h,c,d,u,p,f,g,m,b,v,y=0,_=0;for(l=0;l<e;l+=a){if(d=t[l].label,u=this._resolveTickFontOptions(l),s.font=p=u.string,f=n[p]=n[p]||{data:{},gc:[]},g=u.lineHeight,m=b=0,Y(d)||Q(d)){if(Q(d))for(h=0,c=d.length;h<c;++h)v=d[h],Y(v)||Q(v)||(m=Le(s,f.data,f.gc,m,v),b+=g)}else m=Le(s,f.data,f.gc,m,d),b=g;r.push(m),o.push(b),y=Math.max(m,y),_=Math.max(b,_)}Vn(n,e);const x=r.indexOf(y),w=o.indexOf(_),A=t=>({width:r[t]||0,height:o[t]||0});return{first:A(0),last:A(e-1),widest:A(x),highest:A(w),widths:r,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Vt(this._alignToPixels?Ie(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=qn(this.getContext(),t,i))}return this.$context||(this.$context=Kn(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ft(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),n=this._getLabelSizes(),r=t.autoSkipPadding||0,o=n?n.widest.width+r:0,a=n?n.highest.height+r:0;return this.isHorizontal()?a*i>o*s?o/i:a/s:a*s<o*i?a/i:o/s}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:n,position:r,border:o}=s,a=n.offset,l=this.isHorizontal(),h=this.ticks,c=h.length+(a?1:0),d=Wn(n),u=[],p=o.setContext(this.getContext()),f=p.display?p.width:0,g=f/2,m=function(t){return Ie(i,t,f)};let b,v,y,_,x,w,A,S,E,C,M,T;if("top"===r)b=m(this.bottom),w=this.bottom-d,S=b-g,C=m(t.top)+g,T=t.bottom;else if("bottom"===r)b=m(this.top),C=t.top,T=m(t.bottom)-g,w=b+g,S=this.top+d;else if("left"===r)b=m(this.right),x=this.right-d,A=b-g,E=m(t.left)+g,M=t.right;else if("right"===r)b=m(this.left),E=t.left,M=m(t.right)-g,x=b+g,A=this.left+d;else if("x"===e){if("center"===r)b=m((t.top+t.bottom)/2+.5);else if(Z(r)){const t=Object.keys(r)[0],e=r[t];b=m(this.chart.scales[t].getPixelForValue(e))}C=t.top,T=t.bottom,w=b+g,S=w+d}else if("y"===e){if("center"===r)b=m((t.left+t.right)/2);else if(Z(r)){const t=Object.keys(r)[0],e=r[t];b=m(this.chart.scales[t].getPixelForValue(e))}x=b-g,A=x-d,E=t.left,M=t.right}const k=et(s.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/k));for(v=0;v<c;v+=P){const t=this.getContext(v),e=n.setContext(t),s=o.setContext(t),r=e.lineWidth,h=e.color,c=s.dash||[],d=s.dashOffset,p=e.tickWidth,f=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=Un(this,v,a),void 0!==y&&(_=Ie(i,y,r),l?x=A=E=M=_:w=S=C=T=_,u.push({tx1:x,ty1:w,tx2:A,ty2:S,x1:E,y1:C,x2:M,y2:T,width:r,color:h,borderDash:c,borderDashOffset:d,tickWidth:p,tickColor:f,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=b,u}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:n}=i,r=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:h,mirror:c}=n,d=Wn(i.grid),u=d+h,p=c?-h:u,f=-Ft(this.labelRotation),g=[];let m,b,v,y,_,x,w,A,S,E,C,M,T="middle";if("top"===s)x=this.bottom-p,w=this._getXAxisLabelAlignment();else if("bottom"===s)x=this.top+p,w=this._getXAxisLabelAlignment();else if("left"===s){const t=this._getYAxisLabelAlignment(d);w=t.textAlign,_=t.x}else if("right"===s){const t=this._getYAxisLabelAlignment(d);w=t.textAlign,_=t.x}else if("x"===e){if("center"===s)x=(t.top+t.bottom)/2+u;else if(Z(s)){const t=Object.keys(s)[0],e=s[t];x=this.chart.scales[t].getPixelForValue(e)+u}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)_=(t.left+t.right)/2-u;else if(Z(s)){const t=Object.keys(s)[0],e=s[t];_=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===a?T="top":"end"===a&&(T="bottom"));const k=this._getLabelSizes();for(m=0,b=o.length;m<b;++m){v=o[m],y=v.label;const t=n.setContext(this.getContext(m));A=this.getPixelForTick(m)+n.labelOffset,S=this._resolveTickFontOptions(m),E=S.lineHeight,C=Q(y)?y.length:1;const e=C/2,i=t.color,a=t.textStrokeColor,h=t.textStrokeWidth;let d,u=w;if(r?(_=A,"inner"===w&&(u=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),M="top"===s?"near"===l||0!==f?-C*E+E/2:"center"===l?-k.highest.height/2-e*E+E:-k.highest.height+E/2:"near"===l||0!==f?E/2:"center"===l?k.highest.height/2-e*E:k.highest.height-C*E,c&&(M*=-1),0===f||t.showLabelBackdrop||(_+=E/2*Math.sin(f))):(x=A,M=(1-C)*E/2),t.showLabelBackdrop){const e=Qe(t.backdropPadding),i=k.heights[m],s=k.widths[m];let n=M-e.top,r=0-e.left;switch(T){case"middle":n-=i/2;break;case"bottom":n-=i;break}switch(w){case"center":r-=s/2;break;case"right":r-=s;break;case"inner":m===b-1?r-=s:m>0&&(r-=s/2);break}d={left:r,top:n,width:s+e.width,height:i+e.height,color:t.backdropColor}}g.push({label:y,font:S,textOffset:M,options:{rotation:f,color:i,strokeColor:a,strokeWidth:h,textAlign:u,textBaseline:T,translation:[_,x],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options,i=-Ft(this.labelRotation);if(i)return"top"===t?"left":"right";let s="center";return"start"===e.align?s="left":"end"===e.align?s="right":"inner"===e.align&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:n}}=this.options,r=this._getLabelSizes(),o=t+n,a=r.widest.width;let l,h;return"left"===e?s?(h=this.right+n,"near"===i?l="left":"center"===i?(l="center",h+=a/2):(l="right",h+=a)):(h=this.right-o,"near"===i?l="right":"center"===i?(l="center",h-=a/2):(l="left",h=this.left)):"right"===e?s?(h=this.left+n,"near"===i?l="right":"center"===i?(l="center",h-=a/2):(l="left",h-=a)):(h=this.left+o,"near"===i?l="left":"center"===i?(l="center",h+=a/2):(l="right",h=this.right)):l="right",{textAlign:l,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:n,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,n,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks,s=i.findIndex((e=>e.value===t));if(s>=0){const t=e.setContext(this.getContext(s));return t.lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let n,r;const o=(t,e,s)=>{s.width&&s.color&&(i.save(),i.lineWidth=s.width,i.strokeStyle=s.color,i.setLineDash(s.borderDash||[]),i.lineDashOffset=s.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(n=0,r=s.length;n<r;++n){const t=s[n];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,n=i.setContext(this.getContext()),r=i.display?n.width:0;if(!r)return;const o=s.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,h,c,d;this.isHorizontal()?(l=Ie(t,this.left,r)-r/2,h=Ie(t,this.right,o)+o/2,c=d=a):(c=Ie(t,this.top,r)-r/2,d=Ie(t,this.bottom,o)+o/2,l=h=a),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(l,c),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){const e=this.options.ticks;if(!e.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Ne(i,s);const n=this.getLabelItems(t);for(const r of n){const t=r.options,e=r.font,s=r.label,n=r.textOffset;$e(i,s,0,n,e,t)}s&&Be(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const n=Ze(i.font),r=Qe(i.padding),o=i.align;let a=n.lineHeight/2;"bottom"===e||"center"===e||Z(e)?(a+=r.bottom,Q(i.text)&&(a+=n.lineHeight*(i.text.length-1))):a+=r.top;const{titleX:l,titleY:h,maxWidth:c,rotation:d}=Yn(this,a,e,o);$e(t,i.text,0,0,n,{color:i.color,maxWidth:c,rotation:d,textAlign:Xn(o,e,s),textBaseline:"middle",translation:[l,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=et(t.grid&&t.grid.z,-1),s=et(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Qn.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let n,r;for(n=0,r=e.length;n<r;++n){const r=e[n];r[i]!==this.id||t&&r.type!==t||s.push(r)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ze(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Zn{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;er(e)&&(i=this.register(e));const s=this.items,n=t.id,r=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+t);return n in s||(s[n]=t,Jn(t,r,i),this.override&&ke.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in ke[s]&&(delete ke[s][i],this.override&&delete Se[i])}}function Jn(t,e,i){const s=ht(Object.create(null),[i?ke.get(i):{},ke.get(e),t.defaults]);ke.set(e,s),t.defaultRoutes&&tr(e,t.defaultRoutes),t.descriptors&&ke.describe(e,t.descriptors)}function tr(t,e){Object.keys(e).forEach((i=>{const s=i.split("."),n=s.pop(),r=[t].concat(s).join("."),o=e[i].split("."),a=o.pop(),l=o.join(".");ke.route(r,n,l,a)}))}function er(t){return"id"in t&&"defaults"in t}class ir{constructor(){this.controllers=new Zn(gs,"datasets",!0),this.elements=new Zn(Ln,"elements"),this.plugins=new Zn(Object,"plugins"),this.scales=new Zn(Qn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const s=i||this._getRegistryForType(e);i||s.isForType(e)||s===this.plugins&&e.id?this._exec(t,s,e):nt(e,(e=>{const s=i||this._getRegistryForType(e);this._exec(t,s,e)}))}))}_exec(t,e,i){const s=mt(t);st(i["before"+s],[],i),e[t](i),st(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(void 0===s)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var sr=new ir;class nr{constructor(){this._init=[]}notify(t,e,i,s){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const n=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(n,t,e,i);return"afterDestroy"===e&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,i,s){s=s||{};for(const n of t){const t=n.plugin,r=t[i],o=[e,s,n.options];if(!1===st(r,o,t)&&s.cancelable)return!1}return!0}invalidate(){Y(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=et(i.options&&i.options.plugins,{}),n=rr(i);return!1!==s||e?ar(t,n,s,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function rr(t){const e={},i=[],s=Object.keys(sr.plugins.items);for(let r=0;r<s.length;r++)i.push(sr.getPlugin(s[r]));const n=t.plugins||[];for(let r=0;r<n.length;r++){const t=n[r];-1===i.indexOf(t)&&(i.push(t),e[t.id]=!0)}return{plugins:i,localIds:e}}function or(t,e){return e||!1!==t?!0===t?{}:t:null}function ar(t,{plugins:e,localIds:i},s,n){const r=[],o=t.getContext();for(const a of e){const e=a.id,l=or(s[e],n);null!==l&&r.push({plugin:a,options:lr(t.config,{plugin:a,local:i[e]},l,o)})}return r}function lr(t,{plugin:e,local:i},s,n){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(s,r);return i&&e.defaults&&o.push(e.defaults),t.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hr(t,e){const i=ke.datasets[t]||{},s=(e.datasets||{})[t]||{};return s.indexAxis||e.indexAxis||i.indexAxis||"x"}function cr(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}function dr(t,e){return t===e?"_index_":"_value_"}function ur(t){if("x"===t||"y"===t||"r"===t)return t}function pr(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function fr(t,...e){if(ur(t))return t;for(const i of e){const e=i.axis||pr(i.position)||t.length>1&&ur(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function gr(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function mr(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(i.length)return gr(t,"x",i[0])||gr(t,"y",i[0])}return{}}function br(t,e){const i=Se[t.type]||{scales:{}},s=e.scales||{},n=hr(t.type,e),r=Object.create(null);return Object.keys(s).forEach((e=>{const o=s[e];if(!Z(o))return console.error(`Invalid scale configuration for scale: ${e}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=fr(e,o,mr(e,t),ke.scales[o.type]),l=dr(a,n),h=i.scales||{};r[e]=ct(Object.create(null),[{axis:a},o,h[a],h[l]])})),t.data.datasets.forEach((i=>{const n=i.type||t.type,o=i.indexAxis||hr(n,e),a=Se[n]||{},l=a.scales||{};Object.keys(l).forEach((t=>{const e=cr(t,o),n=i[e+"AxisID"]||e;r[n]=r[n]||Object.create(null),ct(r[n],[{axis:e},s[n],l[t]])}))})),Object.keys(r).forEach((t=>{const e=r[t];ct(e,[ke.scales[e.type],ke.scale])})),r}function vr(t){const e=t.options||(t.options={});e.plugins=et(e.plugins,{}),e.scales=br(t,e)}function yr(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function _r(t){return t=t||{},t.data=yr(t.data),vr(t),t}const xr=new Map,wr=new Set;function Ar(t,e){let i=xr.get(t);return i||(i=e(),xr.set(t,i),wr.add(i)),i}const Sr=(t,e,i)=>{const s=gt(e,i);void 0!==s&&t.add(s)};class Er{constructor(t){this._config=_r(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=yr(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),vr(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ar(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Ar(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Ar(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id,i=this.type;return Ar(`${i}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return s&&!e||(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:n}=this,r=this._cachedScopes(t,i),o=r.get(e);if(o)return o;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>Sr(a,t,e)))),e.forEach((t=>Sr(a,s,t))),e.forEach((t=>Sr(a,Se[n]||{},t))),e.forEach((t=>Sr(a,ke,t))),e.forEach((t=>Sr(a,Ee,t)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),wr.has(e)&&r.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Se[e]||{},ke.datasets[e]||{},{type:e},ke,Ee]}resolveNamedOptions(t,e,i,s=[""]){const n={$shared:!0},{resolver:r,subPrefixes:o}=Cr(this._resolverCache,t,s);let a=r;if(Tr(r,e)){n.$shared=!1,i=vt(i)?i():i;const e=this.createResolver(t,i,o);a=si(r,i,e)}for(const l of e)n[l]=a[l];return n}createResolver(t,e,i=[""],s){const{resolver:n}=Cr(this._resolverCache,t,i);return Z(e)?si(n,e,void 0,s):n}}function Cr(t,e,i){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=i.join();let r=s.get(n);if(!r){const t=ii(e,i);r={resolver:t,subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},s.set(n,r)}return r}const Mr=t=>Z(t)&&Object.getOwnPropertyNames(t).some((e=>vt(t[e])));function Tr(t,e){const{isScriptable:i,isIndexable:s}=ni(t);for(const n of e){const e=i(n),r=s(n),o=(r||e)&&t[n];if(e&&(vt(o)||Mr(o))||r&&Q(o))return!0}return!1}var kr="4.4.3";const Pr=["top","bottom","left","right","chartArea"];function Lr(t,e){return"top"===t||"bottom"===t||-1===Pr.indexOf(t)&&"x"===e}function Ir(t,e){return function(i,s){return i[t]===s[t]?i[e]-s[e]:i[t]-s[t]}}function Rr(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),st(i&&i.onComplete,[t],e)}function Dr(t){const e=t.chart,i=e.options.animation;st(i&&i.onProgress,[t],e)}function Or(t){return xi()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Fr={},Nr=t=>{const e=Or(t);return Object.values(Fr).filter((t=>t.canvas===e)).pop()};function Br(t,e,i){const s=Object.keys(t);for(const n of s){const s=+n;if(s>=e){const r=t[n];delete t[n],(i>0||s>e)&&(t[s+i]=r)}}}function zr(t,e,i,s){return i&&"mouseout"!==t.type?s?e:t:null}function Hr(t,e,i){return t.options.clip?t[i]:e[i]}function jr(t,e){const{xScale:i,yScale:s}=t;return i&&s?{left:Hr(i,e,"left"),right:Hr(i,e,"right"),top:Hr(s,e,"top"),bottom:Hr(s,e,"bottom")}:e}class $r{static defaults=ke;static instances=Fr;static overrides=Se;static registry=sr;static version=kr;static getChart=Nr;static register(...t){sr.add(...t),Ur()}static unregister(...t){sr.remove(...t),Ur()}constructor(t,e){const i=this.config=new Er(e),s=Or(t),n=Nr(s);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Pn(s)),this.platform.updateConfig(i);const o=this.platform.acquireContext(s,r.aspectRatio),a=o&&o.canvas,l=a&&a.height,h=a&&a.width;this.id=X(),this.ctx=o,this.canvas=a,this.width=h,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nr,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ie((t=>this.update(t)),r.resizeDelay||0),this._dataChanges=[],Fr[this.id]=this,o&&a?(Ui.listen(this,"complete",Rr),Ui.listen(this,"progress",Dr),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:n}=this;return Y(t)?e&&n?n:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return sr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Di(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Re(this.canvas,this.ctx),this}stop(){return Ui.stop(this),this}resize(t,e){Ui.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,e,n),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Di(this,o,!0)&&(this.notifyPlugins("resize",{size:r}),st(i.onResize,[this,r],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){const t=this.options,e=t.scales||{};nt(e,((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let n=[];e&&(n=n.concat(Object.keys(e).map((t=>{const i=e[t],s=fr(t,i),n="r"===s,r="x"===s;return{options:i,dposition:n?"chartArea":r?"bottom":"left",dtype:n?"radialLinear":r?"category":"linear"}})))),nt(n,(e=>{const n=e.options,r=n.id,o=fr(r,n),a=et(n.type,e.dtype);void 0!==n.position&&Lr(n.position,o)===Lr(e.dposition)||(n.position=e.dposition),s[r]=!0;let l=null;if(r in i&&i[r].type===a)l=i[r];else{const t=sr.getScale(a);l=new t({id:r,type:a,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(n,t)})),nt(s,((t,e)=>{t||delete i[e]})),nt(i,(t=>{an.configure(this,t,t.options),an.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Ir("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const s=e[i];let n=this.getDatasetMeta(i);const r=s.type||this.config.type;if(n.type&&n.type!==r&&(this._destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=r,n.indexAxis=s.indexAxis||hr(r,this.options),n.order=s.order||0,n.index=i,n.label=""+s.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const e=sr.getController(r),{datasetElementType:s,dataElementType:o}=ke.datasets[r];Object.assign(e,{dataElementType:sr.getElement(o),datasetElementType:s&&sr.getElement(s)}),n.controller=new e(this,i),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){nt(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let l=0,h=this.data.datasets.length;l<h;l++){const{controller:t}=this.getDatasetMeta(l),e=!s&&-1===n.indexOf(t);t.buildOrUpdateElements(e),r=Math.max(+t.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),s||nt(n,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ir("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){nt(this.scales,(t=>{an.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);yt(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:n}of e){const e="_removeElements"===i?-n:n;Br(t,s,e)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),s=i(0);for(let n=1;n<e;n++)if(!yt(s,i(n)))return;return Array.from(s).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;an.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],nt(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,vt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ui.has(this)?this.attached&&!Ui.running(this)&&Ui.start(this):(this.draw(),Rr({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,n;for(s=0,n=e.length;s<n;++s){const n=e[s];t&&!n.visible||i.push(n)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,n=jr(t,this.chartArea),r={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(s&&Ne(e,{left:!1===i.left?0:n.left-i.left,right:!1===i.right?this.width:n.right+i.right,top:!1===i.top?0:n.top-i.top,bottom:!1===i.bottom?this.height:n.bottom+i.bottom}),t.controller.draw(),s&&Be(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return Fe(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const n=Us.modes[e];return"function"===typeof n?n(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter((t=>t&&t._dataset===e)).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=ei(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"===typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",n=this.getDatasetMeta(t),r=n.controller._resolveAnimations(void 0,s);bt(e)?(n.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),r.update(n,{visible:i}),this.update((e=>e.datasetIndex===t?s:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ui.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Re(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Fr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};nt(this.options.events,(t=>i(t,s)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(i,s)=>{t[i]&&(e.removeEventListener(this,i,s),delete t[i])},n=(t,e)=>{this.canvas&&this.resize(t,e)};let r;const o=()=>{s("attach",o),this.attached=!0,this.resize(),i("resize",n),i("detach",r)};r=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),i("attach",o)},e.isAttached(this.canvas)?o():r()}unbindEvents(){nt(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},nt(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let n,r,o,a;for("dataset"===e&&(n=this.getDatasetMeta(t[0].datasetIndex),n.controller["_"+s+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){r=t[o];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),s=!rt(i,e);s&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,i){const s=this.options.hover,n=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),r=n(e,t),o=i?t:n(t,e);r.length&&this.updateHoverStyle(r,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const n=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(n||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:n}=this,r=e,o=this._getActiveElements(t,s,i,r),a=_t(t),l=zr(t,this._lastEvent,i,a);i&&(this._lastEvent=null,st(n.onHover,[t,o,this],this),a&&st(n.onClick,[t,o,this],this));const h=!rt(o,s);return(h||e)&&(this._active=o,this._updateHoverStyles(o,s,e)),this._lastEvent=l,h}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,s)}}function Ur(){return nt($r.instances,(t=>t._plugins.invalidate()))}function Vr(t,e){const{x:i,y:s,base:n,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,h,c,d;return t.horizontal?(d=o/2,a=Math.min(i,n),l=Math.max(i,n),h=s-d,c=s+d):(d=r/2,a=i-d,l=i+d,h=Math.min(s,n),c=Math.max(s,n)),{left:a,top:h,right:l,bottom:c}}function Wr(t,e,i,s){return t?0:Ut(e,i,s)}function Gr(t,e,i){const s=t.options.borderWidth,n=t.borderSkipped,r=Xe(s);return{t:Wr(n.top,r.top,0,i),r:Wr(n.right,r.right,0,e),b:Wr(n.bottom,r.bottom,0,i),l:Wr(n.left,r.left,0,e)}}function Kr(t,e,i){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,r=Ye(n),o=Math.min(e,i),a=t.borderSkipped,l=s||Z(n);return{topLeft:Wr(!l||a.top||a.left,r.topLeft,0,o),topRight:Wr(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Wr(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Wr(!l||a.bottom||a.right,r.bottomRight,0,o)}}function qr(t){const e=Vr(t),i=e.right-e.left,s=e.bottom-e.top,n=Gr(t,i/2,s/2),r=Kr(t,i/2,s/2);return{outer:{x:e.left,y:e.top,w:i,h:s,radius:r},inner:{x:e.left+n.l,y:e.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,r.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(n.b,n.r))}}}}function Xr(t,e,i,s){const n=null===e,r=null===i,o=n&&r,a=t&&!o&&Vr(t,s);return a&&(n||Wt(e,a.left,a.right))&&(r||Wt(i,a.top,a.bottom))}function Yr(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Qr(t,e){t.rect(e.x,e.y,e.w,e.h)}function Zr(t,e,i={}){const s=t.x!==i.x?-e:0,n=t.y!==i.y?-e:0,r=(t.x+t.w!==i.x+i.w?e:0)-s,o=(t.y+t.h!==i.y+i.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+r,h:t.h+o,radius:t.radius}}class Jr extends Ln{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:n,outer:r}=qr(this),o=Yr(r.radius)?Ue:Qr;t.save(),r.w===n.w&&r.h===n.h||(t.beginPath(),o(t,Zr(r,e,n)),t.clip(),o(t,Zr(n,-e,r)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),o(t,Zr(n,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return Xr(this,t,e,i)}inXRange(t,e){return Xr(this,t,null,e)}inYRange(t,e){return Xr(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],t);return{x:n?(e+s)/2:e,y:n?i:(i+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}const to=(t,e)=>{let{boxHeight:i=e,boxWidth:s=e}=t;return t.usePointStyle&&(i=Math.min(i,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(e,i)}},eo=(t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class io extends Ln{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=st(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,s=Ze(i.font),n=s.size,r=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=to(i,n);let l,h;e.font=s.string,this.isHorizontal()?(l=this.maxWidth,h=this._fitRows(r,n,o,a)+10):(h=this.maxHeight,l=this._fitCols(r,s,o,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:n,maxWidth:r,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],h=s+o;let c=t;n.textAlign="left",n.textBaseline="middle";let d=-1,u=-h;return this.legendItems.forEach(((t,p)=>{const f=i+e/2+n.measureText(t.text).width;(0===p||l[l.length-1]+f+2*o>r)&&(c+=h,l[l.length-(p>0?0:1)]=0,u+=h,d++),a[p]={left:0,top:u,row:d,width:f,height:s},l[l.length-1]+=f+o})),c}_fitCols(t,e,i,s){const{ctx:n,maxHeight:r,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],h=r-t;let c=o,d=0,u=0,p=0,f=0;return this.legendItems.forEach(((t,r)=>{const{itemWidth:g,itemHeight:m}=so(i,e,n,t,s);r>0&&u+m+2*o>h&&(c+=d+o,l.push({width:d,height:u}),p+=d+o,f++,d=u=0),a[r]={left:p,top:u,col:f,width:g,height:m},d=Math.max(d,g),u+=m+o})),c+=d,l.push({width:d,height:u}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:n}}=this,r=zi(n,this.left,this.width);if(this.isHorizontal()){let n=0,o=ne(i,this.left+s,this.right-this.lineWidths[n]);for(const a of e)n!==a.row&&(n=a.row,o=ne(i,this.left+s,this.right-this.lineWidths[n])),a.top+=this.top+t+s,a.left=r.leftForLtr(r.x(o),a.width),o+=a.width+s}else{let n=0,o=ne(i,this.top+t+s,this.bottom-this.columnSizes[n].height);for(const a of e)a.col!==n&&(n=a.col,o=ne(i,this.top+t+s,this.bottom-this.columnSizes[n].height)),a.top=o,a.left+=this.left+s,a.left=r.leftForLtr(r.x(a.left),a.width),o+=a.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Ne(t,this),this._draw(),Be(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:n,labels:r}=t,o=ke.color,a=zi(t.rtl,this.left,this.width),l=Ze(r.font),{padding:h}=r,c=l.size,d=c/2;let u;this.drawTitle(),s.textAlign=a.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:g}=to(r,c),m=function(t,e,i){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;s.save();const n=et(i.lineWidth,1);if(s.fillStyle=et(i.fillStyle,o),s.lineCap=et(i.lineCap,"butt"),s.lineDashOffset=et(i.lineDashOffset,0),s.lineJoin=et(i.lineJoin,"miter"),s.lineWidth=n,s.strokeStyle=et(i.strokeStyle,o),s.setLineDash(et(i.lineDash,[])),r.usePointStyle){const o={radius:f*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},l=a.xPlus(t,p/2),h=e+d;Oe(s,o,l,h,r.pointStyleWidth&&p)}else{const r=e+Math.max((c-f)/2,0),o=a.leftForLtr(t,p),l=Ye(i.borderRadius);s.beginPath(),Object.values(l).some((t=>0!==t))?Ue(s,{x:o,y:r,w:p,h:f,radius:l}):s.rect(o,r,p,f),s.fill(),0!==n&&s.stroke()}s.restore()},b=function(t,e,i){$e(s,i.text,t,e+g/2,l,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})},v=this.isHorizontal(),y=this._computeTitleHeight();u=v?{x:ne(n,this.left+h,this.right-i[0]),y:this.top+h+y,line:0}:{x:this.left+h,y:ne(n,this.top+y+h,this.bottom-e[0].height),line:0},Hi(this.ctx,t.textDirection);const _=g+h;this.legendItems.forEach(((o,c)=>{s.strokeStyle=o.fontColor,s.fillStyle=o.fontColor;const f=s.measureText(o.text).width,g=a.textAlign(o.textAlign||(o.textAlign=r.textAlign)),x=p+d+f;let w=u.x,A=u.y;a.setWidth(this.width),v?c>0&&w+x+h>this.right&&(A=u.y+=_,u.line++,w=u.x=ne(n,this.left+h,this.right-i[u.line])):c>0&&A+_>this.bottom&&(w=u.x=w+e[u.line].width+h,u.line++,A=u.y=ne(n,this.top+y+h,this.bottom-e[u.line].height));const S=a.x(w);if(m(S,A,o),w=re(g,w+p+d,v?w+x:this.right,t.rtl),b(a.x(w),A,o),v)u.x+=x+h;else if("string"!==typeof o.text){const t=l.lineHeight;u.y+=oo(o,t)+h}else u.y+=_})),ji(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ze(e.font),s=Qe(e.padding);if(!e.display)return;const n=zi(t.rtl,this.left,this.width),r=this.ctx,o=e.position,a=i.size/2,l=s.top+a;let h,c=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+l,c=ne(t.align,c,this.right-d);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);h=l+ne(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const u=ne(o,c,c+d);r.textAlign=n.textAlign(se(o)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=i.string,$e(r,e.text,u,h,i)}_computeTitleHeight(){const t=this.options.title,e=Ze(t.font),i=Qe(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,n;if(Wt(t,this.left,this.right)&&Wt(e,this.top,this.bottom))for(n=this.legendHitBoxes,i=0;i<n.length;++i)if(s=n[i],Wt(t,s.left,s.left+s.width)&&Wt(e,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!ao(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,n=eo(s,i);s&&!n&&st(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!n&&st(e.onHover,[t,i,this],this)}else i&&st(e.onClick,[t,i,this],this)}}function so(t,e,i,s,n){const r=no(s,t,e,i),o=ro(n,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function no(t,e,i,s){let n=t.text;return n&&"string"!==typeof n&&(n=n.reduce(((t,e)=>t.length>e.length?t:e))),e+i.size/2+s.measureText(n).width}function ro(t,e,i){let s=t;return"string"!==typeof e.text&&(s=oo(e,i)),s}function oo(t,e){const i=t.text?t.text.length:0;return e*i}function ao(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}var lo={id:"legend",_element:io,start(t,e,i){const s=t.legend=new io({ctx:t.ctx,options:i,chart:t});an.configure(t,s,i),an.addBox(t,s)},stop(t){an.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const s=t.legend;an.configure(t,s,i),s.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const s=e.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const l=t.controller.getStyle(i?0:void 0),h=Qe(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:n||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ho extends Ln{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const s=Q(i.text)?i.text.length:1;this._padding=Qe(i.padding);const n=s*Ze(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:s,right:n,options:r}=this,o=r.align;let a,l,h,c=0;return this.isHorizontal()?(l=ne(o,i,n),h=e+t,a=n-i):("left"===r.position?(l=i+t,h=ne(o,s,e),c=-.5*xt):(l=n-t,h=ne(o,e,s),c=.5*xt),a=s-e),{titleX:l,titleY:h,maxWidth:a,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Ze(e.font),s=i.lineHeight,n=s/2+this._padding.top,{titleX:r,titleY:o,maxWidth:a,rotation:l}=this._drawArgs(n);$e(t,e.text,0,0,i,{color:e.color,maxWidth:a,rotation:l,textAlign:se(e.align),textBaseline:"middle",translation:[r,o]})}}function co(t,e){const i=new ho({ctx:t.ctx,options:e,chart:t});an.configure(t,i,e),an.addBox(t,i),t.titleBlock=i}var uo={id:"title",_element:ho,start(t,e,i){co(t,i)},stop(t){const e=t.titleBlock;an.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const s=t.titleBlock;an.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const po={average(t){if(!t.length)return!1;let e,i,s=new Set,n=0,r=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();s.add(t.x),n+=t.y,++r}}const o=[...s].reduce(((t,e)=>t+e))/s.size;return{x:o,y:n/r}},nearest(t,e){if(!t.length)return!1;let i,s,n,r=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(i=0,s=t.length;i<s;++i){const s=t[i].element;if(s&&s.hasValue()){const t=s.getCenterPoint(),i=Ht(e,t);i<a&&(a=i,n=s)}}if(n){const t=n.tooltipPosition();r=t.x,o=t.y}return{x:r,y:o}}};function fo(t,e){return e&&(Q(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function go(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function mo(t,e){const{element:i,datasetIndex:s,index:n}=e,r=t.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(n);return{chart:t,label:o,parsed:r.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:a,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function bo(t,e){const i=t.chart.ctx,{body:s,footer:n,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=Ze(e.bodyFont),h=Ze(e.titleFont),c=Ze(e.footerFont),d=r.length,u=n.length,p=s.length,f=Qe(e.padding);let g=f.height,m=0,b=s.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*h.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const t=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=p*t+(b-p)*l.lineHeight+(b-1)*e.bodySpacing}u&&(g+=e.footerMarginTop+u*c.lineHeight+(u-1)*e.footerSpacing);let v=0;const y=function(t){m=Math.max(m,i.measureText(t).width+v)};return i.save(),i.font=h.string,nt(t.title,y),i.font=l.string,nt(t.beforeBody.concat(t.afterBody),y),v=e.displayColors?o+2+e.boxPadding:0,nt(s,(t=>{nt(t.before,y),nt(t.lines,y),nt(t.after,y)})),v=0,i.font=c.string,nt(t.footer,y),i.restore(),m+=f.width,{width:m,height:g}}function vo(t,e){const{y:i,height:s}=e;return i<s/2?"top":i>t.height-s/2?"bottom":"center"}function yo(t,e,i,s){const{x:n,width:r}=s,o=i.caretSize+i.caretPadding;return"left"===t&&n+r+o>e.width||("right"===t&&n-r-o<0||void 0)}function _o(t,e,i,s){const{x:n,width:r}=i,{width:o,chartArea:{left:a,right:l}}=t;let h="center";return"center"===s?h=n<=(a+l)/2?"left":"right":n<=r/2?h="left":n>=o-r/2&&(h="right"),yo(h,t,e,i)&&(h="center"),h}function xo(t,e,i){const s=i.yAlign||e.yAlign||vo(t,i);return{xAlign:i.xAlign||e.xAlign||_o(t,e,i,s),yAlign:s}}function wo(t,e){let{x:i,width:s}=t;return"right"===e?i-=s:"center"===e&&(i-=s/2),i}function Ao(t,e,i){let{y:s,height:n}=t;return"top"===e?s+=i:s-="bottom"===e?n+i:n/2,s}function So(t,e,i,s){const{caretSize:n,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=i,h=n+r,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:p}=Ye(o);let f=wo(e,a);const g=Ao(e,l,h);return"center"===l?"left"===a?f+=h:"right"===a&&(f-=h):"left"===a?f-=Math.max(c,u)+n:"right"===a&&(f+=Math.max(d,p)+n),{x:Ut(f,0,s.width-e.width),y:Ut(g,0,s.height-e.height)}}function Eo(t,e,i){const s=Qe(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-s.right:t.x+s.left}function Co(t){return fo([],go(t))}function Mo(t,e,i){return ei(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function To(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const ko={beforeTitle:q,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return i[e.dataIndex]}return""},afterTitle:q,beforeBody:q,beforeLabel:q,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return Y(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex),i=e.controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex),i=e.controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:q,afterBody:q,beforeFooter:q,footer:q,afterFooter:q};function Po(t,e,i,s){const n=t[e].call(i,s);return"undefined"===typeof n?ko[e].call(i,s):n}class Lo extends Ln{static positioners=po;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,n=new Ki(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=Mo(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Po(i,"beforeTitle",this,t),n=Po(i,"title",this,t),r=Po(i,"afterTitle",this,t);let o=[];return o=fo(o,go(s)),o=fo(o,go(n)),o=fo(o,go(r)),o}getBeforeBody(t,e){return Co(Po(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return nt(t,(t=>{const e={before:[],lines:[],after:[]},n=To(i,t);fo(e.before,go(Po(n,"beforeLabel",this,t))),fo(e.lines,Po(n,"label",this,t)),fo(e.after,go(Po(n,"afterLabel",this,t))),s.push(e)})),s}getAfterBody(t,e){return Co(Po(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Po(i,"beforeFooter",this,t),n=Po(i,"footer",this,t),r=Po(i,"afterFooter",this,t);let o=[];return o=fo(o,go(s)),o=fo(o,go(n)),o=fo(o,go(r)),o}_createItems(t){const e=this._active,i=this.chart.data,s=[],n=[],r=[];let o,a,l=[];for(o=0,a=e.length;o<a;++o)l.push(mo(this.chart,e[o]));return t.filter&&(l=l.filter(((e,s,n)=>t.filter(e,s,n,i)))),t.itemSort&&(l=l.sort(((e,s)=>t.itemSort(e,s,i)))),nt(l,(e=>{const i=To(t.callbacks,e);s.push(Po(i,"labelColor",this,e)),n.push(Po(i,"labelPointStyle",this,e)),r.push(Po(i,"labelTextColor",this,e))})),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=r,this.dataPoints=l,l}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let n,r=[];if(s.length){const t=po[i.position].call(this,s,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const e=this._size=bo(this,i),o=Object.assign({},t,e),a=xo(this.chart,i,o),l=So(i,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,n={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=r,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const n=this.getCaretPosition(t,i,s);e.lineTo(n.x1,n.y1),e.lineTo(n.x2,n.y2),e.lineTo(n.x3,n.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:n}=this,{caretSize:r,cornerRadius:o}=i,{topLeft:a,topRight:l,bottomLeft:h,bottomRight:c}=Ye(o),{x:d,y:u}=t,{width:p,height:f}=e;let g,m,b,v,y,_;return"center"===n?(y=u+f/2,"left"===s?(g=d,m=g-r,v=y+r,_=y-r):(g=d+p,m=g+r,v=y-r,_=y+r),b=g):(m="left"===s?d+Math.max(a,h)+r:"right"===s?d+p-Math.max(l,c)-r:this.caretX,"top"===n?(v=u,y=v-r,g=m-r,b=m+r):(v=u+f,y=v+r,g=m+r,b=m-r),_=v),{x1:g,x2:m,x3:b,y1:v,y2:y,y3:_}}drawTitle(t,e,i){const s=this.title,n=s.length;let r,o,a;if(n){const l=zi(i.rtl,this.x,this.width);for(t.x=Eo(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",r=Ze(i.titleFont),o=i.titleSpacing,e.fillStyle=i.titleColor,e.font=r.string,a=0;a<n;++a)e.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+o,a+1===n&&(t.y+=i.titleMarginBottom-o)}}_drawColorBox(t,e,i,s,n){const r=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:a,boxWidth:l}=n,h=Ze(n.bodyFont),c=Eo(this,"left",n),d=s.x(c),u=a<h.lineHeight?(h.lineHeight-a)/2:0,p=e.y+u;if(n.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},i=s.leftForLtr(d,l)+l/2,h=p+a/2;t.strokeStyle=n.multiKeyBackground,t.fillStyle=n.multiKeyBackground,De(t,e,i,h),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,De(t,e,i,h)}else{t.lineWidth=Z(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const e=s.leftForLtr(d,l),i=s.leftForLtr(s.xPlus(d,1),l-2),o=Ye(r.borderRadius);Object.values(o).some((t=>0!==t))?(t.beginPath(),t.fillStyle=n.multiKeyBackground,Ue(t,{x:e,y:p,w:l,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Ue(t,{x:i,y:p+1,w:l-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=n.multiKeyBackground,t.fillRect(e,p,l,a),t.strokeRect(e,p,l,a),t.fillStyle=r.backgroundColor,t.fillRect(i,p+1,l-2,a-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:n,bodyAlign:r,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:h}=i,c=Ze(i.bodyFont);let d=c.lineHeight,u=0;const p=zi(i.rtl,this.x,this.width),f=function(i){e.fillText(i,p.x(t.x+u),t.y+d/2),t.y+=d+n},g=p.textAlign(r);let m,b,v,y,_,x,w;for(e.textAlign=r,e.textBaseline="middle",e.font=c.string,t.x=Eo(this,g,i),e.fillStyle=i.bodyColor,nt(this.beforeBody,f),u=o&&"right"!==g?"center"===r?l/2+h:l+2+h:0,y=0,x=s.length;y<x;++y){for(m=s[y],b=this.labelTextColors[y],e.fillStyle=b,nt(m.before,f),v=m.lines,o&&v.length&&(this._drawColorBox(e,t,y,p,i),d=Math.max(c.lineHeight,a)),_=0,w=v.length;_<w;++_)f(v[_]),d=c.lineHeight;nt(m.after,f)}u=0,d=c.lineHeight,nt(this.afterBody,f),t.y-=n}drawFooter(t,e,i){const s=this.footer,n=s.length;let r,o;if(n){const a=zi(i.rtl,this.x,this.width);for(t.x=Eo(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=a.textAlign(i.footerAlign),e.textBaseline="middle",r=Ze(i.footerFont),e.fillStyle=i.footerColor,e.font=r.string,o=0;o<n;++o)e.fillText(s[o],a.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:n,yAlign:r}=this,{x:o,y:a}=t,{width:l,height:h}=i,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:p}=Ye(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(o+c,a),"top"===r&&this.drawCaret(t,e,i,s),e.lineTo(o+l-d,a),e.quadraticCurveTo(o+l,a,o+l,a+d),"center"===r&&"right"===n&&this.drawCaret(t,e,i,s),e.lineTo(o+l,a+h-p),e.quadraticCurveTo(o+l,a+h,o+l-p,a+h),"bottom"===r&&this.drawCaret(t,e,i,s),e.lineTo(o+u,a+h),e.quadraticCurveTo(o,a+h,o,a+h-u),"center"===r&&"left"===n&&this.drawCaret(t,e,i,s),e.lineTo(o,a+c),e.quadraticCurveTo(o,a,o+c,a),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,n=i&&i.y;if(s||n){const i=po[t.position].call(this,this._active,this._eventPosition);if(!i)return;const r=this._size=bo(this,t),o=Object.assign({},i,this._size),a=xo(e,t,o),l=So(t,o,a,e);s._to===l.x&&n._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=r.width,this.height=r.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=Qe(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=i,this.drawBackground(n,t,s,e),Hi(t,e.textDirection),n.y+=r.top,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),ji(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),n=!rt(i,s),r=this._positionChanged(s,e);(n||r)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],r=this._getActiveElements(t,n,e,i),o=this._positionChanged(r,t),a=e||!rt(r,n)||o;return a&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,i,s){const n=this.options;if("mouseout"===t.type)return[];if(!s)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const r=this.chart.getElementsAtEventForMode(t,n.mode,n,i);return n.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:i,caretY:s,options:n}=this,r=po[n.position].call(this,t,e);return!1!==r&&(i!==r.x||s!==r.y)}}var Io={id:"tooltip",_element:Lo,positioners:po,afterInit(t,e,i){i&&(t.tooltip=new Lo({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ko},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ro=(t,e,i,s)=>("string"===typeof e?(i=t.push(e)-1,s.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function Do(t,e,i,s){const n=t.indexOf(e);if(-1===n)return Ro(t,e,i,s);const r=t.lastIndexOf(e);return n!==r?i:n}const Oo=(t,e)=>null===t?null:Ut(Math.round(t),0,e);function Fo(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class No extends Qn{static id="category";static defaults={ticks:{callback:Fo}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:s}of e)t[i]===s&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Y(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:Do(i,t,et(e,t),this._addedLabels),Oo(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let n=this.getLabels();n=0===t&&e===n.length-1?n:n.slice(t,e+1),this._valueRange=Math.max(n.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=t;r<=e;r++)s.push({value:r});return s}getLabelForValue(t){return Fo.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Bo(t,e){const i=[],s=1e-14,{bounds:n,step:r,min:o,max:a,precision:l,count:h,maxTicks:c,maxDigits:d,includeBounds:u}=t,p=r||1,f=c-1,{min:g,max:m}=e,b=!Y(o),v=!Y(a),y=!Y(h),_=(m-g)/(d+1);let x,w,A,S,E=Lt((m-g)/f/p)*p;if(E<s&&!b&&!v)return[{value:g},{value:m}];S=Math.ceil(m/E)-Math.floor(g/E),S>f&&(E=Lt(S*E/f/p)*p),Y(l)||(x=Math.pow(10,l),E=Math.ceil(E*x)/x),"ticks"===n?(w=Math.floor(g/E)*E,A=Math.ceil(m/E)*E):(w=g,A=m),b&&v&&r&&Dt((a-o)/r,E/1e3)?(S=Math.round(Math.min((a-o)/E,c)),E=(a-o)/S,w=o,A=a):y?(w=b?o:w,A=v?a:A,S=h-1,E=(A-w)/S):(S=(A-w)/E,S=Pt(S,Math.round(S),E/1e3)?Math.round(S):Math.ceil(S));const C=Math.max(Bt(E),Bt(w));x=Math.pow(10,Y(l)?C:l),w=Math.round(w*x)/x,A=Math.round(A*x)/x;let M=0;for(b&&(u&&w!==o?(i.push({value:o}),w<o&&M++,Pt(Math.round((w+M*E)*x)/x,o,zo(o,_,t))&&M++):w<o&&M++);M<S;++M){const t=Math.round((w+M*E)*x)/x;if(v&&t>a)break;i.push({value:t})}return v&&u&&A!==a?i.length&&Pt(i[i.length-1].value,a,zo(a,_,t))?i[i.length-1].value=a:i.push({value:a}):v&&A!==a||i.push({value:A}),i}function zo(t,e,{horizontal:i,minRotation:s}){const n=Ft(s),r=(i?Math.sin(n):Math.cos(n))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Ho extends Qn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Y(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this;const r=t=>s=e?s:t,o=t=>n=i?n:t;if(t){const t=kt(s),e=kt(n);t<0&&e<0?o(0):t>0&&e>0&&r(0)}if(s===n){let e=0===n?1:Math.abs(.05*n);o(n+e),t||r(s-e)}this.min=s,this.max=n}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:s}=t;return s?(e=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},n=this._range||this,r=Bo(s,n);return"ticks"===t.bounds&&Ot(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return ye(t,this.chart.options.locale,this.options.ticks.format)}}class jo extends Ho{static id="linear";static defaults={ticks:{callback:we.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=J(t)?t:0,this.max=J(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ft(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}we.formatters.logarithmic;we.formatters.numeric;const $o={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Uo=Object.keys($o);function Vo(t,e){return t-e}function Wo(t,e){if(Y(e))return null;const i=t._adapter,{parser:s,round:n,isoWeekday:r}=t._parseOpts;let o=e;return"function"===typeof s&&(o=s(o)),J(o)||(o="string"===typeof s?i.parse(o,s):i.parse(o)),null===o?null:(n&&(o="week"!==n||!Rt(r)&&!0!==r?i.startOf(o,n):i.startOf(o,"isoWeek",r)),+o)}function Go(t,e,i,s){const n=Uo.length;for(let r=Uo.indexOf(t);r<n-1;++r){const t=$o[Uo[r]],n=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(n*t.size))<=s)return Uo[r]}return Uo[n-1]}function Ko(t,e,i,s,n){for(let r=Uo.length-1;r>=Uo.indexOf(i);r--){const i=Uo[r];if($o[i].common&&t._adapter.diff(n,s,i)>=e-1)return i}return Uo[i?Uo.indexOf(i):0]}function qo(t){for(let e=Uo.indexOf(t)+1,i=Uo.length;e<i;++e)if($o[Uo[e]].common)return Uo[e]}function Xo(t,e,i){if(i){if(i.length){const{lo:s,hi:n}=Gt(i,e),r=i[s]>=e?i[s]:i[n];t[r]=!0}}else t[e]=!0}function Yo(t,e,i,s){const n=t._adapter,r=+n.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+n.add(a,1,s))l=i[a],l>=0&&(e[l].major=!0);return e}function Qo(t,e,i){const s=[],n={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],n[a]=o,s.push({value:a,major:!1});return 0!==r&&i?Yo(t,s,n,i):s}class Zo extends Qn{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Ds._date(t.adapters.date);s.init(e),ct(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Wo(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:n,minDefined:r,maxDefined:o}=this.getUserBounds();function a(t){r||isNaN(t.min)||(s=Math.min(s,t.min)),o||isNaN(t.max)||(n=Math.max(n,t.max))}r&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),s=J(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),n=J(n)&&!isNaN(n)?n:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,r=this.max,o=Xt(s,n,r);return this._unit=e.unit||(i.autoSkip?Go(e.minUnit,this.min,this.max,this._getLabelCapacity(n)):Ko(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?qo(this._unit):void 0,this.initOffsets(s),t.reverse&&o.reverse(),Qo(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,i,s=0,n=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),s=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),n=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;s=Ut(s,0,r),n=Ut(n,0,r),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,n=s.time,r=n.unit||Go(n.minUnit,e,i,this._getLabelCapacity(e)),o=et(s.ticks.stepSize,1),a="week"===r&&n.isoWeekday,l=Rt(a)||!0===a,h={};let c,d,u=e;if(l&&(u=+t.startOf(u,"isoWeek",a)),u=+t.startOf(u,l?"day":r),t.diff(i,e,r)>1e5*o)throw new Error(e+" and "+i+" are too far apart with stepSize of "+o+" "+r);const p="data"===s.ticks.source&&this.getDataTimestamps();for(c=u,d=0;c<i;c=+t.add(c,o,r),d++)Xo(h,c,p);return c!==i&&"ticks"!==s.bounds&&1!==d||Xo(h,c,p),Object.keys(h).sort(Vo).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const i=this.options,s=i.time.displayFormats,n=this._unit,r=e||s[n];return this._adapter.format(t,r)}_tickFormatFunction(t,e,i,s){const n=this.options,r=n.ticks.callback;if(r)return st(r,[t,e,i],this);const o=n.time.displayFormats,a=this._unit,l=this._majorUnit,h=a&&o[a],c=l&&o[l],d=i[e],u=l&&c&&d&&d.major;return this._adapter.format(t,s||(u?c:h))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Ft(this.isHorizontal()?e.maxRotation:e.minRotation),n=Math.cos(s),r=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:i*n+o*r,h:i*r+o*n}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,n=this._tickFormatFunction(t,0,Qo(this,[t],this._majorUnit),s),r=this._getLabelSize(n),o=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,e=s.length;t<e;++t)i=i.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Wo(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Jt(t.sort(Vo))}}Zo.defaults},9455:function(t,e,i){i.d(e,{YE:function(){return rn}});
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */var s={};(()=>{s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}})(),(()=>{s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})();var n=globalThis.pdfjsLib={};s.d(n,{AbortException:()=>j,AnnotationEditorLayer:()=>en,AnnotationEditorParamsType:()=>f,AnnotationEditorType:()=>p,AnnotationEditorUIManager:()=>Vt,AnnotationLayer:()=>Us,AnnotationMode:()=>d,CMapCompressionType:()=>x,ColorPicker:()=>Qs,DOMSVGFactory:()=>mt,DrawLayer:()=>sn,FeatureTest:()=>q,GlobalWorkerOptions:()=>Ve,ImageKind:()=>b,InvalidPDFException:()=>N,MissingPDFException:()=>B,OPS:()=>w,Outliner:()=>Gs,PDFDataRangeTransport:()=>Xi,PDFDateString:()=>Tt,PDFWorker:()=>ts,PasswordResponses:()=>A,PermissionFlag:()=>g,PixelsPerInch:()=>ct,RenderingCancelledException:()=>vt,TextLayer:()=>Ri,UnexpectedResponseException:()=>z,Util:()=>Y,VerbosityLevel:()=>_,XfaLayer:()=>ds,build:()=>as,createValidAbsoluteUrl:()=>I,fetchData:()=>pt,getDocument:()=>Vi,getFilenameFromUrl:()=>xt,getPdfFilenameFromUrl:()=>wt,getXfaPageViewport:()=>kt,isDataScheme:()=>yt,isPdfFile:()=>_t,noContextMenu:()=>Et,normalizeUnicode:()=>tt,renderTextLayer:()=>Di,setLayerDimensions:()=>Dt,shadow:()=>R,updateTextLayer:()=>Oi,version:()=>os});const r="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),o=[1,0,0,1,0,0],a=[.001,0,0,.001,0,0],l=1e7,h=1.35,c={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},d={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},u="pdfjs_internal_editor_",p={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},f={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},m={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},v={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},y={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},_={ERRORS:0,WARNINGS:1,INFOS:5},x={NONE:0,BINARY:1},w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},A={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let S=_.WARNINGS;function E(t){Number.isInteger(t)&&(S=t)}function C(){return S}function M(t){S>=_.INFOS&&console.log(`Info: ${t}`)}function T(t){S>=_.WARNINGS&&console.log(`Warning: ${t}`)}function k(t){throw new Error(t)}function P(t,e){t||k(e)}function L(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function I(t,e=null,i=null){if(!t)return null;try{if(i&&"string"===typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e?.length>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=Q(t)}catch{}}const s=e?new URL(t,e):new URL(t);if(L(s))return s}catch{}return null}function R(t,e,i,s=!1){return Object.defineProperty(t,e,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const D=function(){function t(e,i){this.constructor===t&&k("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class O extends D{constructor(t,e){super(t,"PasswordException"),this.code=e}}class F extends D{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class N extends D{constructor(t){super(t,"InvalidPDFException")}}class B extends D{constructor(t){super(t,"MissingPDFException")}}class z extends D{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class H extends D{constructor(t){super(t,"FormatError")}}class j extends D{constructor(t){super(t,"AbortException")}}function $(t){"object"===typeof t&&void 0!==t?.length||k("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const s=[];for(let n=0;n<e;n+=i){const r=Math.min(n+i,e),o=t.subarray(n,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function U(t){"string"!==typeof t&&k("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let s=0;s<e;++s)i[s]=255&t.charCodeAt(s);return i}function V(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}function W(t){const e=Object.create(null);for(const[i,s]of t)e[i]=s;return e}function G(){const t=new Uint8Array(4);t[0]=1;const e=new Uint32Array(t.buffer,0,1);return 1===e[0]}function K(){try{return new Function(""),!0}catch{return!1}}class q{static get isLittleEndian(){return R(this,"isLittleEndian",G())}static get isEvalSupported(){return R(this,"isEvalSupported",K())}static get isOffscreenCanvasSupported(){return R(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){return"undefined"!==typeof navigator&&"string"===typeof navigator?.platform?R(this,"platform",{isMac:navigator.platform.includes("Mac")}):R(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return R(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const X=Array.from(Array(256).keys(),(t=>t.toString(16).padStart(2,"0")));class Y{static makeHexColor(t,e,i){return`#${X[t]}${X[e]}${X[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[i,s]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,n=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[s,n]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),n=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],n[0],r[0]),Math.min(i[1],s[1],n[1],r[1]),Math.max(i[0],s[0],n[0],r[0]),Math.max(i[1],s[1],n[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],n=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],o=(i+r)/2,a=Math.sqrt((i+r)**2-4*(i*r-n*s))/2,l=o+a||1,h=o-a||1;return[Math.sqrt(l),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>r?null:[i,n,s,r]}static#t(t,e,i,s,n,r,o,a,l,h){if(l<=0||l>=1)return;const c=1-l,d=l*l,u=d*l,p=c*(c*(c*t+3*l*e)+3*d*i)+u*s,f=c*(c*(c*n+3*l*r)+3*d*o)+u*a;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)}static#e(t,e,i,s,n,r,o,a,l,h,c,d){if(Math.abs(l)<1e-12)return void(Math.abs(h)>=1e-12&&this.#t(t,e,i,s,n,r,o,a,-c/h,d));const u=h**2-4*c*l;if(u<0)return;const p=Math.sqrt(u),f=2*l;this.#t(t,e,i,s,n,r,o,a,(-h+p)/f,d),this.#t(t,e,i,s,n,r,o,a,(-h-p)/f,d)}static bezierBoundingBox(t,e,i,s,n,r,o,a,l){return l?(l[0]=Math.min(l[0],t,o),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,o),l[3]=Math.max(l[3],e,a)):l=[Math.min(t,o),Math.min(e,a),Math.max(t,o),Math.max(e,a)],this.#e(t,i,n,o,e,s,r,a,3*(3*(i-n)-t+o),6*(t-2*i+n),3*(i-t),l),this.#e(t,i,n,o,e,s,r,a,3*(3*(s-r)-e+a),6*(e-2*s+r),3*(s-e),l),l}}function Q(t){return decodeURIComponent(escape(t))}let Z=null,J=null;function tt(t){return Z||(Z=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,J=new Map([["ﬅ","ſt"]])),t.replaceAll(Z,((t,e,i)=>e?e.normalize("NFKC"):J.get(i)))}function et(){if("undefined"!==typeof crypto&&"function"===typeof crypto?.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof crypto?.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<32;e++)t[e]=Math.floor(255*Math.random());return $(t)}const it="pdfjs_internal_id_",st={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class nt{constructor(){this.constructor===nt&&k("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,n){return"none"}destroy(t=!1){}}class rt{constructor(){this.constructor===rt&&k("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d")}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){k("Abstract method `_createCanvas` called.")}}class ot{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===ot&&k("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?x.BINARY:x.NONE;return this._fetchData(e,i).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)}))}_fetchData(t,e){k("Abstract method `_fetchData` called.")}}class at{constructor({baseUrl:t=null}){this.constructor===at&&k("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}_fetchData(t){k("Abstract method `_fetchData` called.")}}class lt{constructor(){this.constructor===lt&&k("Cannot initialize BaseSVGFactory.")}create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if("string"!==typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){k("Abstract method `_createSVG` called.")}}const ht="http://www.w3.org/2000/svg";class ct{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}class dt extends nt{#i;#s;#n;#r;#o;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}={}){super(),this.#n=t,this.#r=e}get#l(){return this.#i||=new Map}get#h(){return this.#o||=new Map}get#c(){if(!this.#s){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(ht,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#s=this.#r.createElementNS(ht,"defs"),t.append(i),i.append(this.#s),this.#r.body.append(t)}return this.#s}#d(t){if(1===t.length){const e=t[0],i=new Array(256);for(let t=0;t<256;t++)i[t]=e[t]/255;const s=i.join(",");return[s,s,s]}const[e,i,s]=t,n=new Array(256),r=new Array(256),o=new Array(256);for(let a=0;a<256;a++)n[a]=e[a]/255,r[a]=i[a]/255,o[a]=s[a]/255;return[n.join(","),r.join(","),o.join(",")]}addFilter(t){if(!t)return"none";let e=this.#l.get(t);if(e)return e;const[i,s,n]=this.#d(t),r=1===t.length?i:`${i}${s}${n}`;if(e=this.#l.get(r),e)return this.#l.set(t,e),e;const o=`g_${this.#n}_transfer_map_${this.#a++}`,a=`url(#${o})`;this.#l.set(t,a),this.#l.set(r,a);const l=this.#u(o);return this.#p(i,s,n,l),a}addHCMFilter(t,e){const i=`${t}-${e}`,s="base";let n=this.#h.get(s);if(n?.key===i)return n.url;if(n?(n.filter?.remove(),n.key=i,n.url="none",n.filter=null):(n={key:i,url:"none",filter:null},this.#h.set(s,n)),!t||!e)return n.url;const r=this.#f(t);t=Y.makeHexColor(...r);const o=this.#f(e);if(e=Y.makeHexColor(...o),this.#c.style.color="","#000000"===t&&"#ffffff"===e||t===e)return n.url;const a=new Array(256);for(let u=0;u<=255;u++){const t=u/255;a[u]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const l=a.join(","),h=`g_${this.#n}_hcm_filter`,c=n.filter=this.#u(h);this.#p(l,l,l,c),this.#g(c);const d=(t,e)=>{const i=r[t]/255,s=o[t]/255,n=new Array(e+1);for(let r=0;r<=e;r++)n[r]=i+r/e*(s-i);return n.join(",")};return this.#p(d(0,5),d(1,5),d(2,5),c),n.url=`url(#${h})`,n.url}addAlphaFilter(t){let e=this.#l.get(t);if(e)return e;const[i]=this.#d([t]),s=`alpha_${i}`;if(e=this.#l.get(s),e)return this.#l.set(t,e),e;const n=`g_${this.#n}_alpha_map_${this.#a++}`,r=`url(#${n})`;this.#l.set(t,r),this.#l.set(s,r);const o=this.#u(n);return this.#m(i,o),r}addLuminosityFilter(t){let e,i,s=this.#l.get(t||"luminosity");if(s)return s;if(t?([e]=this.#d([t]),i=`luminosity_${e}`):i="luminosity",s=this.#l.get(i),s)return this.#l.set(t,s),s;const n=`g_${this.#n}_luminosity_map_${this.#a++}`,r=`url(#${n})`;this.#l.set(t,r),this.#l.set(i,r);const o=this.#u(n);return this.#b(o),t&&this.#m(e,o),r}addHighlightHCMFilter(t,e,i,s,n){const r=`${e}-${i}-${s}-${n}`;let o=this.#h.get(t);if(o?.key===r)return o.url;if(o?(o.filter?.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},this.#h.set(t,o)),!e||!i)return o.url;const[a,l]=[e,i].map(this.#f.bind(this));let h=Math.round(.2126*a[0]+.7152*a[1]+.0722*a[2]),c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[d,u]=[s,n].map(this.#f.bind(this));c<h&&([h,c,d,u]=[c,h,u,d]),this.#c.style.color="";const p=(t,e,i)=>{const s=new Array(256),n=(c-h)/i,r=t/255,o=(e-t)/(255*i);let a=0;for(let l=0;l<=i;l++){const t=Math.round(h+l*n),e=r+l*o;for(let i=a;i<=t;i++)s[i]=e;a=t+1}for(let l=a;l<256;l++)s[l]=s[a-1];return s.join(",")},f=`g_${this.#n}_hcm_${t}_filter`,g=o.filter=this.#u(f);return this.#g(g),this.#p(p(d[0],u[0],5),p(d[1],u[1],5),p(d[2],u[2],5),g),o.url=`url(#${f})`,o.url}destroy(t=!1){t&&0!==this.#h.size||(this.#s&&(this.#s.parentNode.parentNode.remove(),this.#s=null),this.#i&&(this.#i.clear(),this.#i=null),this.#a=0)}#b(t){const e=this.#r.createElementNS(ht,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(ht,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#u(t){const e=this.#r.createElementNS(ht,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#v(t,e,i){const s=this.#r.createElementNS(ht,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)}#p(t,e,i,s){const n=this.#r.createElementNS(ht,"feComponentTransfer");s.append(n),this.#v(n,"feFuncR",t),this.#v(n,"feFuncG",e),this.#v(n,"feFuncB",i)}#m(t,e){const i=this.#r.createElementNS(ht,"feComponentTransfer");e.append(i),this.#v(i,"feFuncA",t)}#f(t){return this.#c.style.color=t,Pt(getComputedStyle(this.#c).getPropertyValue("color"))}}class ut extends rt{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function pt(t,e="text"){if(St(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise(((i,s)=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE)if(200!==n.status&&0!==n.status)s(new Error(n.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void i(n.response)}i(n.responseText)}},n.send(null)}))}class ft extends ot{_fetchData(t,e){return pt(t,this.isCompressed?"arraybuffer":"text").then((t=>({cMapData:t instanceof ArrayBuffer?new Uint8Array(t):U(t),compressionType:e})))}}class gt extends at{_fetchData(t){return pt(t,"arraybuffer").then((t=>new Uint8Array(t)))}}class mt extends lt{_createSVG(t){return document.createElementNS(ht,t)}}class bt{constructor({viewBox:t,scale:e,rotation:i,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=s,this.offsetY=n;const o=(t[2]+t[0])/2,a=(t[3]+t[1])/2;let l,h,c,d,u,p,f,g;switch(i%=360,i<0&&(i+=360),i){case 180:l=-1,h=0,c=0,d=1;break;case 90:l=0,h=1,c=1,d=0;break;case 270:l=0,h=-1,c=-1,d=0;break;case 0:l=1,h=0,c=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}r&&(c=-c,d=-d),0===l?(u=Math.abs(a-t[1])*e+s,p=Math.abs(o-t[0])*e+n,f=(t[3]-t[1])*e,g=(t[2]-t[0])*e):(u=Math.abs(o-t[0])*e+s,p=Math.abs(a-t[1])*e+n,f=(t[2]-t[0])*e,g=(t[3]-t[1])*e),this.transform=[l*e,h*e,c*e,d*e,u-l*e*o-c*e*a,p-h*e*o-d*e*a],this.width=f,this.height=g}get rawDims(){const{viewBox:t}=this;return R(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:n=!1}={}){return new bt({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}convertToViewportPoint(t,e){return Y.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Y.applyTransform([t[0],t[1]],this.transform),i=Y.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return Y.applyInverseTransform([t,e],this.transform)}}class vt extends D{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function yt(t){const e=t.length;let i=0;while(i<e&&""===t[i].trim())i++;return"data:"===t.substring(i,i+5).toLowerCase()}function _t(t){return"string"===typeof t&&/\.pdf$/i.test(t)}function xt(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function wt(t,e="document.pdf"){if("string"!==typeof t)return e;if(yt(t))return T('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=i.exec(t);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e}class At{started=Object.create(null);times=[];time(t){t in this.started&&T(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||T(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:n}of this.times)t.push(`${i.padEnd(e)} ${n-s}ms\n`);return t.join("")}}function St(t,e){try{const{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch{return!1}}function Et(t){t.preventDefault()}function Ct(t){console.log("Deprecated API usage: "+t)}let Mt;class Tt{static toDateObject(t){if(!t||"string"!==typeof t)return null;Mt||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=Mt.exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let n=parseInt(e[3],10);n=n>=1&&n<=31?n:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let a=parseInt(e[6],10);a=a>=0&&a<=59?a:0;const l=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(e[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===l?(r+=h,o+=c):"+"===l&&(r-=h,o-=c),new Date(Date.UTC(i,s,n,r,o,a))}}function kt(t,{scale:e=1,rotation:i=0}){const{width:s,height:n}=t.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new bt({viewBox:r,scale:e,rotation:i})}function Pt(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):(T(`Not a valid color format: "${t}"`),[0,0,0])}function Lt(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const i of t.keys()){e.style.color=i;const s=window.getComputedStyle(e).color;t.set(i,Pt(s))}e.remove()}function It(t){const{a:e,b:i,c:s,d:n,e:r,f:o}=t.getTransform();return[e,i,s,n,r,o]}function Rt(t){const{a:e,b:i,c:s,d:n,e:r,f:o}=t.getTransform().invertSelf();return[e,i,s,n,r,o]}function Dt(t,e,i=!1,s=!0){if(e instanceof bt){const{pageWidth:s,pageHeight:n}=e.rawDims,{style:r}=t,o=q.isCSSRoundSupported,a=`var(--scale-factor) * ${s}px`,l=`var(--scale-factor) * ${n}px`,h=o?`round(${a}, 1px)`:`calc(${a})`,c=o?`round(${l}, 1px)`:`calc(${l})`;i&&e.rotation%180!==0?(r.width=c,r.height=h):(r.width=h,r.height=c)}s&&t.setAttribute("data-main-rotation",e.rotation)}class Ot{#y=null;#_=null;#x;#w=null;constructor(t){this.#x=t}render(){const t=this.#y=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Et),t.addEventListener("pointerdown",Ot.#A);const e=this.#w=document.createElement("div");e.className="buttons",t.append(e);const i=this.#x.toolbarPosition;if(i){const{style:e}=t,s="ltr"===this.#x._uiManager.direction?1-i[0]:i[0];e.insetInlineEnd=100*s+"%",e.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#S(),t}static#A(t){t.stopPropagation()}#E(t){this.#x._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#C(t){this.#x._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#M(t){t.addEventListener("focusin",this.#E.bind(this),{capture:!0}),t.addEventListener("focusout",this.#C.bind(this),{capture:!0}),t.addEventListener("contextmenu",Et)}hide(){this.#y.classList.add("hidden"),this.#_?.hideDropdown()}show(){this.#y.classList.remove("hidden")}#S(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#x.editorType}-button`),this.#M(t),t.addEventListener("click",(t=>{this.#x._uiManager.delete()})),this.#w.append(t)}get#T(){const t=document.createElement("div");return t.className="divider",t}addAltTextButton(t){this.#M(t),this.#w.prepend(t,this.#T)}addColorPicker(t){this.#_=t;const e=t.renderButton();this.#M(e),this.#w.prepend(e,this.#T)}remove(){this.#y.remove(),this.#_?.destroy(),this.#_=null}}class Ft{#w=null;#y=null;#k;constructor(t){this.#k=t}#P(){const t=this.#y=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Et);const e=this.#w=document.createElement("div");return e.className="buttons",t.append(e),this.#L(),t}#I(t,e){let i=0,s=0;for(const n of t){const t=n.y+n.height;if(t<i)continue;const r=n.x+(e?n.width:0);t>i?(s=r,i=t):e?r>s&&(s=r):r<s&&(s=r)}return[e?1-s:s,i]}show(t,e,i){const[s,n]=this.#I(e,i),{style:r}=this.#y||=this.#P();t.append(this.#y),r.insetInlineEnd=100*s+"%",r.top=`calc(${100*n}% + var(--editor-toolbar-vert-offset))`}hide(){this.#y.remove()}#L(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),t.addEventListener("contextmenu",Et),t.addEventListener("click",(()=>{this.#k.highlightSelection("floating_button")})),this.#w.append(t)}}function Nt(t,e,i){for(const s of i)e.addEventListener(s,t[s].bind(t))}function Bt(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}class zt{#a=0;get id(){return`${u}${this.#a++}`}}class Ht{#R=et();#a=0;#l=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',e=new OffscreenCanvas(1,3),i=e.getContext("2d"),s=new Image;s.src=t;const n=s.decode().then((()=>(i.drawImage(s,0,0,1,1,0,0,1,3),0===new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0])));return R(this,"_isSVGFittingCanvas",n)}async#D(t,e){this.#l||=new Map;let i=this.#l.get(t);if(null===i)return null;if(i?.bitmap)return i.refCounter+=1,i;try{let t;if(i||={bitmap:null,id:`image_${this.#R}_${this.#a++}`,refCounter:0,isSvg:!1},"string"===typeof e?(i.url=e,t=await pt(e,"blob")):t=i.file=e,"image/svg+xml"===t.type){const e=Ht._isSVGFittingCanvas,s=new FileReader,n=new Image,r=new Promise(((t,r)=>{n.onload=()=>{i.bitmap=n,i.isSvg=!0,t()},s.onload=async()=>{const t=i.svgUrl=s.result;n.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},n.onerror=s.onerror=r}));s.readAsDataURL(t),await r}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(s){console.error(s),i=null}return this.#l.set(t,i),i&&this.#l.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:s,type:n}=t;return this.#D(`${e}_${i}_${s}_${n}`,t)}async getFromUrl(t){return this.#D(t,t)}async getFromId(t){this.#l||=new Map;const e=this.#l.get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=this.#l.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#l||=new Map;const e=this.#l.get(t);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${this.#R}_`)}}class jt{#O=[];#F=!1;#N;#B=-1;constructor(t=128){this.#N=t}add({cmd:t,undo:e,post:i,mustExec:s,type:n=NaN,overwriteIfSameType:r=!1,keepUndo:o=!1}){if(s&&t(),this.#F)return;const a={cmd:t,undo:e,post:i,type:n};if(-1===this.#B)return this.#O.length>0&&(this.#O.length=0),this.#B=0,void this.#O.push(a);if(r&&this.#O[this.#B].type===n)return o&&(a.undo=this.#O[this.#B].undo),void(this.#O[this.#B]=a);const l=this.#B+1;l===this.#N?this.#O.splice(0,1):(this.#B=l,l<this.#O.length&&this.#O.splice(l)),this.#O.push(a)}undo(){if(-1===this.#B)return;this.#F=!0;const{undo:t,post:e}=this.#O[this.#B];t(),e?.(),this.#F=!1,this.#B-=1}redo(){if(this.#B<this.#O.length-1){this.#B+=1,this.#F=!0;const{cmd:t,post:e}=this.#O[this.#B];t(),e?.(),this.#F=!1}}hasSomethingToUndo(){return-1!==this.#B}hasSomethingToRedo(){return this.#B<this.#O.length-1}destroy(){this.#O=null}}class $t{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=q.platform;for(const[i,s,n={}]of t)for(const t of i){const i=t.startsWith("mac+");e&&i?(this.callbacks.set(t.slice(4),{callback:s,options:n}),this.allKeys.add(t.split("+").at(-1))):e||i||(this.callbacks.set(t,{callback:s,options:n}),this.allKeys.add(t.split("+").at(-1)))}}#z(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#z(e));if(!i)return;const{callback:s,options:{bubbles:n=!1,args:r=[],checker:o=null}}=i;o&&!o(t,e)||(s.bind(t,...r,e)(),n||(e.stopPropagation(),e.preventDefault()))}}class Ut{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Lt(t),R(this,"_colors",t)}convert(t){const e=Pt(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every(((t,i)=>t===e[i])))return Ut._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Y.makeHexColor(...e):t}}class Vt{#H=null;#j=new Map;#$=new Map;#U=null;#V=null;#W=null;#G=new jt;#K=0;#q=new Set;#X=null;#Y=null;#Q=new Set;#Z=!1;#J=null;#tt=null;#et=null;#it=!1;#st=null;#nt=new zt;#rt=!1;#ot=!1;#at=null;#lt=null;#ht=null;#ct=p.NONE;#dt=new Set;#ut=null;#pt=null;#ft=null;#gt=this.blur.bind(this);#mt=this.focus.bind(this);#bt=this.copy.bind(this);#vt=this.cut.bind(this);#yt=this.paste.bind(this);#_t=this.keydown.bind(this);#xt=this.keyup.bind(this);#wt=this.onEditingAction.bind(this);#At=this.onPageChanging.bind(this);#St=this.onScaleChanging.bind(this);#Et=this.#Ct.bind(this);#Mt=this.onRotationChanging.bind(this);#Tt={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#kt=[0,0];#Pt=null;#Lt=null;#It=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Vt.prototype,e=t=>t.#Lt.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),i=(t,{target:e})=>{if(e instanceof HTMLInputElement){const{type:t}=e;return"text"!==t&&"number"!==t}return!0},s=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return R(this,"_keyboardManager",new $t([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&t.#Lt.contains(e)&&!t.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&t.#Lt.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}]]))}constructor(t,e,i,s,n,r,o,a,l){this.#Lt=t,this.#It=e,this.#U=i,this._eventBus=s,this._eventBus._on("editingaction",this.#wt),this._eventBus._on("pagechanging",this.#At),this._eventBus._on("scalechanging",this.#St),this._eventBus._on("rotationchanging",this.#Mt),this.#Rt(),this.#Dt(),this.#V=n.annotationStorage,this.#J=n.filterFactory,this.#pt=r,this.#et=o||null,this.#Z=a,this.#ht=l||null,this.viewParameters={realScale:ct.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#Ot(),this.#Ft(),this._eventBus._off("editingaction",this.#wt),this._eventBus._off("pagechanging",this.#At),this._eventBus._off("scalechanging",this.#St),this._eventBus._off("rotationchanging",this.#Mt);for(const t of this.#$.values())t.destroy();this.#$.clear(),this.#j.clear(),this.#Q.clear(),this.#H=null,this.#dt.clear(),this.#G.destroy(),this.#U?.destroy(),this.#st?.hide(),this.#st=null,this.#tt&&(clearTimeout(this.#tt),this.#tt=null),this.#Pt&&(clearTimeout(this.#Pt),this.#Pt=null),this.#Nt()}async mlGuess(t){return this.#ht?.guess(t)||null}get hasMLManager(){return!!this.#ht}get hcmFilter(){return R(this,"hcmFilter",this.#pt?this.#J.addHCMFilter(this.#pt.foreground,this.#pt.background):"none")}get direction(){return R(this,"direction",getComputedStyle(this.#Lt).direction)}get highlightColors(){return R(this,"highlightColors",this.#et?new Map(this.#et.split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}get highlightColorNames(){return R(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(t=>t.reverse()))):null)}setMainHighlightColorPicker(t){this.#lt=t}editAltText(t){this.#U?.editAltText(this,t)}onPageChanging({pageNumber:t}){this.#K=t-1}focusMainContainer(){this.#Lt.focus()}findParent(t,e){for(const i of this.#$.values()){const{x:s,y:n,width:r,height:o}=i.div.getBoundingClientRect();if(t>=s&&t<=s+r&&e>=n&&e<=n+o)return i}return null}disableUserSelect(t=!1){this.#It.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#Q.add(t)}removeShouldRescale(t){this.#Q.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ct.PDF_TO_CSS_UNITS;for(const e of this.#Q)e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Bt({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:r}=e,o=e.toString(),a=this.#Bt(e),l=a.closest(".textLayer"),h=this.getSelectionBoxes(l);if(h){e.empty(),this.#ct===p.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:p.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const e of this.#$.values())if(e.hasTextLayer(l)){e.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:r,text:o});break}}}#zt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=this.#Bt(t),i=e.closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#st||=new Ft(this),this.#st.show(i,s,"ltr"===this.direction))}addToAnnotationStorage(t){t.isEmpty()||!this.#V||this.#V.has(t.id)||this.#V.setValue(t.id,t)}#Ct(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#ut&&(this.#st?.hide(),this.#ut=null,this.#Ht({hasSelectedText:!1})));const{anchorNode:e}=t;if(e===this.#ut)return;const i=this.#Bt(t),s=i.closest(".textLayer");if(s){if(this.#st?.hide(),this.#ut=e,this.#Ht({hasSelectedText:!0}),(this.#ct===p.HIGHLIGHT||this.#ct===p.NONE)&&(this.#ct===p.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#it=this.isShiftKeyDown,!this.isShiftKeyDown)){const t=e=>{"pointerup"===e.type&&0!==e.button||(window.removeEventListener("pointerup",t),window.removeEventListener("blur",t),"pointerup"===e.type&&this.#jt("main_toolbar"))};window.addEventListener("pointerup",t),window.addEventListener("blur",t)}}else this.#ut&&(this.#st?.hide(),this.#ut=null,this.#Ht({hasSelectedText:!1}))}#jt(t=""){this.#ct===p.HIGHLIGHT?this.highlightSelection(t):this.#Z&&this.#zt()}#Rt(){document.addEventListener("selectionchange",this.#Et)}#Nt(){document.removeEventListener("selectionchange",this.#Et)}#$t(){window.addEventListener("focus",this.#mt),window.addEventListener("blur",this.#gt)}#Ft(){window.removeEventListener("focus",this.#mt),window.removeEventListener("blur",this.#gt)}blur(){if(this.isShiftKeyDown=!1,this.#it&&(this.#it=!1,this.#jt("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#dt)if(e.div.contains(t)){this.#at=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#at)return;const[t,e]=this.#at;this.#at=null,e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus()}#Dt(){window.addEventListener("keydown",this.#_t),window.addEventListener("keyup",this.#xt)}#Ot(){window.removeEventListener("keydown",this.#_t),window.removeEventListener("keyup",this.#xt)}#Ut(){document.addEventListener("copy",this.#bt),document.addEventListener("cut",this.#vt),document.addEventListener("paste",this.#yt)}#Vt(){document.removeEventListener("copy",this.#bt),document.removeEventListener("cut",this.#vt),document.removeEventListener("paste",this.#yt)}addEditListeners(){this.#Dt(),this.#Ut()}removeEditListeners(){this.#Ot(),this.#Vt()}copy(t){if(t.preventDefault(),this.#H?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#dt){const t=i.serialize(!0);t&&e.push(t)}0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const t of this.#Y)if(t.isHandlingMimeForPasting(r.type))return void t.paste(r,this.currentLayer);let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(n){return void T(`paste: "${n.message}".`)}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const t=[];for(const r of i){const e=s.deserialize(r);if(!e)return;t.push(e)}const e=()=>{for(const e of t)this.#Wt(e);this.#Gt(t)},n=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:n,mustExec:!0})}catch(n){T(`paste: "${n.message}".`)}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),this.#ct===p.NONE||this.isEditorHandlingKeyboard||Vt._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#it&&(this.#it=!1,this.#jt("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#Ht(t){const e=Object.entries(t).some((([t,e])=>this.#Tt[t]!==e));e&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Tt,t)}),this.#ct===p.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#Kt([[f.HIGHLIGHT_FREE,!0]]))}#Kt(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#$t(),this.#Ut(),this.#Ht({isEditing:this.#ct!==p.NONE,isEmpty:this.#qt(),hasSomethingToUndo:this.#G.hasSomethingToUndo(),hasSomethingToRedo:this.#G.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Ft(),this.#Vt(),this.#Ht({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#Y){this.#Y=t;for(const t of this.#Y)this.#Kt(t.defaultPropertiesToUpdate)}}getId(){return this.#nt.id}get currentLayer(){return this.#$.get(this.#K)}getLayer(t){return this.#$.get(t)}get currentPageIndex(){return this.#K}addLayer(t){this.#$.set(t.pageIndex,t),this.#rt?t.enable():t.disable()}removeLayer(t){this.#$.delete(t.pageIndex)}updateMode(t,e=null,i=!1){if(this.#ct!==t){if(this.#ct=t,t===p.NONE)return this.setEditingState(!1),void this.#Xt();this.setEditingState(!0),this.#Yt(),this.unselectAll();for(const e of this.#$.values())e.updateMode(t);if(e||!i){if(e)for(const t of this.#j.values())if(t.annotationElementId===e){this.setSelected(t),t.enterInEditMode();break}}else this.addNewEditorFromKeyboard()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#ct&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#Y){switch(t){case f.CREATE:return void this.currentLayer.addNewEditor();case f.HIGHLIGHT_DEFAULT_COLOR:this.#lt?.updateColor(e);break;case f.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#ft||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const i of this.#dt)i.updateParams(t,e);for(const i of this.#Y)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const n of this.#j.values())n.editorType===t&&n.show(e);const s=this.#ft?.get(f.HIGHLIGHT_SHOW_ALL)??!0;s!==e&&this.#Kt([[f.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#ot!==t){this.#ot=t;for(const e of this.#$.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}#Yt(){if(!this.#rt){this.#rt=!0;for(const t of this.#$.values())t.enable();for(const t of this.#j.values())t.enable()}}#Xt(){if(this.unselectAll(),this.#rt){this.#rt=!1;for(const t of this.#$.values())t.disable();for(const t of this.#j.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#j.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#j.get(t)}addEditor(t){this.#j.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#tt&&clearTimeout(this.#tt),this.#tt=setTimeout((()=>{this.focusMainContainer(),this.#tt=null}),0)),this.#j.delete(t.id),this.unselect(t),t.annotationElementId&&this.#q.has(t.annotationElementId)||this.#V?.remove(t.id)}addDeletedAnnotationElement(t){this.#q.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#q.has(t)}removeDeletedAnnotationElement(t){this.#q.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Wt(t){const e=this.#$.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#H!==t&&(this.#H=t,t&&this.#Kt(t.propertiesToUpdate))}get#Qt(){let t=null;for(t of this.#dt);return t}updateUI(t){this.#Qt===t&&this.#Kt(t.propertiesToUpdate)}toggleSelected(t){if(this.#dt.has(t))return this.#dt.delete(t),t.unselect(),void this.#Ht({hasSelectedEditor:this.hasSelection});this.#dt.add(t),t.select(),this.#Kt(t.propertiesToUpdate),this.#Ht({hasSelectedEditor:!0})}setSelected(t){for(const e of this.#dt)e!==t&&e.unselect();this.#dt.clear(),this.#dt.add(t),t.select(),this.#Kt(t.propertiesToUpdate),this.#Ht({hasSelectedEditor:!0})}isSelected(t){return this.#dt.has(t)}get firstSelectedEditor(){return this.#dt.values().next().value}unselect(t){t.unselect(),this.#dt.delete(t),this.#Ht({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#dt.size}get isEnterHandled(){return 1===this.#dt.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#G.undo(),this.#Ht({hasSomethingToUndo:this.#G.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#qt()})}redo(){this.#G.redo(),this.#Ht({hasSomethingToUndo:!0,hasSomethingToRedo:this.#G.hasSomethingToRedo(),isEmpty:this.#qt()})}addCommands(t){this.#G.add(t),this.#Ht({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#qt()})}#qt(){if(0===this.#j.size)return!0;if(1===this.#j.size)for(const t of this.#j.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#dt],e=()=>{for(const e of t)e.remove()},i=()=>{for(const e of t)this.#Wt(e)};this.addCommands({cmd:e,undo:i,mustExec:!0})}commitOrRemove(){this.#H?.commitOrRemove()}hasSomethingToControl(){return this.#H||this.hasSelection}#Gt(t){for(const e of this.#dt)e.unselect();this.#dt.clear();for(const e of t)e.isEmpty()||(this.#dt.add(e),e.select());this.#Ht({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#dt)t.commit();this.#Gt(this.#j.values())}unselectAll(){if((!this.#H||(this.#H.commitOrRemove(),this.#ct===p.NONE))&&this.hasSelection){for(const t of this.#dt)t.unselect();this.#dt.clear(),this.#Ht({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#kt[0]+=t,this.#kt[1]+=e;const[s,n]=this.#kt,r=[...this.#dt],o=1e3;this.#Pt&&clearTimeout(this.#Pt),this.#Pt=setTimeout((()=>{this.#Pt=null,this.#kt[0]=this.#kt[1]=0,this.addCommands({cmd:()=>{for(const t of r)this.#j.has(t.id)&&t.translateInPage(s,n)},undo:()=>{for(const t of r)this.#j.has(t.id)&&t.translateInPage(-s,-n)},mustExec:!1})}),o);for(const a of r)a.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#X=new Map;for(const t of this.#dt)this.#X.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#X)return!1;this.disableUserSelect(!1);const t=this.#X;this.#X=null;let e=!1;for(const[{x:s,y:n,pageIndex:r},o]of t)o.newX=s,o.newY=n,o.newPageIndex=r,e||=s!==o.savedX||n!==o.savedY||r!==o.savedPageIndex;if(!e)return!1;const i=(t,e,i,s)=>{if(this.#j.has(t.id)){const n=this.#$.get(s);n?t._setParentAndPosition(n,e,i):(t.pageIndex=s,t.x=e,t.y=i)}};return this.addCommands({cmd:()=>{for(const[e,{newX:s,newY:n,newPageIndex:r}]of t)i(e,s,n,r)},undo:()=>{for(const[e,{savedX:s,savedY:n,savedPageIndex:r}]of t)i(e,s,n,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#X)for(const i of this.#X.keys())i.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#dt.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#H===t}getActive(){return this.#H}getMode(){return this.#ct}get imageManager(){return R(this,"imageManager",new Ht)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,h=e.rangeCount;l<h;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:i,y:s,width:n,height:r}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(t,e,o,a)=>({x:(e-s)/r,y:1-(t+o-i)/n,width:a/r,height:o/n});break;case"180":o=(t,e,o,a)=>({x:1-(t+o-i)/n,y:1-(e+a-s)/r,width:o/n,height:a/r});break;case"270":o=(t,e,o,a)=>({x:1-(e+a-s)/r,y:(t-i)/n,width:a/r,height:o/n});break;default:o=(t,e,o,a)=>({x:(t-i)/n,y:(e-s)/r,width:o/n,height:a/r});break}const a=[];for(let l=0,h=e.rangeCount;l<h;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:i,width:s,height:n}of t.getClientRects())0!==s&&0!==n&&a.push(o(e,i,s,n))}return 0===a.length?null:a}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#W||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#W?.delete(t)}renderAnnotationElement(t){const e=this.#W?.get(t.data.id);if(!e)return;const i=this.#V.getRawValue(e);i&&(this.#ct!==p.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}}class Wt{#Zt="";#Jt=!1;#te=null;#ee=null;#ie=null;#se=!1;#x=null;static _l10nPromise=null;constructor(t){this.#x=t}static initialize(t){Wt._l10nPromise||=t}async render(){const t=this.#te=document.createElement("button");t.className="altText";const e=await Wt._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",Et),t.addEventListener("pointerdown",(t=>t.stopPropagation()));const i=t=>{t.preventDefault(),this.#x._uiManager.editAltText(this.#x)};return t.addEventListener("click",i,{capture:!0}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(this.#se=!0,i(e))})),await this.#ne(),t}finish(){this.#te&&(this.#te.focus({focusVisible:this.#se}),this.#se=!1)}isEmpty(){return!this.#Zt&&!this.#Jt}get data(){return{altText:this.#Zt,decorative:this.#Jt}}set data({altText:t,decorative:e}){this.#Zt===t&&this.#Jt===e||(this.#Zt=t,this.#Jt=e,this.#ne())}toggle(t=!1){this.#te&&(!t&&this.#ie&&(clearTimeout(this.#ie),this.#ie=null),this.#te.disabled=!t)}destroy(){this.#te?.remove(),this.#te=null,this.#ee=null}async#ne(){const t=this.#te;if(!t)return;if(!this.#Zt&&!this.#Jt)return t.classList.remove("done"),void this.#ee?.remove();t.classList.add("done"),Wt._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((e=>{t.setAttribute("aria-label",e)}));let e=this.#ee;if(!e){this.#ee=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip");const i=e.id=`alt-text-tooltip-${this.#x.id}`;t.setAttribute("aria-describedby",i);const s=100;t.addEventListener("mouseenter",(()=>{this.#ie=setTimeout((()=>{this.#ie=null,this.#ee.classList.add("show"),this.#x._reportTelemetry({action:"alt_text_tooltip"})}),s)})),t.addEventListener("mouseleave",(()=>{this.#ie&&(clearTimeout(this.#ie),this.#ie=null),this.#ee?.classList.remove("show")}))}e.innerText=this.#Jt?await Wt._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#Zt,e.parentNode||t.append(e);const i=this.#x.getImageForAltText();i?.setAttribute("aria-describedby",e.id)}}class Gt{#re=null;#Zt=null;#oe=!1;#ae=!1;#le=null;#he=null;#ce=this.focusin.bind(this);#de=this.focusout.bind(this);#ue=null;#pe="";#fe=!1;#ge=null;#me=!1;#be=!1;#ve=!1;#ye=null;#_e=0;#xe=0;#we=null;_initialOptions=Object.create(null);_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#Ae=!1;#Se=Gt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Ut;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Gt.prototype._resizeWithKeyboard,e=Vt.TRANSLATE_SMALL,i=Vt.TRANSLATE_BIG;return R(this,"_resizerKeyboardManager",new $t([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Gt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.constructor===Gt&&k("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:r}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[n,r];const[o,a]=this.parentDimensions;this.x=t.x/o,this.y=t.y/a,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return R(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Kt({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(Gt._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((e=>[e,t.get(e.replaceAll(/([A-Z])/g,(t=>`-${t.toLowerCase()}`)))]))),i?.strings)for(const n of i.strings)Gt._l10nPromise.set(n,t.get(n));if(-1!==Gt._borderLineWidth)return;const s=getComputedStyle(document.documentElement);Gt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){k("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#Ae}set _isDraggable(t){this.#Ae=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#Se}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#Ee(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#fe?this.#fe=!1:this.parent.setSelected(this))}focusout(t){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const e=t.relatedTarget;e?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[n,r]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/n,this.y=(e+s)/r,this.fixAndSetPosition()}#Ce([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this.fixAndSetPosition()}translate(t,e){this.#Ce(this.parentDimensions,t,e)}translateInPage(t,e){this.#ge||=[this.x,this.y],this.#Ce(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#ge||=[this.x,this.y];const[i,s]=this.parentDimensions;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:n,y:r}=this;const[o,a]=this.getBaseTranslation();n+=o,r+=a,this.div.style.left=`${(100*n).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#ge&&(this.#ge[0]!==this.x||this.#ge[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Gt,s=i/t,n=i/e;switch(this.rotation){case 90:return[-s,n];case 180:return[s,n];case 270:return[s,-n];default:return[-s,-n]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:s,y:n,width:r,height:o}=this;if(r*=e,o*=i,s*=e,n*=i,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-r,s)),n=Math.max(0,Math.min(i-o,n));break;case 90:s=Math.max(0,Math.min(e-o,s)),n=Math.min(i,Math.max(r,n));break;case 180:s=Math.min(e,Math.max(r,s)),n=Math.min(i,Math.max(o,n));break;case 270:s=Math.min(e,Math.max(o,s)),n=Math.max(0,Math.min(i-r,n));break}this.x=s/=e,this.y=n/=i;const[a,l]=this.getBaseTranslation();s+=a,n+=l;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*n).toFixed(2)}%`,this.moveInDOM()}static#Me(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Gt.#Me(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Gt.#Me(t,e,360-this.parentRotation)}#Te(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,s=e*t,n=i*t;return q.isCSSRoundSupported?[Math.round(s),Math.round(n)]:[s,n]}setDims(t,e){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,this.#ae||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),n=!this.#ae&&e.endsWith("%");if(s&&n)return;const[r,o]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),this.#ae||n||(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#ke(){if(this.#le)return;this.#le=document.createElement("div"),this.#le.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const e of t){const t=document.createElement("div");this.#le.append(t),t.classList.add("resizer",e),t.setAttribute("data-resizer-name",e),t.addEventListener("pointerdown",this.#Pe.bind(this,e)),t.addEventListener("contextmenu",Et),t.tabIndex=-1}this.div.prepend(this.#le)}#Pe(t,e){e.preventDefault();const{isMac:i}=q.platform;if(0!==e.button||e.ctrlKey&&i)return;this.#Zt?.toggle(!1);const s=this.#Le.bind(this,t),n=this._isDraggable;this._isDraggable=!1;const r={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,r),window.addEventListener("contextmenu",Et);const o=this.x,a=this.y,l=this.width,h=this.height,c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{this.parent.togglePointerEvents(!0),this.#Zt?.toggle(!0),this._isDraggable=n,window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),window.removeEventListener("pointermove",s,r),window.removeEventListener("contextmenu",Et),this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#Ie(o,a,l,h)};window.addEventListener("pointerup",u),window.addEventListener("blur",u)}#Ie(t,e,i,s){const n=this.x,r=this.y,o=this.width,a=this.height;n===t&&r===e&&o===i&&a===s||this.addCommands({cmd:()=>{this.width=o,this.height=a,this.x=n,this.y=r;const[t,e]=this.parentDimensions;this.setDims(t*o,e*a),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=t,this.y=e;const[n,r]=this.parentDimensions;this.setDims(n*i,r*s),this.fixAndSetPosition()},mustExec:!0})}#Le(t,e){const[i,s]=this.parentDimensions,n=this.x,r=this.y,o=this.width,a=this.height,l=Gt.MIN_SIZE/i,h=Gt.MIN_SIZE/s,c=t=>Math.round(1e4*t)/1e4,d=this.#Te(this.rotation),u=(t,e)=>[d[0]*t+d[2]*e,d[1]*t+d[3]*e],p=this.#Te(360-this.rotation),f=(t,e)=>[p[0]*t+p[2]*e,p[1]*t+p[3]*e];let g,m,b=!1,v=!1;switch(t){case"topLeft":b=!0,g=(t,e)=>[0,0],m=(t,e)=>[t,e];break;case"topMiddle":g=(t,e)=>[t/2,0],m=(t,e)=>[t/2,e];break;case"topRight":b=!0,g=(t,e)=>[t,0],m=(t,e)=>[0,e];break;case"middleRight":v=!0,g=(t,e)=>[t,e/2],m=(t,e)=>[0,e/2];break;case"bottomRight":b=!0,g=(t,e)=>[t,e],m=(t,e)=>[0,0];break;case"bottomMiddle":g=(t,e)=>[t/2,e],m=(t,e)=>[t/2,0];break;case"bottomLeft":b=!0,g=(t,e)=>[0,e],m=(t,e)=>[t,0];break;case"middleLeft":v=!0,g=(t,e)=>[0,e/2],m=(t,e)=>[t,e/2];break}const y=g(o,a),_=m(o,a);let x=u(..._);const w=c(n+x[0]),A=c(r+x[1]);let S=1,E=1,[C,M]=this.screenToPageTranslation(e.movementX,e.movementY);if([C,M]=f(C/i,M/s),b){const t=Math.hypot(o,a);S=E=Math.max(Math.min(Math.hypot(_[0]-y[0]-C,_[1]-y[1]-M)/t,1/o,1/a),l/o,h/a)}else v?S=Math.max(l,Math.min(1,Math.abs(_[0]-y[0]-C)))/o:E=Math.max(h,Math.min(1,Math.abs(_[1]-y[1]-M)))/a;const T=c(o*S),k=c(a*E);x=u(...m(T,k));const P=w-x[0],L=A-x[1];this.width=T,this.height=k,this.x=P,this.y=L,this.setDims(i*T,s*k),this.fixAndSetPosition()}altTextFinish(){this.#Zt?.finish()}async addEditToolbar(){return this.#ue||this.#be||(this.#ue=new Ot(this),this.div.append(this.#ue.render()),this.#Zt&&this.#ue.addAltTextButton(await this.#Zt.render())),this.#ue}removeEditToolbar(){this.#ue&&(this.#ue.remove(),this.#ue=null,this.#Zt?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#Zt||(Wt.initialize(Gt._l10nPromise),this.#Zt=new Wt(this),await this.addEditToolbar())}get altTextData(){return this.#Zt?.data}set altTextData(t){this.#Zt&&(this.#Zt.data=t)}hasAltText(){return!this.#Zt?.isEmpty()}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#oe?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",this.#ce),this.div.addEventListener("focusout",this.#de);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Nt(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=q.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(this.#fe=!0,this._isDraggable?this.#Re(t):this.#De(t))}#De(t){const{isMac:e}=q.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#Re(t){const e=this._uiManager.isSelected(this);let i,s;this._uiManager.setUpDragSession(),e&&(this.div.classList.add("moving"),i={passive:!0,capture:!0},this.#_e=t.clientX,this.#xe=t.clientY,s=t=>{const{clientX:e,clientY:i}=t,[s,n]=this.screenToPageTranslation(e-this.#_e,i-this.#xe);this.#_e=e,this.#xe=i,this._uiManager.dragSelectedEditors(s,n)},window.addEventListener("pointermove",s,i));const n=()=>{window.removeEventListener("pointerup",n),window.removeEventListener("blur",n),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,i)),this.#fe=!1,this._uiManager.endDragSession()||this.#De(t)};window.addEventListener("pointerup",n),window.addEventListener("blur",n)}moveInDOM(){this.#ye&&clearTimeout(this.#ye),this.#ye=setTimeout((()=>{this.#ye=null,this.parent?.moveEditorInDOM(this)}),0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const s=this.parentScale,[n,r]=this.pageDimensions,[o,a]=this.pageTranslation,l=t/s,h=e/s,c=this.x*n,d=this.y*r,u=this.width*n,p=this.height*r;switch(i){case 0:return[c+l+o,r-d-h-p+a,c+l+u+o,r-d-h+a];case 90:return[c+h+o,r-d+l+a,c+h+p+o,r-d+l+u+a];case 180:return[c-l-u+o,r-d+h+a,c-l+o,r-d+h+p+a];case 270:return[c-h-p+o,r-d-l-u+a,c-h+o,r-d-l+a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,n,r]=t,o=n-i,a=r-s;switch(this.rotation){case 0:return[i,e-r,o,a];case 90:return[i,e-s,a,o];case 180:return[n,e-s,o,a];case 270:return[n,e-r,a,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#be=!0}disableEditMode(){this.#be=!1}isInEditMode(){return this.#be}shouldGetKeyboardEvents(){return this.#ve}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#ce),this.div?.addEventListener("focusout",this.#de)}rotate(t){}serialize(t=!1,e=null){k("An editor must be serializable")}static deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation;const[n,r]=s.pageDimensions,[o,a,l,h]=s.getRectInCurrentCoords(t.rect,r);return s.x=o/n,s.y=a/r,s.width=l/n,s.height=h/r,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",this.#ce),this.div.removeEventListener("focusout",this.#de),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#ye&&(clearTimeout(this.#ye),this.#ye=null),this.#Ee(),this.removeEditToolbar(),this.#we){for(const t of this.#we.values())clearTimeout(t);this.#we=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#ke(),this.#le.classList.remove("hidden"),Nt(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),this.#he={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#le.children;if(!this.#re){this.#re=Array.from(e);const t=this.#Oe.bind(this),i=this.#Fe.bind(this);for(const e of this.#re){const s=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t),e.addEventListener("blur",i),e.addEventListener("focus",this.#Ne.bind(this,s)),Gt._l10nPromise.get(`pdfjs-editor-resizer-label-${s}`).then((t=>e.setAttribute("aria-label",t)))}}const i=this.#re[0];let s=0;for(const r of e){if(r===i)break;s++}const n=(360-this.rotation+this.parentRotation)%360/90*(this.#re.length/4);if(n!==s){if(n<s)for(let e=0;e<s-n;e++)this.#le.append(this.#le.firstChild);else if(n>s)for(let e=0;e<n-s;e++)this.#le.firstChild.before(this.#le.lastChild);let t=0;for(const i of e){const e=this.#re[t++],s=e.getAttribute("data-resizer-name");Gt._l10nPromise.get(`pdfjs-editor-resizer-label-${s}`).then((t=>i.setAttribute("aria-label",t)))}}this.#Be(0),this.#ve=!0,this.#le.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Oe(t){Gt._resizerKeyboardManager.exec(this,t)}#Fe(t){this.#ve&&t.relatedTarget?.parentNode!==this.#le&&this.#Ee()}#Ne(t){this.#pe=this.#ve?t:""}#Be(t){if(this.#re)for(const e of this.#re)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#ve&&this.#Le(this.#pe,{movementX:t,movementY:e})}#Ee(){if(this.#ve=!1,this.#Be(-1),this.#he){const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=this.#he;this.#Ie(t,e,i,s),this.#he=null}}_stopResizingWithKeyboard(){this.#Ee(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this.#ue?this.#ue?.show():this.addEditToolbar().then((()=>{this.div?.classList.contains("selectedEditor")&&this.#ue?.show()}))}unselect(){this.#le?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this.#ue?.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#me}set isEditing(t){this.#me=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#ae=!0;const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#we||=new Map;const{action:e}=t;let i=this.#we.get(e);return i&&clearTimeout(i),i=setTimeout((()=>{this._reportTelemetry(t),this.#we.delete(e),0===this.#we.size&&(this.#we=null)}),Gt._telemetryTimeout),void this.#we.set(e,i)}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#oe=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#oe=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===e.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}class Kt extends Gt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const qt=3285377520,Xt=4294901760,Yt=65535;class Qt{constructor(t){this.h1=t?4294967295&t:qt,this.h2=t?4294967295&t:qt}update(t){let e,i;if("string"===typeof t){e=new Uint8Array(2*t.length),i=0;for(let s=0,n=t.length;s<n;s++){const n=t.charCodeAt(s);n<=255?e[i++]=n:(e[i++]=n>>>8,e[i++]=255&n)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),i=e.byteLength}const s=i>>2,n=i-4*s,r=new Uint32Array(e.buffer,0,s);let o=0,a=0,l=this.h1,h=this.h2;const c=3432918353,d=461845907,u=c&Yt,p=d&Yt;for(let f=0;f<s;f++)1&f?(o=r[f],o=o*c&Xt|o*u&Yt,o=o<<15|o>>>17,o=o*d&Xt|o*p&Yt,l^=o,l=l<<13|l>>>19,l=5*l+3864292196):(a=r[f],a=a*c&Xt|a*u&Yt,a=a<<15|a>>>17,a=a*d&Xt|a*p&Yt,h^=a,h=h<<13|h>>>19,h=5*h+3864292196);switch(o=0,n){case 3:o^=e[4*s+2]<<16;case 2:o^=e[4*s+1]<<8;case 1:o^=e[4*s],o=o*c&Xt|o*u&Yt,o=o<<15|o>>>17,o=o*d&Xt|o*p&Yt,1&s?l^=o:h^=o}this.h1=l,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&Xt|36045*t&Yt,e=4283543511*e&Xt|(2950163797*(e<<16|t>>>16)&Xt)>>>16,t^=e>>>1,t=444984403*t&Xt|60499*t&Yt,e=3301882366*e&Xt|(3120437893*(e<<16|t>>>16)&Xt)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Zt=Object.freeze({map:null,hash:"",transfer:void 0});class Jt{#ze=!1;#He=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#He.get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return this.#He.get(t)}remove(t){if(this.#He.delete(t),0===this.#He.size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const t of this.#He.values())if(t instanceof Gt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#He.get(t);let s=!1;if(void 0!==i)for(const[n,r]of Object.entries(e))i[n]!==r&&(s=!0,i[n]=r);else s=!0,this.#He.set(t,e);s&&this.#je(),e instanceof Gt&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#He.has(t)}getAll(){return this.#He.size>0?W(this.#He):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#He.size}#je(){this.#ze||(this.#ze=!0,"function"===typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#ze&&(this.#ze=!1,"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new te(this)}get serializable(){if(0===this.#He.size)return Zt;const t=new Map,e=new Qt,i=[],s=Object.create(null);let n=!1;for(const[r,o]of this.#He){const i=o instanceof Gt?o.serialize(!1,s):o;i&&(t.set(r,i),e.update(`${r}:${JSON.stringify(i)}`),n||=!!i.bitmap)}if(n)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Zt}get editorStats(){let t=null;const e=new Map;for(const i of this.#He.values()){if(!(i instanceof Gt))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:n}=s;e.has(n)||e.set(n,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const r=t[n]||=new Map;for(const[t,e]of Object.entries(s)){if("type"===t)continue;let i=r.get(t);i||(i=new Map,r.set(t,i));const s=i.get(e)??0;i.set(e,s+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}}class te extends Jt{#$e;constructor(t){super();const{map:e,hash:i,transfer:s}=t.serializable,n=structuredClone(e,s?{transfer:s}:null);this.#$e={map:n,hash:i,transfer:s}}get print(){k("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#$e}}class ee{#Ue=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#Ue.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(t&&!this.#Ue.has(t.loadedName))if(P(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:n}=t,r=new FontFace(i,s,n);this.addNativeFontFace(r);try{await r.load(),this.#Ue.add(i),e?.(t)}catch{T(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}}else k("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw T(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((e=>{const i=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,i)}))}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return R(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(r||"undefined"!==typeof navigator&&"string"===typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),R(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){P(!s.done,"completeRequest() cannot be called twice."),s.done=!0;while(i.length>0&&i[0].done){const t=i.shift();setTimeout(t.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return R(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function s(t,e,i,s){const n=t.substring(0,e),r=t.substring(e+i);return n+s+r}let n,r;const o=this._document.createElement("canvas");o.width=1,o.height=1;const a=o.getContext("2d");let l=0;function h(t,e){if(++l>30)return T("Load test font never loaded."),void e();a.font="30px "+t,a.fillText(".",0,20);const i=a.getImageData(0,0,1,1);i.data[3]>0?e():setTimeout(h.bind(null,t,e))}const c=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;const u=976;d=s(d,u,c.length,c);const p=16,f=1482184792;let g=i(d,p);for(n=0,r=c.length-3;n<r;n+=4)g=g-f+i(c,n)|0;n<c.length&&(g=g-f+i(c+"XXX",n)|0),d=s(d,p,4,V(g));const m=`url(data:font/opentype;base64,${btoa(d)});`,b=`@font-face {font-family:"${c}";src:${m}}`;this.insertRule(b);const v=this._document.createElement("div");v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px";for(const y of[t.loadedName,c]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=y,v.append(t)}this._document.body.append(v),h(c,(()=>{v.remove(),e.complete()}))}}class ie{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=!0===e,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=$(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this._inspectFont?.(this,e),i}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(n){T(`getPathGenerator - ignoring character: "${n}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[e]=function(t,e){};const s=[];for(let r=0,o=i.length;r<o;)switch(i[r++]){case st.BEZIER_CURVE_TO:{const[t,e,n,o,a,l]=i.slice(r,r+6);s.push((i=>i.bezierCurveTo(t,e,n,o,a,l))),r+=6}break;case st.MOVE_TO:{const[t,e]=i.slice(r,r+2);s.push((i=>i.moveTo(t,e))),r+=2}break;case st.LINE_TO:{const[t,e]=i.slice(r,r+2);s.push((i=>i.lineTo(t,e))),r+=2}break;case st.QUADRATIC_CURVE_TO:{const[t,e,n,o]=i.slice(r,r+4);s.push((i=>i.quadraticCurveTo(t,e,n,o))),r+=4}break;case st.RESTORE:s.push((t=>t.restore()));break;case st.SAVE:s.push((t=>t.save()));break;case st.SCALE:P(2===s.length,"Scale command is only valid at the third position.");break;case st.TRANSFORM:{const[t,e,n,o,a,l]=i.slice(r,r+6);s.push((i=>i.transform(t,e,n,o,a,l))),r+=6}break;case st.TRANSLATE:{const[t,e]=i.slice(r,r+2);s.push((i=>i.translate(t,e))),r+=2}break}return this.compiledGlyphs[e]=function(t,e){s[0](t),s[1](t),t.scale(e,-e);for(let i=2,n=s.length;i<n;i++)s[i](t)}}}if(r){var se=Promise.withResolvers(),ne=null;const t=async()=>{const t=await import("fs"),e=await import("http"),i=await import("https"),s=await import("url");let n,r;return new Map(Object.entries({fs:t,http:e,https:i,url:s,canvas:n,path2d:r}))};t().then((t=>{ne=t,se.resolve()}),(t=>{T(`loadPackages: ${t}`),ne=new Map,se.resolve()}))}class re{static get promise(){return se.promise}static get(t){return ne?.get(t)}}const oe=function(t){const e=re.get("fs");return e.promises.readFile(t).then((t=>new Uint8Array(t)))};class ae extends nt{}class le extends rt{_createCanvas(t,e){const i=re.get("canvas");return i.createCanvas(t,e)}}class he extends ot{_fetchData(t,e){return oe(t).then((t=>({cMapData:t,compressionType:e})))}}class ce extends at{_fetchData(t){return oe(t)}}const de={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ue(t,e){if(!e)return;const i=e[2]-e[0],s=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],i,s),t.clip(n)}class pe{constructor(){this.constructor===pe&&k("Cannot initialize BaseShadingPattern.")}getPattern(){k("Abstract method `getPattern` called.")}}class fe extends pe{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let n;if(s===de.STROKE||s===de.FILL){const r=e.current.getClippedPathBoundingBox(s,It(t))||[0,0,0,0],o=Math.ceil(r[2]-r[0])||1,a=Math.ceil(r[3]-r[1])||1,l=e.cachedCanvases.getCanvas("pattern",o,a,!0),h=l.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-r[0],-r[1]),i=Y.transform(i,[1,0,0,1,r[0],r[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),ue(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),n=t.createPattern(l.canvas,"no-repeat");const c=new DOMMatrix(i);n.setTransform(c)}else ue(t,this._bbox),n=this._createGradient(t);return n}}function ge(t,e,i,s,n,r,o,a){const l=e.coords,h=e.colors,c=t.data,d=4*t.width;let u;l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=r,r=o,o=u),l[s+1]>l[n+1]&&(u=s,s=n,n=u,u=o,o=a,a=u),l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=r,r=o,o=u);const p=(l[i]+e.offsetX)*e.scaleX,f=(l[i+1]+e.offsetY)*e.scaleY,g=(l[s]+e.offsetX)*e.scaleX,m=(l[s+1]+e.offsetY)*e.scaleY,b=(l[n]+e.offsetX)*e.scaleX,v=(l[n+1]+e.offsetY)*e.scaleY;if(f>=v)return;const y=h[r],_=h[r+1],x=h[r+2],w=h[o],A=h[o+1],S=h[o+2],E=h[a],C=h[a+1],M=h[a+2],T=Math.round(f),k=Math.round(v);let P,L,I,R,D,O,F,N;for(let B=T;B<=k;B++){if(B<m){const t=B<f?0:(f-B)/(f-m);P=p-(p-g)*t,L=y-(y-w)*t,I=_-(_-A)*t,R=x-(x-S)*t}else{let t;t=B>v?1:m===v?0:(m-B)/(m-v),P=g-(g-b)*t,L=w-(w-E)*t,I=A-(A-C)*t,R=S-(S-M)*t}let t;t=B<f?0:B>v?1:(f-B)/(f-v),D=p-(p-b)*t,O=y-(y-E)*t,F=_-(_-C)*t,N=x-(x-M)*t;const e=Math.round(Math.min(P,D)),i=Math.round(Math.max(P,D));let s=d*B+4*e;for(let n=e;n<=i;n++)t=(P-n)/(P-D),t<0?t=0:t>1&&(t=1),c[s++]=L-(L-O)*t|0,c[s++]=I-(I-F)*t|0,c[s++]=R-(R-N)*t|0,c[s++]=255}}function me(t,e,i){const s=e.coords,n=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,h=a-1;for(r=0;r<l;r++){let e=r*a;for(let r=0;r<h;r++,e++)ge(t,i,s[e],s[e+1],s[e+a],n[e],n[e+1],n[e+a]),ge(t,i,s[e+a+1],s[e+1],s[e+a],n[e+a+1],n[e+1],n[e+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)ge(t,i,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class be extends pe{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const s=1.1,n=3e3,r=2,o=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-a,c=Math.min(Math.ceil(Math.abs(l*t[0]*s)),n),d=Math.min(Math.ceil(Math.abs(h*t[1]*s)),n),u=l/c,p=h/d,f={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-a,scaleX:1/u,scaleY:1/p},g=c+2*r,m=d+2*r,b=i.getCanvas("mesh",g,m,!1),v=b.context,y=v.createImageData(c,d);if(e){const t=y.data;for(let i=0,s=t.length;i<s;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const x of this._figures)me(y,x,f);v.putImageData(y,r,r);const _=b.canvas;return{canvas:_,offsetX:o-r*u,offsetY:a-r*p,scaleX:u,scaleY:p}}getPattern(t,e,i,s){let n;if(ue(t,this._bbox),s===de.SHADING)n=Y.singularValueDecompose2dScale(It(t));else if(n=Y.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=Y.singularValueDecompose2dScale(this.matrix);n=[n[0]*t[0],n[1]*t[1]]}const r=this._createMeshCanvas(n,s===de.SHADING?null:this._background,e.cachedCanvases);return s!==de.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class ve extends pe{getPattern(){return"hotpink"}}function ye(t){switch(t[0]){case"RadialAxial":return new fe(t);case"Mesh":return new be(t);case"Dummy":return new ve}throw new Error(`Unknown IR type: ${t[0]}`)}const _e={COLORED:1,UNCOLORED:2};class xe{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,s,n){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,s=this.xstep,n=this.ystep,r=this.paintType,o=this.tilingType,a=this.color,l=this.canvasGraphicsFactory;M("TilingType: "+o);const h=i[0],c=i[1],d=i[2],u=i[3],p=Y.singularValueDecompose2dScale(this.matrix),f=Y.singularValueDecompose2dScale(this.baseTransform),g=[p[0]*f[0],p[1]*f[1]],m=this.getSizeAndScale(s,this.ctx.canvas.width,g[0]),b=this.getSizeAndScale(n,this.ctx.canvas.height,g[1]),v=t.cachedCanvases.getCanvas("pattern",m.size,b.size,!0),y=v.context,_=l.createCanvasGraphics(y);_.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(_,r,a);let x=h,w=c,A=d,S=u;return h<0&&(x=0,A+=Math.abs(h)),c<0&&(w=0,S+=Math.abs(c)),y.translate(-m.scale*x,-b.scale*w),_.transform(m.scale,0,0,b.scale,0,0),y.save(),this.clipBbox(_,x,w,A,S),_.baseTransform=It(_.ctx),_.executeOperatorList(e),_.endDrawing(),{canvas:v.canvas,scaleX:m.scale,scaleY:b.scale,offsetX:x,offsetY:w}}getSizeAndScale(t,e,i){t=Math.abs(t);const s=Math.max(xe.MAX_PATTERN_SIZE,e);let n=Math.ceil(t*i);return n>=s?n=s:i=n/t,{scale:i,size:n}}clipBbox(t,e,i,s,n){const r=s-e,o=n-i;t.ctx.rect(e,i,r,o),t.current.updateRectMinMax(It(t.ctx),[e,i,s,n]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,n=t.current;switch(e){case _e.COLORED:const t=this.ctx;s.fillStyle=t.fillStyle,s.strokeStyle=t.strokeStyle,n.fillColor=t.fillStyle,n.strokeColor=t.strokeStyle;break;case _e.UNCOLORED:const r=Y.makeHexColor(i[0],i[1],i[2]);s.fillStyle=r,s.strokeStyle=r,n.fillColor=r,n.strokeColor=r;break;default:throw new H(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,s){let n=i;s!==de.SHADING&&(n=Y.transform(n,e.baseTransform),this.matrix&&(n=Y.transform(n,this.matrix)));const r=this.createPatternCanvas(e);let o=new DOMMatrix(n);o=o.translate(r.offsetX,r.offsetY),o=o.scale(1/r.scaleX,1/r.scaleY);const a=t.createPattern(r.canvas,"repeat");return a.setTransform(o),a}}function we({src:t,srcPos:e=0,dest:i,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=q.isLittleEndian?4278190080:255,[l,h]=o?[r,a]:[a,r],c=s>>3,d=7&s,u=t.length;i=new Uint32Array(i.buffer);let p=0;for(let f=0;f<n;f++){for(const n=e+c;e<n;e++){const s=e<u?t[e]:255;i[p++]=128&s?h:l,i[p++]=64&s?h:l,i[p++]=32&s?h:l,i[p++]=16&s?h:l,i[p++]=8&s?h:l,i[p++]=4&s?h:l,i[p++]=2&s?h:l,i[p++]=1&s?h:l}if(0===d)continue;const s=e<u?t[e++]:255;for(let t=0;t<d;t++)i[p++]=s&1<<7-t?h:l}return{srcPos:e,destPos:p}}const Ae=16,Se=100,Ee=15,Ce=10,Me=1e3,Te=16;function ke(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,s,n,r,o){e.transform(t,i,s,n,r,o),this.__originalTransform(t,i,s,n,r,o)},t.setTransform=function(t,i,s,n,r,o){e.setTransform(t,i,s,n,r,o),this.__originalSetTransform(t,i,s,n,r,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,s,n,r,o){e.bezierCurveTo(t,i,s,n,r,o),this.__originalBezierCurveTo(t,i,s,n,r,o)},t.rect=function(t,i,s,n){e.rect(t,i,s,n),this.__originalRect(t,i,s,n)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Pe{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return void 0!==this.cache[t]?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Le(t,e,i,s,n,r,o,a,l,h){const[c,d,u,p,f,g]=It(t);if(0===d&&0===u){const m=o*c+f,b=Math.round(m),v=a*p+g,y=Math.round(v),_=(o+l)*c+f,x=Math.abs(Math.round(_)-b)||1,w=(a+h)*p+g,A=Math.abs(Math.round(w)-y)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(p),b,y),t.drawImage(e,i,s,n,r,0,0,x,A),t.setTransform(c,d,u,p,f,g),[x,A]}if(0===c&&0===p){const m=a*u+f,b=Math.round(m),v=o*d+g,y=Math.round(v),_=(a+h)*u+f,x=Math.abs(Math.round(_)-b)||1,w=(o+l)*d+g,A=Math.abs(Math.round(w)-y)||1;return t.setTransform(0,Math.sign(d),Math.sign(u),0,b,y),t.drawImage(e,i,s,n,r,0,0,A,x),t.setTransform(c,d,u,p,f,g),[A,x]}t.drawImage(e,i,s,n,r,o,a,l,h);const m=Math.hypot(c,d),b=Math.hypot(u,p);return[m*l,b*h]}function Ie(t){const{width:e,height:i}=t;if(e>Me||i>Me)return null;const s=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o,a,l,h=new Uint8Array(r*(i+1));const c=e+7&-8;let d=new Uint8Array(c*i),u=0;for(const b of t.data){let t=128;while(t>0)d[u++]=b&t?0:255,t>>=1}let p=0;for(u=0,0!==d[u]&&(h[0]=1,++p),a=1;a<e;a++)d[u]!==d[u+1]&&(h[a]=d[u]?2:1,++p),u++;for(0!==d[u]&&(h[a]=2,++p),o=1;o<i;o++){u=o*c,l=o*r,d[u-c]!==d[u]&&(h[l]=d[u]?1:8,++p);let t=(d[u]?4:0)+(d[u-c]?8:0);for(a=1;a<e;a++)t=(t>>2)+(d[u+1]?4:0)+(d[u-c+1]?8:0),n[t]&&(h[l+a]=n[t],++p),u++;if(d[u-c]!==d[u]&&(h[l+a]=d[u]?2:4,++p),p>s)return null}for(u=c*(i-1),l=o*r,0!==d[u]&&(h[l]=8,++p),a=1;a<e;a++)d[u]!==d[u+1]&&(h[l+a]=d[u]?4:8,++p),u++;if(0!==d[u]&&(h[l+a]=4,++p),p>s)return null;const f=new Int32Array([0,r,-1,0,-r,0,0,0,1]),g=new Path2D;for(o=0;p&&o<=i;o++){let t=o*r;const i=t+e;while(t<i&&!h[t])t++;if(t===i)continue;g.moveTo(t%r,o);const s=t;let n=h[t];do{const e=f[n];do{t+=e}while(!h[t]);const i=h[t];5!==i&&10!==i?(n=i,h[t]=0):(n=i&51*n>>4,h[t]&=n>>2|n<<2),g.lineTo(t%r,t/r|0),h[t]||--p}while(s!==t);--o}d=null,h=null;const m=function(t){t.save(),t.scale(1/e,-1/i),t.translate(0,-i),t.fill(g),t.beginPath(),t.restore()};return m}class Re{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o,this.textMatrixScale=1,this.fontMatrix=a,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=m.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=Y.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=Y.applyTransform(e,t),s=Y.applyTransform(e.slice(2),t),n=Y.applyTransform([e[0],e[3]],t),r=Y.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],n[0],r[0]),this.minY=Math.min(this.minY,i[1],s[1],n[1],r[1]),this.maxX=Math.max(this.maxX,i[0],s[0],n[0],r[0]),this.maxY=Math.max(this.maxY,i[1],s[1],n[1],r[1])}updateScalingPathMinMax(t,e){Y.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,s,n,r,o,a,l,h){const c=Y.bezierBoundingBox(e,i,s,n,r,o,a,l,h);h||this.updateRectMinMax(t,c)}getPathBoundingBox(t=de.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===de.STROKE){e||k("Stroke bounding box must include transform.");const t=Y.singularValueDecompose2dScale(e),s=t[0]*this.lineWidth/2,n=t[1]*this.lineWidth/2;i[0]-=s,i[1]-=n,i[2]+=s,i[3]+=n}return i}updateClipFromPath(){const t=Y.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=de.FILL,e=null){return Y.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function De(t,e){if("undefined"!==typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const i=e.height,s=e.width,n=i%Te,r=(i-n)/Te,o=0===n?r:r+1,a=t.createImageData(s,Te);let l,h=0;const c=e.data,d=a.data;let u,p,f,g;if(e.kind===b.GRAYSCALE_1BPP){const e=c.byteLength,i=new Uint32Array(d.buffer,0,d.byteLength>>2),g=i.length,m=s+7>>3,b=4294967295,v=q.isLittleEndian?4278190080:255;for(u=0;u<o;u++){for(f=u<r?Te:n,l=0,p=0;p<f;p++){const t=e-h;let n=0;const r=t>m?s:8*t-7,o=-8&r;let a=0,d=0;for(;n<o;n+=8)d=c[h++],i[l++]=128&d?b:v,i[l++]=64&d?b:v,i[l++]=32&d?b:v,i[l++]=16&d?b:v,i[l++]=8&d?b:v,i[l++]=4&d?b:v,i[l++]=2&d?b:v,i[l++]=1&d?b:v;for(;n<r;n++)0===a&&(d=c[h++],a=128),i[l++]=d&a?b:v,a>>=1}while(l<g)i[l++]=0;t.putImageData(a,0,u*Te)}}else if(e.kind===b.RGBA_32BPP){for(p=0,g=s*Te*4,u=0;u<r;u++)d.set(c.subarray(h,h+g)),h+=g,t.putImageData(a,0,p),p+=Te;u<o&&(g=s*n*4,d.set(c.subarray(h,h+g)),t.putImageData(a,0,p))}else{if(e.kind!==b.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(f=Te,g=s*f,u=0;u<o;u++){for(u>=r&&(f=n,g=s*f),l=0,p=g;p--;)d[l++]=c[h++],d[l++]=c[h++],d[l++]=c[h++],d[l++]=255;t.putImageData(a,0,u*Te)}}}function Oe(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,s=e.width,n=i%Te,r=(i-n)/Te,o=0===n?r:r+1,a=t.createImageData(s,Te);let l=0;const h=e.data,c=a.data;for(let d=0;d<o;d++){const e=d<r?Te:n;({srcPos:l}=we({src:h,srcPos:l,dest:c,width:s,height:e,nonBlackColor:0})),t.putImageData(a,0,d*Te)}}function Fe(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)void 0!==t[s]&&(e[s]=t[s]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Ne(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!r){const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}}function Be(t,e){if(e)return!0;const i=Y.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*ct.PDF_TO_CSS_UNITS);return i[0]<=s&&i[1]<=s}const ze=["butt","round","square"],He=["miter","round","bevel"],je={},$e={};class Ue{constructor(t,e,i,s,n,{optionalContentConfig:r,markedContentStack:o=null},a,l){this.ctx=t,this.current=new Re(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=r,this.cachedCanvases=new Pe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"===typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const n=this.ctx.canvas.width,r=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,n,r),this.ctx.fillStyle=o,i){const t=this.cachedCanvases.getCanvas("transparent",n,r);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...It(this.compositeCtx))}this.ctx.save(),Ne(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=It(this.ctx)}executeOperatorList(t,e,i,s){const n=t.argsArray,r=t.fnArray;let o=e||0;const a=n.length;if(a===o)return o;const l=a-o>Ce&&"function"===typeof i,h=l?Date.now()+Ee:0;let c=0;const d=this.commonObjs,u=this.objs;let p;while(1){if(void 0!==s&&o===s.nextBreakPoint)return s.breakIt(o,i),o;if(p=r[o],p!==w.dependency)this[p].apply(this,n[o]);else for(const t of n[o]){const e=t.startsWith("g_")?d:u;if(!e.has(t))return e.get(t,i),o}if(o++,o===a)return o;if(l&&++c>Ce){if(Date.now()>h)return i(),o;c=0}}}#Ve(){while(this.stateStack.length||this.inSMaskMode)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#Ve(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#We()}#We(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width,s=t.height;let n,r,o=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=i,h=s,c="prescale1";while(o>2&&l>1||a>2&&h>1){let e=l,i=h;o>2&&l>1&&(e=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),o/=l/e),a>2&&h>1&&(i=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,a/=h/i),n=this.cachedCanvases.getCanvas(c,e,i),r=n.context,r.clearRect(0,0,e,i),r.drawImage(t,0,0,l,h,0,0,e,i),t=n.canvas,l=e,h=i,c="prescale1"===c?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,n=this.current.fillColor,r=this.current.patternFill,o=It(e);let a,l,h,c;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(r?o:[o.slice(0,4),n]),a=this._cachedBitmapsMap.get(e),a||(a=new Map,this._cachedBitmapsMap.set(e,a));const i=a.get(l);if(i&&!r){const t=Math.round(Math.min(o[0],o[2])+o[4]),e=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:i,offsetX:t,offsetY:e}}h=i}h||(c=this.cachedCanvases.getCanvas("maskCanvas",i,s),Oe(c.context,t));let d=Y.transform(o,[1/i,0,0,-1/s,0,0]);d=Y.transform(d,[1,0,0,1,0,-s]);const[u,p,f,g]=Y.getAxialAlignedBoundingBox([0,0,i,s],d),m=Math.round(f-u)||1,b=Math.round(g-p)||1,v=this.cachedCanvases.getCanvas("fillCanvas",m,b),y=v.context,_=u,x=p;y.translate(-_,-x),y.transform(...d),h||(h=this._scaleImage(c.canvas,Rt(y)),h=h.img,a&&r&&a.set(l,h)),y.imageSmoothingEnabled=Be(It(y),t.interpolate),Le(y,h,0,0,h.width,h.height,0,0,i,s),y.globalCompositeOperation="source-in";const w=Y.transform(Rt(y),[1,0,0,1,-_,-x]);return y.fillStyle=r?n.getPattern(e,this,w,de.FILL):n,y.fillRect(0,0,i,s),a&&!r&&(this.cachedCanvases.delete("fillCanvas"),a.set(l,v.canvas)),{canvas:v.canvas,offsetX:Math.round(_),offsetY:Math.round(x)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=ze[t]}setLineJoin(t){this.ctx.lineJoin=He[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const n=this.ctx;n.setTransform(...It(this.suspendedCtx)),Fe(this.suspendedCtx,n),ke(n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fe(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const n=s[0],r=s[1],o=s[2]-n,a=s[3]-r;0!==o&&0!==a&&(this.genericComposeSMask(e.context,i,o,a,e.subtype,e.backdrop,e.transferMap,n,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,n,r,o,a,l,h,c){let d=t.canvas,u=a-h,p=l-c;if(r)if(u<0||p<0||u+i>d.width||p+s>d.height){const t=this.cachedCanvases.getCanvas("maskExtension",i,s),e=t.context;e.drawImage(d,-u,-p),r.some((t=>0!==t))&&(e.globalCompositeOperation="destination-atop",e.fillStyle=Y.makeHexColor(...r),e.fillRect(0,0,i,s),e.globalCompositeOperation="source-over"),d=t.canvas,u=p=0}else if(r.some((t=>0!==t))){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(u,p,i,s),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=Y.makeHexColor(...r),t.fillRect(u,p,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===n&&o?e.filter=this.filterFactory.addAlphaFilter(o):"Luminosity"===n&&(e.filter=this.filterFactory.addLuminosityFilter(o));const f=new Path2D;f.rect(a,l,i,s),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(d,u,p,i,s,a,l,i,s),e.restore()}save(){this.inSMaskMode?(Fe(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Fe(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,n,r){this.ctx.transform(t,e,i,s,n,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const s=this.ctx,n=this.current;let r,o,a=n.x,l=n.y;const h=It(s),c=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],d=c?i.slice(0):null;for(let u=0,p=0,f=t.length;u<f;u++)switch(0|t[u]){case w.rectangle:a=e[p++],l=e[p++];const t=e[p++],i=e[p++],u=a+t,f=l+i;s.moveTo(a,l),0===t||0===i?s.lineTo(u,f):(s.lineTo(u,l),s.lineTo(u,f),s.lineTo(a,f)),c||n.updateRectMinMax(h,[a,l,u,f]),s.closePath();break;case w.moveTo:a=e[p++],l=e[p++],s.moveTo(a,l),c||n.updatePathMinMax(h,a,l);break;case w.lineTo:a=e[p++],l=e[p++],s.lineTo(a,l),c||n.updatePathMinMax(h,a,l);break;case w.curveTo:r=a,o=l,a=e[p+4],l=e[p+5],s.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],a,l),n.updateCurvePathMinMax(h,r,o,e[p],e[p+1],e[p+2],e[p+3],a,l,d),p+=6;break;case w.curveTo2:r=a,o=l,s.bezierCurveTo(a,l,e[p],e[p+1],e[p+2],e[p+3]),n.updateCurvePathMinMax(h,r,o,a,l,e[p],e[p+1],e[p+2],e[p+3],d),a=e[p+2],l=e[p+3],p+=4;break;case w.curveTo3:r=a,o=l,a=e[p+2],l=e[p+3],s.bezierCurveTo(e[p],e[p+1],a,l,a,l),n.updateCurvePathMinMax(h,r,o,e[p],e[p+1],a,l,a,l,d),p+=4;break;case w.closePath:s.closePath();break}c&&n.updateScalingPathMinMax(h,d),n.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof i&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,Rt(e),de.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let n=!1;s&&(e.save(),e.fillStyle=i.getPattern(e,this,Rt(e),de.FILL),n=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),n&&e.restore(),t&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=je}eoClip(){this.pendingClip=$e}beginText(){this.current.textMatrix=o,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||a,0!==s.fontMatrix[0]&&0!==s.fontMatrix[3]||T("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const n=i.loadedName||"sans-serif",r=i.systemFontInfo?.css||`"${n}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let h=e;e<Ae?h=Ae:e>Se&&(h=Se),this.current.fontSizeScale=e/h,this.ctx.font=`${l} ${o} ${h}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,n,r){this.current.textMatrix=[t,e,i,s,n,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s){const n=this.ctx,r=this.current,o=r.font,a=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,h=a&m.FILL_STROKE_MASK,c=!!(a&m.ADD_TO_PATH_FLAG),d=r.patternFill&&!o.missingFile;let u;if((o.disableFontFace||c||d)&&(u=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||d?(n.save(),n.translate(e,i),n.beginPath(),u(n,l),s&&n.setTransform(...s),h!==m.FILL&&h!==m.FILL_STROKE||n.fill(),h!==m.STROKE&&h!==m.FILL_STROKE||n.stroke(),n.restore()):(h!==m.FILL&&h!==m.FILL_STROKE||n.fillText(t,e,i),h!==m.STROKE&&h!==m.FILL_STROKE||n.strokeText(t,e,i)),c){const t=this.pendingTextPaths||=[];t.push({transform:It(n),x:e,y:i,fontSize:l,addToPath:u})}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return R(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(0===s)return;const n=this.ctx,r=e.fontSizeScale,o=e.charSpacing,a=e.wordSpacing,l=e.fontDirection,h=e.textHScale*l,c=t.length,d=i.vertical,u=d?1:-1,p=i.defaultVMetrics,f=s*e.fontMatrix[0],g=e.textRenderingMode===m.FILL&&!i.disableFontFace&&!e.patternFill;let b;if(n.save(),n.transform(...e.textMatrix),n.translate(e.x,e.y+e.textRise),l>0?n.scale(h,-1):n.scale(h,1),e.patternFill){n.save();const t=e.fillColor.getPattern(n,this,Rt(n),de.FILL);b=It(n),n.restore(),n.fillStyle=t}let v=e.lineWidth;const y=e.textMatrixScale;if(0===y||0===v){const t=e.textRenderingMode&m.FILL_STROKE_MASK;t!==m.STROKE&&t!==m.FILL_STROKE||(v=this.getSinglePixelWidth())}else v/=y;if(1!==r&&(n.scale(r,r),v/=r),n.lineWidth=v,i.isInvalidPDFjsFont){const i=[];let s=0;for(const e of t)i.push(e.unicode),s+=e.width;return n.fillText(i.join(""),0,0),e.x+=s*f*h,n.restore(),void this.compose()}let _,x=0;for(_=0;_<c;++_){const e=t[_];if("number"===typeof e){x+=u*e*s/1e3;continue}let h=!1;const c=(e.isSpace?a:0)+o,m=e.fontChar,v=e.accent;let y,w,A=e.width;if(d){const t=e.vmetric||p,i=-(e.vmetric?t[1]:.5*A)*f,s=t[2]*f;A=t?-t[0]:A,y=i/r,w=(x+s)/r}else y=x/r,w=0;if(i.remeasure&&A>0){const t=1e3*n.measureText(m).width/s*r;if(A<t&&this.isFontSubpixelAAEnabled){const e=A/t;h=!0,n.save(),n.scale(e,1),y/=e}else A!==t&&(y+=(A-t)/2e3*s/r)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(g&&!v)n.fillText(m,y,w);else if(this.paintChar(m,y,w,b),v){const t=y+s*v.offset.x/r,e=w-s*v.offset.y/r;this.paintChar(v.fontChar,t,e,b)}const S=d?A*f-c*l:A*f+c*l;x+=S,h&&n.restore()}d?e.y-=x:e.x+=x*h,n.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,n=i.fontSize,r=i.fontDirection,o=s.vertical?1:-1,l=i.charSpacing,h=i.wordSpacing,c=i.textHScale*r,d=i.fontMatrix||a,u=t.length,p=i.textRenderingMode===m.INVISIBLE;let f,g,b,v;if(!p&&0!==n){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(c,r),f=0;f<u;++f){if(g=t[f],"number"===typeof g){v=o*g*n/1e3,this.ctx.translate(v,0),i.x+=v*c;continue}const r=(g.isSpace?h:0)+l,a=s.charProcOperatorList[g.operatorListId];if(!a){T(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),e.scale(n,n),e.transform(...d),this.executeOperatorList(a),this.restore());const u=Y.applyTransform([g.width,0],d);b=u[0]*n+r,e.translate(b,0),i.x+=b*c}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,n,r){this.ctx.rect(i,s,n-i,r-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const i=t[1],s=this.baseTransform||It(this.ctx),n={createCanvasGraphics:t=>new Ue(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new xe(t,i,this.ctx,n,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const s=Y.makeHexColor(t,e,i);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(t,e,i){const s=Y.makeHexColor(t,e,i);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=ye(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Rt(e),de.SHADING);const s=Rt(e);if(s){const{width:t,height:i}=e.canvas,[n,r,o,a]=Y.getAxialAlignedBoundingBox([0,0,t,i],s);this.ctx.fillRect(n,r,o-n,a-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){k("Should not call beginInlineImage")}beginImageData(){k("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=It(this.ctx),e)){const t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax(It(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||M("TODO: Support non-isolated groups."),t.knockout&&T("Knockout groups not supported.");const i=It(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Y.getAxialAlignedBoundingBox(t.bbox,It(e));const n=[0,0,e.canvas.width,e.canvas.height];s=Y.intersect(s,n)||[0,0,0,0];const r=Math.floor(s[0]),o=Math.floor(s[1]),a=Math.max(Math.ceil(s[2])-r,1),l=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,a,l]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const c=this.cachedCanvases.getCanvas(h,a,l),d=c.context;d.translate(-r,-o),d.transform(...i),t.smask?this.smaskStack.push({canvas:c.canvas,context:d,offsetX:r,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,o),e.save()),Fe(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=It(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const i=Y.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,i,s,n){if(this.#Ve(),Ne(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const s=e[2]-e[0],r=e[3]-e[1];if(n&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=s,e[3]=r;const[n,o]=Y.singularValueDecompose2dScale(It(this.ctx)),{viewportScale:a}=this,l=Math.ceil(s*this.outputScaleX*a),h=Math.ceil(r*this.outputScaleY*a);this.annotationCanvas=this.canvasFactory.create(l,h);const{canvas:c,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(t,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(n,0,0,-o,0,r*o),Ne(this.ctx)}else Ne(this.ctx),this.ctx.rect(e[0],e[1],s,r),this.ctx.clip(),this.endPath()}this.current=new Re(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#We(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this.processingType3;if(s&&(void 0===s.compiled&&(s.compiled=Ie(t)),s.compiled))return void s.compiled(i);const n=this._createMaskCanvas(t),r=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,n,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const a=It(o);o.transform(e,i,s,n,0,0);const l=this._createMaskCanvas(t);o.setTransform(1,0,0,1,l.offsetX-a[4],l.offsetY-a[5]);for(let h=0,c=r.length;h<c;h+=2){const t=Y.transform(a,[e,i,s,n,r[h],r[h+1]]),[c,d]=Y.applyTransform([0,0],t);o.drawImage(l.canvas,c,d)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const n of t){const{data:t,width:r,height:o,transform:a}=n,l=this.cachedCanvases.getCanvas("maskCanvas",r,o),h=l.context;h.save();const c=this.getObject(t,n);Oe(h,c),h.globalCompositeOperation="source-in",h.fillStyle=s?i.getPattern(h,this,Rt(e),de.FILL):i,h.fillRect(0,0,r,o),h.restore(),e.save(),e.transform(...a),e.scale(1,-1),Le(e,l.canvas,0,0,r,o,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):T("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const n=this.getObject(t);if(!n)return void T("Dependent image isn't ready yet");const r=n.width,o=n.height,a=[];for(let l=0,h=s.length;l<h;l+=2)a.push({transform:[e,0,0,i,s[l],s[l+1]],x:0,y:0,w:r,h:o});this.paintInlineImageXObjectGroup(n,a)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:i,height:s}=t,n=this.cachedCanvases.getCanvas("inlineImage",i,s),r=n.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",n.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;if(this.save(),!r){const{filter:t}=s;"none"!==t&&""!==t&&(s.filter="none")}let n;if(s.scale(1/e,-1/i),t.bitmap)n=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)n=t;else{const s=this.cachedCanvases.getCanvas("inlineImage",e,i),r=s.context;De(r,t),n=this.applyTransferMapsToCanvas(r)}const o=this._scaleImage(n,Rt(s));s.imageSmoothingEnabled=Be(It(s),t.interpolate),Le(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const e=t.width,i=t.height,n=this.cachedCanvases.getCanvas("inlineImage",e,i),r=n.context;De(r,t),s=this.applyTransferMapsToCanvas(r)}for(const n of e)i.save(),i.transform(...n.transform),i.scale(1,-1),Le(i,s,n.x,n.y,n.w,n.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===$e?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=It(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:n}=this.ctx.getTransform();let r,o;if(0===i&&0===s){const i=Math.abs(e),s=Math.abs(n);if(i===s)if(0===t)r=o=1/i;else{const e=i*t;r=o=e<1?1/e:1}else if(0===t)r=1/i,o=1/s;else{const e=i*t,n=s*t;r=e<1?1/e:1,o=n<1?1/n:1}}else{const a=Math.abs(e*n-i*s),l=Math.hypot(e,i),h=Math.hypot(s,n);if(0===t)r=h/a,o=l/a;else{const e=t*a;r=h>e?h/e:1,o=l>e?l/e:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[s,n]=this.getScaleForStroking();if(e.lineWidth=i||1,1===s&&1===n)return void e.stroke();const r=e.getLineDash();if(t&&e.save(),e.scale(s,n),r.length>0){const t=Math.max(s,n);e.setLineDash(r.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const on in w)void 0!==Ue.prototype[on]&&(Ue.prototype[w[on]]=Ue.prototype[on]);class Ve{static#Ge=null;static#Ke="";static get workerPort(){return this.#Ge}static set workerPort(t){if(!("undefined"!==typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");this.#Ge=t}static get workerSrc(){return this.#Ke}static set workerSrc(t){if("string"!==typeof t)throw new Error("Invalid `workerSrc` type.");this.#Ke=t}}const We={UNKNOWN:0,DATA:1,ERROR:2},Ge={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ke(t){switch(t instanceof Error||"object"===typeof t&&null!==t||k('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new j(t.message);case"MissingPDFException":return new B(t.message);case"PasswordException":return new O(t.message,t.code);case"UnexpectedResponseException":return new z(t.message,t.status);case"UnknownErrorException":return new F(t.message,t.details);default:return new F(t.message,t.toString())}}class qe{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#qe(e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===We.DATA)i.resolve(e.data);else{if(e.callback!==We.ERROR)throw new Error("Unexpected callback case");i.reject(Ke(e.reason))}return}const s=this.actionHandler[e.action];if(!s)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,n=e.sourceName;new Promise((function(t){t(s(e.data))})).then((function(s){i.postMessage({sourceName:t,targetName:n,callback:We.DATA,callbackId:e.callbackId,data:s})}),(function(s){i.postMessage({sourceName:t,targetName:n,callback:We.ERROR,callbackId:e.callbackId,reason:Ke(s)})}))}else e.streamId?this.#Xe(e):s(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,n=Promise.withResolvers();this.callbackCapabilities[s]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(r){n.reject(r)}return n.promise}sendWithStream(t,e,i,s){const n=this.streamId++,r=this.sourceName,o=this.targetName,a=this.comObj;return new ReadableStream({start:i=>{const l=Promise.withResolvers();return this.streamControllers[n]={controller:i,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},a.postMessage({sourceName:r,targetName:o,action:t,streamId:n,data:e,desiredSize:i.desiredSize},s),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[n].pullCall=e,a.postMessage({sourceName:r,targetName:o,stream:Ge.PULL,streamId:n,desiredSize:t.desiredSize}),e.promise},cancel:t=>{P(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[n].cancelCall=e,this.streamControllers[n].isClosed=!0,a.postMessage({sourceName:r,targetName:o,stream:Ge.CANCEL,streamId:n,reason:Ke(t)}),e.promise}},i)}#Xe(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,r=this,o=this.actionHandler[t.action],a={enqueue(t,r=1,o){if(this.isCancelled)return;const a=this.desiredSize;this.desiredSize-=r,a>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),n.postMessage({sourceName:i,targetName:s,stream:Ge.ENQUEUE,streamId:e,chunk:t},o)},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:Ge.CLOSE,streamId:e}),delete r.streamSinks[e])},error(t){P(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:Ge.ERROR,streamId:e,reason:Ke(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};a.sinkCapability.resolve(),a.ready=a.sinkCapability.promise,this.streamSinks[e]=a,new Promise((function(e){e(o(t.data,a))})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:Ge.START_COMPLETE,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:Ge.START_COMPLETE,streamId:e,reason:Ke(t)})}))}#qe(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,r=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case Ge.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(Ke(t.reason));break;case Ge.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(Ke(t.reason));break;case Ge.PULL:if(!o){n.postMessage({sourceName:i,targetName:s,stream:Ge.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,new Promise((function(t){t(o.onPull?.())})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:Ge.PULL_COMPLETE,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:Ge.PULL_COMPLETE,streamId:e,reason:Ke(t)})}));break;case Ge.ENQUEUE:if(P(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case Ge.CLOSE:if(P(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),this.#Ye(r,e);break;case Ge.ERROR:P(r,"error should have stream controller"),r.controller.error(Ke(t.reason)),this.#Ye(r,e);break;case Ge.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(Ke(t.reason)),this.#Ye(r,e);break;case Ge.CANCEL:if(!o)break;new Promise((function(e){e(o.onCancel?.(Ke(t.reason)))})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:Ge.CANCEL_COMPLETE,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:Ge.CANCEL_COMPLETE,streamId:e,reason:Ke(t)})})),o.sinkCapability.reject(Ke(t.reason)),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#Ye(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class Xe{#Qe;#Ze;constructor({parsedData:t,rawData:e}){this.#Qe=t,this.#Ze=e}getRaw(){return this.#Ze}get(t){return this.#Qe.get(t)??null}getAll(){return W(this.#Qe)}has(t){return this.#Qe.has(t)}}const Ye=Symbol("INTERNAL");class Qe{#Je=!1;#ti=!1;#ei=!1;#ii=!0;constructor(t,{name:e,intent:i,usage:s}){this.#Je=!!(t&c.DISPLAY),this.#ti=!!(t&c.PRINT),this.name=e,this.intent=i,this.usage=s}get visible(){if(this.#ei)return this.#ii;if(!this.#ii)return!1;const{print:t,view:e}=this.usage;return this.#Je?"OFF"!==e?.viewState:!this.#ti||"OFF"!==t?.printState}_setVisible(t,e,i=!1){t!==Ye&&k("Internal method `_setVisible` called."),this.#ei=i,this.#ii=e}}class Ze{#si=null;#ni=new Map;#ri=null;#oi=null;constructor(t,e=c.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,this.#oi=t.order;for(const i of t.groups)this.#ni.set(i.id,new Qe(e,i));if("OFF"===t.baseState)for(const t of this.#ni.values())t._setVisible(Ye,!1);for(const e of t.on)this.#ni.get(e)._setVisible(Ye,!0);for(const e of t.off)this.#ni.get(e)._setVisible(Ye,!1);this.#ri=this.getHash()}}#ai(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const e=t[s];let n;if(Array.isArray(e))n=this.#ai(e);else{if(!this.#ni.has(e))return T(`Optional content group not found: ${e}`),!0;n=this.#ni.get(e).visible}switch(i){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return"And"===i}isVisible(t){if(0===this.#ni.size)return!0;if(!t)return M("Optional content group not defined."),!0;if("OCG"===t.type)return this.#ni.has(t.id)?this.#ni.get(t.id).visible:(T(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this.#ai(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#ni.has(e))return T(`Optional content group not found: ${e}`),!0;if(this.#ni.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this.#ni.has(e))return T(`Optional content group not found: ${e}`),!0;if(!this.#ni.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#ni.has(e))return T(`Optional content group not found: ${e}`),!0;if(!this.#ni.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#ni.has(e))return T(`Optional content group not found: ${e}`),!0;if(this.#ni.get(e).visible)return!1}return!0}return T(`Unknown optional content policy ${t.policy}.`),!0}return T(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const i=this.#ni.get(t);i?(i._setVisible(Ye,!!e,!0),this.#si=null):T(`Optional content group not found: ${t}`)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const t=this.#ni.get(s);if(t)switch(i){case"ON":t._setVisible(Ye,!0);break;case"OFF":t._setVisible(Ye,!1);break;case"Toggle":t._setVisible(Ye,!t.visible);break}}this.#si=null}get hasInitialVisibility(){return null===this.#ri||this.getHash()===this.#ri}getOrder(){return this.#ni.size?this.#oi?this.#oi.slice():[...this.#ni.keys()]:null}getGroups(){return this.#ni.size>0?W(this.#ni):null}getGroup(t){return this.#ni.get(t)||null}getHash(){if(null!==this.#si)return this.#si;const t=new Qt;for(const[e,i]of this.#ni)t.update(`${e}:${i.visible}`);return this.#si=t.hexdigest()}}class Je{constructor(t,{disableRange:e=!1,disableStream:i=!1}){P(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:n,progressiveDone:r,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=o,n?.length>0){const t=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),t.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),t.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),t.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const e=this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)}));P(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){void 0===t.total?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){P(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new ti(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new ei(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class ti{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=_t(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){const e=this._requests.shift();e.resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){const t=this._queuedChunks.shift();return{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ei{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{const e=this._requests.shift();e.resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ii(t){let e=!0,i=s("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=l(t),t=h(t),r(t)}if(i=o(t),i){const t=h(i);return r(t)}if(i=s("filename","i").exec(t),i){i=i[1];let t=a(i);return t=h(t),r(t)}function s(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function n(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const s=new TextDecoder(t,{fatal:!0}),n=U(i);i=s.decode(n),e=!1}catch{}}return i}function r(t){return e&&/[\x80-\xff]/.test(t)&&(t=n("utf-8",t),e&&(t=n("iso-8859-1",t))),t}function o(t){const e=[];let i;const n=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");while(null!==(i=n.exec(t))){let[,t,s,n]=i;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[s,n]}const r=[];for(let s=0;s<e.length;++s){if(!(s in e))break;let[t,i]=e[s];i=a(i),t&&(i=unescape(i),0===s&&(i=l(i))),r.push(i)}return r.join("")}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){const e=t.indexOf("'");if(-1===e)return t;const i=t.slice(0,e),s=t.slice(e+1),r=s.replace(/^[^']*'/,"");return n(i,r)}function h(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,s){if("q"===i||"Q"===i)return s=s.replaceAll("_"," "),s=s.replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})),n(e,s);try{s=atob(s)}catch{}return n(e,s)}))}return""}function si({getResponseHeader:t,isHttp:e,rangeChunkSize:i,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(t("Content-Length"),10);if(!Number.isInteger(r))return n;if(n.suggestedLength=r,r<=2*i)return n;if(s||!e)return n;if("bytes"!==t("Accept-Ranges"))return n;const o=t("Content-Encoding")||"identity";return"identity"!==o||(n.allowRangeRequests=!0),n}function ni(t){const e=t("Content-Disposition");if(e){let t=ii(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(_t(t))return t}return null}function ri(t,e){return 404===t||0===t&&e.startsWith("file:")?new B('Missing PDF "'+e+'".'):new z(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function oi(t){return 200===t||206===t}function ai(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function li(t){const e=new Headers;for(const i in t){const s=t[i];void 0!==s&&e.append(i,s)}return e}function hi(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(T(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class ci{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return P(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new di(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new ui(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class di{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=li(this._stream.httpHeaders);const i=e.url;fetch(i,ai(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!oi(t.status))throw ri(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:s,suggestedLength:n}=si({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=n||this._contentLength,this._filename=ni(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new j("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:hi(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class ui{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=li(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const n=s.url;fetch(n,ai(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!oi(t.status))throw ri(t.status,n);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:hi(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const pi=200,fi=206;function gi(t){const e=t.response;return"string"!==typeof e?e:U(e).buffer}class mi{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const s={begin:t,end:e};for(const n in i)s[n]=i[n];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const n in this.httpHeaders){const t=this.httpHeaders[n];void 0!==t&&e.setRequestHeader(n,t)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=fi):s.expectedStatus=pi,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==s.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===s.status&&this.isHttp)return void i.onError?.(s.status);const n=s.status||pi,r=n===pi&&i.expectedStatus===fi;if(!r&&n!==i.expectedStatus)return void i.onError?.(s.status);const o=gi(s);if(n===fi){const t=s.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);i.onDone({begin:parseInt(e[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class bi{constructor(t){this._source=t,this._manager=new mi(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return P(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vi(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new yi(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class vi{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=t=>e.getResponseHeader(t),{allowRangeRequests:s,suggestedLength:n}=si({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=ni(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){const e=this._requests.shift();e.resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ri(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){const t=this._cachedChunks.shift();return{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yi{constructor(t,e,i){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){const t=this._requests.shift();t.resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=ri(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const _i=/^file:\/\/\/[a-zA-Z]:\//;function xi(t){const e=re.get("url"),i=e.parse(t);return"file:"===i.protocol||i.host?i:/^[a-z]:[/\\]/i.test(t)?e.parse(`file:///${t}`):(i.host||(i.protocol="file:"),i)}class wi{constructor(t){this.source=t,this.url=xi(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return P(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ti(this):new Ci(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new ki(this,t,e):new Mi(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Ai{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength});const e=new Uint8Array(t).buffer;return{value:e,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new j("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Si{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,this.onProgress?.({loaded:this._loaded});const e=new Uint8Array(t).buffer;return{value:e,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function Ei(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class Ci extends Ai{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new B(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const i=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:s,suggestedLength:n}=si({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=n||this._contentLength,this._filename=ni(i)};if(this._request=null,"http:"===this._url.protocol){const i=re.get("http");this._request=i.request(Ei(this._url,t.httpHeaders),e)}else{const i=re.get("https");this._request=i.request(Ei(this._url,t.httpHeaders),e)}this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class Mi extends Si{constructor(t,e,i){super(t),this._httpHeaders={};for(const n in t.httpHeaders){const e=t.httpHeaders[n];void 0!==e&&(this._httpHeaders[n]=e)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const s=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new B(`Missing PDF "${this._url}".`);this._storedError=t}};if(this._request=null,"http:"===this._url.protocol){const t=re.get("http");this._request=t.request(Ei(this._url,this._httpHeaders),s)}else{const t=re.get("https");this._request=t.request(Ei(this._url,this._httpHeaders),s)}this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class Ti extends Ai{constructor(t){super(t);let e=decodeURIComponent(this._url.path);_i.test(this._url.href)&&(e=e.replace(/^\//,""));const i=re.get("fs");i.promises.lstat(e).then((t=>{this._contentLength=t.size,this._setReadableStream(i.createReadStream(e)),this._headersCapability.resolve()}),(t=>{"ENOENT"===t.code&&(t=new B(`Missing PDF "${e}".`)),this._storedError=t,this._headersCapability.reject(t)}))}}class ki extends Si{constructor(t,e,i){super(t);let s=decodeURIComponent(this._url.path);_i.test(this._url.href)&&(s=s.replace(/^\//,""));const n=re.get("fs");this._setReadableStream(n.createReadStream(s,{start:e,end:i-1}))}}const Pi=1e5,Li=30,Ii=.8;class Ri{#li=Promise.withResolvers();#Lt=null;#hi=!1;#ci=!!globalThis.FontInspector?.enabled;#di=null;#ui=null;#pi=0;#fi=0;#gi=null;#mi=null;#bi=0;#vi=0;#yi=Object.create(null);#_i=[];#xi=null;#wi=[];#Ai=new WeakMap;#Si=null;static#Ei=new Map;static#Ci=new Map;static#Mi=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#xi=t;else{if("object"!==typeof t)throw new Error('No "textContentSource" parameter specified.');this.#xi=new ReadableStream({start(e){e.enqueue(t),e.close()}})}this.#Lt=this.#mi=e,this.#vi=i.scale*(globalThis.devicePixelRatio||1),this.#bi=i.rotation,this.#ui={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:n,pageX:r,pageY:o}=i.rawDims;this.#Si=[1,0,0,-1,-r,o+n],this.#fi=s,this.#pi=n,Dt(e,i),this.#li.promise.catch((()=>{})).then((()=>{Ri.#Mi.delete(this),this.#ui=null,this.#yi=null}))}render(){const t=()=>{this.#gi.read().then((({value:e,done:i})=>{i?this.#li.resolve():(this.#di??=e.lang,Object.assign(this.#yi,e.styles),this.#Ti(e.items),t())}),this.#li.reject)};return this.#gi=this.#xi.getReader(),Ri.#Mi.add(this),t(),this.#li.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==this.#bi&&(e?.(),this.#bi=s,Dt(this.#mi,{rotation:s})),i!==this.#vi){e?.(),this.#vi=i;const t={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:Ri.#ki(this.#di)};for(const e of this.#wi)t.properties=this.#Ai.get(e),t.div=e,this.#Pi(t)}}cancel(){const t=new j("TextLayer task cancelled.");this.#gi?.cancel(t).catch((()=>{})),this.#gi=null,this.#li.reject(t)}get textDivs(){return this.#wi}get textContentItemsStr(){return this.#_i}#Ti(t){if(this.#hi)return;this.#ui.ctx||=Ri.#ki(this.#di);const e=this.#wi,i=this.#_i;for(const s of t){if(e.length>Pi)return T("Ignoring additional textDivs for performance reasons."),void(this.#hi=!0);if(void 0!==s.str)i.push(s.str),this.#Li(s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const t=this.#Lt;this.#Lt=document.createElement("span"),this.#Lt.classList.add("markedContent"),null!==s.id&&this.#Lt.setAttribute("id",`${s.id}`),t.append(this.#Lt)}else"endMarkedContent"===s.type&&(this.#Lt=this.#Lt.parentNode)}}#Li(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};this.#wi.push(e);const s=Y.transform(this.#Si,t.transform);let n=Math.atan2(s[1],s[0]);const r=this.#yi[t.fontName];r.vertical&&(n+=Math.PI/2);const o=this.#ci&&r.fontSubstitution||r.fontFamily,a=Math.hypot(s[2],s[3]),l=a*Ri.#Ii(o,this.#di);let h,c;0===n?(h=s[4],c=s[5]-l):(h=s[4]+l*Math.sin(n),c=s[5]-l*Math.cos(n));const d="calc(var(--scale-factor)*",u=e.style;this.#Lt===this.#mi?(u.left=`${(100*h/this.#fi).toFixed(2)}%`,u.top=`${(100*c/this.#pi).toFixed(2)}%`):(u.left=`${d}${h.toFixed(2)}px)`,u.top=`${d}${c.toFixed(2)}px)`),u.fontSize=`${d}${a.toFixed(2)}px)`,u.fontFamily=o,i.fontSize=a,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#ci&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),0!==n&&(i.angle=n*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(p=!0)}if(p&&(i.canvasWidth=r.vertical?t.height:t.width),this.#Ai.set(e,i),this.#ui.div=e,this.#ui.properties=i,this.#Pi(this.#ui),i.hasText&&this.#Lt.append(e),i.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this.#Lt.append(t)}}#Pi(t){const{div:e,properties:i,ctx:s,prevFontSize:n,prevFontFamily:r}=t,{style:o}=e;let a="";if(0!==i.canvasWidth&&i.hasText){const{fontFamily:l}=o,{canvasWidth:h,fontSize:c}=i;n===c&&r===l||(s.font=`${c*this.#vi}px ${l}`,t.prevFontSize=c,t.prevFontFamily=l);const{width:d}=s.measureText(e.textContent);d>0&&(a=`scaleX(${h*this.#vi/d})`)}0!==i.angle&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(o.transform=a)}static cleanup(){if(!(this.#Mi.size>0)){this.#Ei.clear();for(const{canvas:t}of this.#Ci.values())t.remove();this.#Ci.clear()}}static#ki(t=null){let e=this.#Ci.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1}),this.#Ci.set(t,e)}return e}static#Ii(t,e){const i=this.#Ei.get(t);if(i)return i;const s=this.#ki(e),n=s.font;s.canvas.width=s.canvas.height=Li,s.font=`${Li}px ${t}`;const r=s.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const e=o/(o+a);return this.#Ei.set(t,e),s.canvas.width=s.canvas.height=0,s.font=n,e}s.strokeStyle="red",s.clearRect(0,0,Li,Li),s.strokeText("g",0,0);let l=s.getImageData(0,0,Li,Li).data;a=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){a=Math.ceil(c/4/Li);break}s.clearRect(0,0,Li,Li),s.strokeText("A",0,Li),l=s.getImageData(0,0,Li,Li).data,o=0;for(let c=0,d=l.length;c<d;c+=4)if(l[c]>0){o=Li-Math.floor(c/4/Li);break}s.canvas.width=s.canvas.height=0,s.font=n;const h=o?o/(o+a):Ii;return this.#Ei.set(t,h),h}}function Di(){Ct("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:t,container:e,viewport:i,...s}=arguments[0],n=Object.keys(s);n.length>0&&T("Ignoring `renderTextLayer` parameters: "+n.join(", "));const r=new Ri({textContentSource:t,container:e,viewport:i}),{textDivs:o,textContentItemsStr:a}=r,l=r.render();return{promise:l,textDivs:o,textContentItemsStr:a}}function Oi(){Ct("`updateTextLayer`, please use `TextLayer` instead.")}class Fi{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(t){if(!t)return;let i=null;const n=t.name;if("#text"===n)i=t.value;else{if(!Fi.shouldBuildText(n))return;t?.attributes?.textContent?i=t.attributes.textContent:t.value&&(i=t.value)}if(null!==i&&e.push({str:i}),t.children)for(const e of t.children)s(e)}return s(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}const Ni=65536,Bi=100,zi=5e3,Hi=r?le:ut,ji=r?he:ft,$i=r?ae:dt,Ui=r?ce:gt;function Vi(t){if("string"===typeof t||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t}),"object"!==typeof t)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new qi,{docId:i}=e,s=t.url?Wi(t.url):null,n=t.data?Gi(t.data):null,o=t.httpHeaders||null,a=!0===t.withCredentials,l=t.password??null,h=t.range instanceof Xi?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:Ni;let d=t.worker instanceof ts?t.worker:null;const u=t.verbosity,p="string"!==typeof t.docBaseUrl||yt(t.docBaseUrl)?null:t.docBaseUrl,f="string"===typeof t.cMapUrl?t.cMapUrl:null,g=!1!==t.cMapPacked,m=t.CMapReaderFactory||ji,b="string"===typeof t.standardFontDataUrl?t.standardFontDataUrl:null,v=t.StandardFontDataFactory||Ui,y=!0!==t.stopAtErrors,_=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,x=!1!==t.isEvalSupported,w="boolean"===typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!r,A=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,S="boolean"===typeof t.disableFontFace?t.disableFontFace:r,C=!0===t.fontExtraProperties,M=!0===t.enableXfa,T=t.ownerDocument||globalThis.document,k=!0===t.disableRange,P=!0===t.disableStream,L=!0===t.disableAutoFetch,I=!0===t.pdfBug,R=h?h.length:t.length??NaN,D="boolean"===typeof t.useSystemFonts?t.useSystemFonts:!r&&!S,O="boolean"===typeof t.useWorkerFetch?t.useWorkerFetch:m===ft&&v===gt&&f&&b&&St(f,document.baseURI)&&St(b,document.baseURI),F=t.canvasFactory||new Hi({ownerDocument:T}),N=t.filterFactory||new $i({docId:i,ownerDocument:T}),B=null;E(u);const z={canvasFactory:F,filterFactory:N};if(O||(z.cMapReaderFactory=new m({baseUrl:f,isCompressed:g}),z.standardFontDataFactory=new v({baseUrl:b})),!d){const t={verbosity:u,port:Ve.workerPort};d=t.port?ts.fromPort(t):new ts(t),e._worker=d}const H={docId:i,apiVersion:"4.3.136",data:n,password:l,disableAutoFetch:L,rangeChunkSize:c,length:R,docBaseUrl:p,enableXfa:M,evaluatorOptions:{maxImageSize:_,disableFontFace:S,ignoreErrors:y,isEvalSupported:x,isOffscreenCanvasSupported:w,canvasMaxAreaInBytes:A,fontExtraProperties:C,useSystemFonts:D,cMapUrl:O?f:null,standardFontDataUrl:O?b:null}},j={disableFontFace:S,fontExtraProperties:C,ownerDocument:T,pdfBug:I,styleElement:B,loadingParams:{disableAutoFetch:L,enableXfa:M}};return d.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const t=d.messageHandler.sendWithPromise("GetDocRequest",H,n?[n.buffer]:null);let l;if(h)l=new Je(h,{disableRange:k,disableStream:P});else if(!n){const t=t=>{if(r){const e=function(){return"undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype};return e()&&St(t.url)?new ci(t):new wi(t)}return St(t.url)?new ci(t):new bi(t)};l=t({url:s,length:R,httpHeaders:o,withCredentials:a,rangeChunkSize:c,disableRange:k,disableStream:P})}return t.then((t=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const s=new qe(i,t,d.port),n=new es(s,e,l,j,z);e._transport=n,s.send("Ready",null)}))})).catch(e._capability.reject),e}function Wi(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(r&&"string"===typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Gi(t){if(r&&"undefined"!==typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"===typeof t)return U(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===typeof t&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ki(t){return"object"===typeof t&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0}class qi{static#n=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+qi.#n++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class Xi{constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){k("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Yi{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return R(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Qi{#Ri=null;#Di=!1;constructor(t,e,i,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new At:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new ss,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:n=!1}={}){return new bt({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return R(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=d.ENABLE,transform:n=null,background:r=null,optionalContentConfigPromise:o=null,annotationCanvasMap:a=null,pageColors:l=null,printAnnotationStorage:h=null}){this._stats?.time("Overall");const u=this._transport.getRenderingIntent(i,s,h),{renderingIntent:p,cacheKey:f}=u;this.#Di=!1,this.#Oi(),o||=this._transport.getOptionalContentConfig(p);let g=this._intentStates.get(f);g||(g=Object.create(null),this._intentStates.set(f,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const m=!!(p&c.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u));const b=t=>{g.renderTasks.delete(v),(this._maybeCleanupAfterRender||m)&&(this.#Di=!0),this.#Fi(!m),t?(v.capability.reject(t),this._abortOperatorList({intentState:g,reason:t instanceof Error?t:new Error(t)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new rs({callback:b,params:{canvasContext:t,viewport:e,transform:n,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:a,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:l});(g.renderTasks||=new Set).add(v);const y=v.task;return Promise.all([g.displayReadyCapability.promise,o]).then((([t,e])=>{if(this.destroyed)b();else{if(this._stats?.time("Rendering"),!(e.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:t,optionalContentConfig:e}),v.operatorListChanged()}})).catch(b),y}getOperatorList({intent:t="display",annotationMode:e=d.ENABLE,printAnnotationStorage:i=null}={}){function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(r))}const n=this._transport.getRenderingIntent(t,e,i,!0);let r,o=this._intentStates.get(n.cacheKey);return o||(o=Object.create(null),this._intentStates.set(n.cacheKey,o)),o.opListReadCapability||(r=Object.create(null),r.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(r),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(n)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){const i=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:i,size(t){return t.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>Fi.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){function s(){n.read().then((function({value:e,done:i}){i?t(r):(r.lang??=e.lang,Object.assign(r.styles,e.styles),r.items.push(...e.items),s())}),i)}const n=e.getReader(),r={items:[],styles:Object.create(null),lang:null};s()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#Di=!1,this.#Oi(),Promise.all(t)}cleanup(t=!1){this.#Di=!0;const e=this.#Fi(!1);return t&&e&&(this._stats&&=new At),e}#Fi(t=!1){if(this.#Oi(),!this.#Di||this.destroyed)return!1;if(t)return this.#Ri=setTimeout((()=>{this.#Ri=null,this.#Fi(!1)}),zi),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#Di=!1,!0}#Oi(){this.#Ri&&(clearTimeout(this.#Ri),this.#Ri=null)}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#Fi(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i}){const{map:s,transfer:n}=i,r=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s},n),o=r.getReader(),a=this._intentStates.get(e);a.streamReader=o;const l=()=>{o.read().then((({value:t,done:e})=>{e?a.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,a),l())}),(t=>{if(a.streamReader=null,!this._transport.destroyed){if(a.operatorList){a.operatorList.lastChunk=!0;for(const t of a.renderTasks)t.operatorListChanged();this.#Fi(!0)}if(a.displayReadyCapability)a.displayReadyCapability.reject(t);else{if(!a.opListReadCapability)throw t;a.opListReadCapability.reject(t)}}}))};l()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof vt){let i=Bi;return e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})}),i))}}if(t.streamReader.cancel(new j(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}class Zi{#Ni=new Set;#Bi=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#Bi.then((()=>{for(const t of this.#Ni)t.call(this,i)}))}addEventListener(t,e){this.#Ni.add(e)}removeEventListener(t,e){this.#Ni.delete(e)}terminate(){this.#Ni.clear()}}const Ji={isWorkerDisabled:!1,fakeWorkerId:0};r&&(Ji.isWorkerDisabled=!0,Ve.workerSrc||="./pdf.worker.mjs"),Ji.isSameOrigin=function(t,e){let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch{return!1}const s=new URL(e,i);return i.origin===s.origin},Ji.createCDNWrapper=function(t){const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};class ts{static#zi;constructor({name:t=null,port:e=null,verbosity:i=C()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(ts.#zi?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");return(ts.#zi||=new WeakMap).set(e,this),void this._initializeFromPort(e)}this._initialize()}get promise(){return r?Promise.all([re.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new qe("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!Ji.isWorkerDisabled&&!ts.#Hi){let{workerSrc:t}=ts;try{Ji.isSameOrigin(window.location.href,t)||(t=Ji.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new qe("main","worker",e),s=()=>{e.removeEventListener("error",n),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||s()};e.addEventListener("error",n),i.on("test",(t=>{e.removeEventListener("error",n),this.destroyed?s():t?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())})),i.on("ready",(t=>{if(e.removeEventListener("error",n),this.destroyed)s();else try{r()}catch{this._setupFakeWorker()}}));const r=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void r()}catch{M("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){Ji.isWorkerDisabled||(T("Setting up fake worker."),Ji.isWorkerDisabled=!0),ts._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new Zi;this._port=e;const i="fake"+Ji.fakeWorkerId++,s=new qe(i+"_worker",i,e);t.setup(s,e);const n=new qe(i,i+"_worker",e);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ts.#zi?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#zi?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ts(t)}static get workerSrc(){if(Ve.workerSrc)return Ve.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#Hi(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const t=async()=>{if(this.#Hi)return this.#Hi;const t=await import(this.workerSrc);return t.WorkerMessageHandler};return R(this,"_setupFakeWorkerGlobal",t())}}class es{#ji=new Map;#$i=new Map;#Ui=new Map;#Vi=new Map;#Wi=null;constructor(t,e,i,s,n){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new ss,this.fontLoader=new ee({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#Gi(t,e=null){const i=this.#ji.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return this.#ji.set(t,s),s}get annotationStorage(){return R(this,"annotationStorage",new Jt)}getRenderingIntent(t,e=d.ENABLE,i=null,s=!1){let n=c.DISPLAY,r=Zt;switch(t){case"any":n=c.ANY;break;case"display":break;case"print":n=c.PRINT;break;default:T(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case d.DISABLE:n+=c.ANNOTATIONS_DISABLE;break;case d.ENABLE:break;case d.ENABLE_FORMS:n+=c.ANNOTATIONS_FORMS;break;case d.ENABLE_STORAGE:n+=c.ANNOTATIONS_STORAGE;const t=n&c.PRINT&&i instanceof te?i:this.annotationStorage;r=t.serializable;break;default:T(`getRenderingIntent - invalid annotationMode: ${e}`)}return s&&(n+=c.OPLIST),{renderingIntent:n,cacheKey:`${n}_${r.hash}`,annotationStorageSerializable:r}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#Wi?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#$i.values())t.push(i._destroy());this.#$i.clear(),this.#Ui.clear(),this.#Vi.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#ji.clear(),this.filterFactory.destroy(),Ri.cleanup(),this._networkStream?.cancelAllRequests(new j("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{P(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:i}){i?e.close():(P(t instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=Promise.withResolvers(),s=this._fullReader;return s.headersReady.then((()=>{s.isStreamingSupported&&s.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),s.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),i.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,e)=>{P(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function({value:t,done:i}){i?e.close():(P(t instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new Yi(t,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new O(t.message,t.code);break;case"InvalidPDFException":i=new N(t.message);break;case"MissingPDFException":i=new B(t.message);break;case"UnexpectedResponseException":i=new z(t.message,t.status);break;case"UnknownErrorException":i=new F(t.message,t.details);break;default:k("DocException - expected a valid Error.")}e._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(this.#Wi=Promise.withResolvers(),e.onPassword){const s=t=>{t instanceof Error?this.#Wi.reject(t):this.#Wi.resolve({password:t})};try{e.onPassword(s,t.code)}catch(i){this.#Wi.reject(i)}}else this.#Wi.reject(new O(t.message,t.code));return this.#Wi.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{if(this.destroyed)return;const e=this.#$i.get(t.pageIndex);e._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,i,s])=>{if(this.destroyed)return null;if(this.commonObjs.has(e))return null;switch(i){case"Font":const{disableFontFace:n,fontExtraProperties:r,pdfBug:o}=this._params;if("error"in s){const t=s.error;T(`Error during font loading: ${t}`),this.commonObjs.resolve(e,t);break}const a=o&&globalThis.FontInspector?.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,l=new ie(s,{disableFontFace:n,inspectFont:a});this.fontLoader.bind(l).catch((()=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!r&&l.data&&(l.data=null),this.commonObjs.resolve(e,l)}));break;case"CopyLocalImage":const{imageRef:h}=s;P(h,"The imageRef must be defined.");for(const t of this.#$i.values())for(const[,i]of t.objs)if(i?.ref===h)return i.dataLen?(this.commonObjs.resolve(e,structuredClone(i)),i.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(e,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null})),t.on("obj",(([t,e,i,s])=>{if(this.destroyed)return;const n=this.#$i.get(e);if(!n.objs.has(t))if(0!==n._intentStates.size)switch(i){case"Image":n.objs.resolve(t,s),s?.dataLen>l&&(n._maybeCleanupAfterRender=!0);break;case"Pattern":n.objs.resolve(t,s);break;default:throw new Error(`Got unknown object type ${i}`)}else s?.bitmap?.close()})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&T("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#Ui.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&this.#Vi.set(i.refStr,t);const s=new Qi(e,i,this,this._params.pdfBug);return this.#$i.set(e,s),s}));return this.#Ui.set(e,s),s}getPageIndex(t){return Ki(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#Gi("GetFieldObjects")}hasJSActions(){return this.#Gi("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!==typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#Gi("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#Gi("GetOptionalContentConfig").then((e=>new Ze(e,t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#ji.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then((t=>({info:t[0],metadata:t[1]?new Xe(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})));return this.#ji.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#$i.values()){const e=t.cleanup();if(!e)throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`)}this.commonObjs.clear(),t||this.fontLoader.clear(),this.#ji.clear(),this.filterFactory.destroy(!0),Ri.cleanup()}}cachedPageNumber(t){if(!Ki(t))return null;const e=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return this.#Vi.get(e)??null}}const is=Symbol("INITIAL_DATA");class ss{#Ki=Object.create(null);#qi(t){return this.#Ki[t]||={...Promise.withResolvers(),data:is}}get(t,e=null){if(e){const i=this.#qi(t);return i.promise.then((()=>e(i.data))),null}const i=this.#Ki[t];if(!i||i.data===is)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#Ki[t];return!!e&&e.data!==is}resolve(t,e=null){const i=this.#qi(t);i.data=e,i.resolve()}clear(){for(const t in this.#Ki){const{data:e}=this.#Ki[t];e?.bitmap?.close()}this.#Ki=Object.create(null)}*[Symbol.iterator](){for(const t in this.#Ki){const{data:e}=this.#Ki[t];e!==is&&(yield[t,e])}}}class ns{#Xi=null;constructor(t){this.#Xi=t,this.onContinue=null}get promise(){return this.#Xi.capability.promise}cancel(t=0){this.#Xi.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#Xi.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#Xi;return t.form||t.canvas&&e?.size>0}}class rs{static#Yi=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:n,operatorList:r,pageIndex:o,canvasFactory:a,filterFactory:l,useRequestAnimationFrame:h=!1,pdfBug:c=!1,pageColors:d=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=o,this.canvasFactory=a,this.filterFactory=l,this._pdfBug=c,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new ns(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(rs.#Yi.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");rs.#Yi.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:n,background:r}=this.params;this.gfx=new Ue(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:n,viewport:s,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),rs.#Yi.delete(this._canvas),this.callback(t||new vt(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),rs.#Yi.delete(this._canvas),this.callback())))}}const os="4.3.136",as="0cec64437";function ls(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function hs(t){return Math.max(0,Math.min(255,255*t))}class cs{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=hs(t),[t,t,t]}static G_HTML([t]){const e=ls(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(hs)}static RGB_HTML(t){return`#${t.map(ls).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[hs(1-Math.min(1,t+s)),hs(1-Math.min(1,i+s)),hs(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,n=1-e,r=1-i,o=Math.min(s,n,r);return["CMYK",s,n,r,o]}}class ds{static setupStorage(t,e,i,s,n){const r=s.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===n)break;t.addEventListener("input",(t=>{s.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===n)break;t.addEventListener("change",(t=>{s.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===n)break;t.addEventListener("input",(t=>{s.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);for(const t of i.children)t.attributes.value===r.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{const i=t.target.options,n=-1===i.selectedIndex?"":i[i.selectedIndex].value;s.setValue(e,{value:n})}));break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:n}){const{attributes:r}=e,o=t instanceof HTMLAnchorElement;"radio"===r.type&&(r.name=`${r.name}-${s}`);for(const[a,l]of Object.entries(r))if(null!==l&&void 0!==l)switch(a){case"class":l.length&&t.setAttribute(a,l.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",l);break;case"style":Object.assign(t.style,l);break;case"textContent":t.textContent=l;break;default:(!o||"href"!==a&&"newWindow"!==a)&&t.setAttribute(a,l)}o&&n.addLinkAttributes(t,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(t,r.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,n=t.intent||"display",r=document.createElement(s.name);s.attributes&&this.setAttributes({html:r,element:s,intent:n,linkService:i});const o="richText"!==n,a=t.div;if(a.append(r),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;a.style.transform=e}o&&a.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===s.children.length){if(s.value){const t=document.createTextNode(s.value);r.append(t),o&&Fi.shouldBuildText(s.name)&&l.push(t)}return{textDivs:l}}const h=[[s,-1,r]];while(h.length>0){const[t,s,r]=h.at(-1);if(s+1===t.children.length){h.pop();continue}const a=t.children[++h.at(-1)[1]];if(null===a)continue;const{name:c}=a;if("#text"===c){const t=document.createTextNode(a.value);l.push(t),r.append(t);continue}const d=a?.attributes?.xmlns?document.createElementNS(a.attributes.xmlns,c):document.createElement(c);if(r.append(d),a.attributes&&this.setAttributes({html:d,element:a,storage:e,intent:n,linkService:i}),a.children?.length>0)h.push([a,-1,d]);else if(a.value){const t=document.createTextNode(a.value);o&&Fi.shouldBuildText(c)&&l.push(t),d.append(t)}}for(const c of a.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))c.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const us=1e3,ps=9,fs=new WeakSet;function gs(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class ms{static create(t){const e=t.data.annotationType;switch(e){case v.LINK:return new vs(t);case v.TEXT:return new ys(t);case v.WIDGET:const e=t.data.fieldType;switch(e){case"Tx":return new xs(t);case"Btn":return t.data.radioButton?new Ss(t):t.data.checkBox?new As(t):new Es(t);case"Ch":return new Cs(t);case"Sig":return new ws(t)}return new _s(t);case v.POPUP:return new Ms(t);case v.FREETEXT:return new ks(t);case v.LINE:return new Ps(t);case v.SQUARE:return new Ls(t);case v.CIRCLE:return new Is(t);case v.POLYLINE:return new Rs(t);case v.CARET:return new Os(t);case v.INK:return new Fs(t);case v.POLYGON:return new Ds(t);case v.HIGHLIGHT:return new Ns(t);case v.UNDERLINE:return new Bs(t);case v.SQUIGGLY:return new zs(t);case v.STRIKEOUT:return new Hs(t);case v.STAMP:return new js(t);case v.FILEATTACHMENT:return new $s(t);default:return new bs(t)}}}class bs{#Qi=null;#Zi=!1;#Ji=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get hasPopupData(){return bs._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#Qi||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#ts(e),this.#Ji?.popup.updateEdited(t)}resetEdited(){this.#Qi&&(this.#ts(this.#Qi.rect),this.#Ji?.popup.resetEdited(),this.#Qi=null)}#ts(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:a}}}}=this;i?.splice(0,4,...t);const{width:l,height:h}=gs(t);e.left=100*(t[0]-o)/n+"%",e.top=100*(r-t[3]+a)/r+"%",0===s?(e.width=100*l/n+"%",e.height=100*h/r+"%"):this.setRotation(s)}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",e.id),this instanceof _s||(n.tabIndex=us);const{style:r}=n;if(r.zIndex=this.parent.zIndex++,e.popupRef&&n.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(n.title=e.alternativeText),e.noRotate&&n.classList.add("norotate"),!e.rect||this instanceof Ms){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,n),n}const{width:o,height:a}=gs(e.rect);if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;r.borderRadius=e}else if(this instanceof Ss){const t=`calc(${o}px * var(--scale-factor)) / calc(${a}px * var(--scale-factor))`;r.borderRadius=t}switch(e.borderStyle.style){case y.SOLID:r.borderStyle="solid";break;case y.DASHED:r.borderStyle="dashed";break;case y.BEVELED:T("Unimplemented border style: beveled");break;case y.INSET:T("Unimplemented border style: inset");break;case y.UNDERLINE:r.borderBottomStyle="solid";break;default:break}const s=e.borderColor||null;s?(this.#Zi=!0,r.borderColor=Y.makeHexColor(0|s[0],0|s[1],0|s[2])):r.borderWidth=0}const l=Y.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:c,pageX:d,pageY:u}=s.rawDims;r.left=100*(l[0]-d)/h+"%",r.top=100*(l[1]-u)/c+"%";const{rotation:p}=e;return e.hasOwnCanvas||0===p?(r.width=100*o/h+"%",r.height=100*a/c+"%"):this.setRotation(p,n),n}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:n,height:r}=gs(this.data.rect);let o,a;t%180===0?(o=100*n/i,a=100*r/s):(o=100*r/i,a=100*n/s),e.style.width=`${o}%`,e.style.height=`${a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,i)=>{const s=i.detail[t],n=s[0],r=s.slice(1);i.target.style[e]=cs[`${n}_HTML`](r),this.annotationStorage.setValue(this.data.id,{[e]:cs[`${n}_rgb`](r)})};return R(this,"_commonActions",{display:t=>{const{display:e}=t.detail,i=e%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const n=t[s]||i[s];n?.(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,n]of Object.entries(e)){const r=i[s];if(r){const i={detail:{[s]:n},target:t};r(i),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,n]=this.data.rect;if(1===t.length){const[,{x:r,y:o},{x:a,y:l}]=t[0];if(s===r&&n===o&&e===a&&i===l)return}const{style:r}=this.container;let o;if(this.#Zi){const{borderColor:t,borderWidth:e}=r;r.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const a=s-e,l=n-i,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0);const d=h.createElement("defs");c.append(d);const u=h.createElement("clipPath"),p=`clippath_${this.data.id}`;u.setAttribute("id",p),u.setAttribute("clipPathUnits","objectBoundingBox"),d.append(u);for(const[,{x:f,y:g},{x:m,y:b}]of t){const t=h.createElement("rect"),i=(m-e)/a,s=(n-g)/l,r=(f-m)/a,c=(g-b)/l;t.setAttribute("x",i),t.setAttribute("y",s),t.setAttribute("width",r),t.setAttribute("height",c),u.append(t),o?.push(`<rect vector-effect="non-scaling-stroke" x="${i}" y="${s}" width="${r}" height="${c}"/>`)}this.#Zi&&(o.push("</g></svg>')"),r.backgroundImage=o.join("")),this.container.append(c),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=this.#Ji=new Ms({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){k("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:t,id:n,exportValues:r}of s){if(-1===t)continue;if(n===e)continue;const s="string"===typeof r?r:null,o=document.querySelector(`[data-element-id="${n}"]`);!o||fs.has(o)?i.push({id:n,exportValue:s,domElement:o}):T(`_getElementsByName - element not allowed: ${n}`)}return i}for(const s of document.getElementsByName(t)){const{exportValue:t}=s,n=s.getAttribute("data-element-id");n!==e&&(fs.has(s)&&i.push({id:n,exportValue:t,domElement:s}))}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}class vs extends bs{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action),s=!0):t.attachment?(this.#es(i,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(this.#is(i,t.setOCGState),s=!0):t.dest?(this._bindLink(i,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}#ss(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&this.#ss()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#ss()}#es(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#ss()}#is(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#ss()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const n=i.get(s);n&&(t[n]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}t.onclick||(t.onclick=()=>!1),this.#ss()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#ss(),!this._fieldObjects)return T('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=()=>!1));t.onclick=()=>{i?.();const{fields:t,refs:s,include:n}=e,r=[];if(0!==t.length||0!==s.length){const e=new Set(s);for(const i of t){const t=this._fieldObjects[i]||[];for(const{id:i}of t)e.add(i)}for(const t of Object.values(this._fieldObjects))for(const i of t)e.has(i.id)===n&&r.push(i)}else for(const e of Object.values(this._fieldObjects))r.push(...e);const o=this.annotationStorage,a=[];for(const e of r){const{id:t}=e;switch(a.push(t),e.type){case"text":{const i=e.defaultValue||"";o.setValue(t,{value:i});break}case"checkbox":case"radiobutton":{const i=e.defaultValue===e.exportValues;o.setValue(t,{value:i});break}case"combobox":case"listbox":{const i=e.defaultValue||"";o.setValue(t,{value:i});break}default:continue}const i=document.querySelector(`[data-element-id="${t}"]`);i&&(fs.has(i)?i.dispatchEvent(new Event("resetform")):T(`_bindResetFormAction - element not allowed: ${t}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:a,name:"ResetForm"}}),!1}}}class ys extends bs{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class _s extends bs{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&("CANVAS"===t.previousSibling?.nodeName&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return q.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,n){i.includes("mouse")?t.addEventListener(i,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(i,(t=>{if("blur"===i){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t)}})}))}_setEventListeners(t,e,i,s){for(const[n,r]of i)("Action"===r||this.data.actions?.[r])&&("Focus"!==r&&"Blur"!==r||(e||={focused:!1}),this._setEventListener(t,e,n,r,s),"Focus"!==r||this.data.actions?.Blur?"Blur"!==r||this.data.actions?.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":Y.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||ps,n=t.style;let r;const o=2,a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-o),e=Math.round(t/(h*s))||1,i=t/e;r=Math.min(s,a(i/h))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-o);r=Math.min(s,a(t/h))}n.fontSize=`calc(${r}px * var(--scale-factor))`,n.color=Y.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(n.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class xs extends _s{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const n=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),n.setValue(r.id,{[s]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const s=t.getValue(e,{value:this.data.fieldValue});let n=s.value||"";const r=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;r&&n.length>r&&(n=n.slice(0,r));let o=s.formattedValue||this.data.textContent?.join("\n")||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const a={userValue:n,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??n,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??n),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),fs.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=us,this._setRequired(i,this.data.required),r&&(i.maxLength=r),i.addEventListener("input",(s=>{t.setValue(e,{value:s.target.value}),this.setPropertyOnSiblings(i,"value",s.target.value,"value"),a.formattedValue=null})),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";i.value=a.userValue=e,a.formattedValue=null}));let l=t=>{const{formattedValue:e}=a;null!==e&&void 0!==e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",(t=>{if(a.focused)return;const{target:e}=t;a.userValue&&(e.value=a.userValue),a.lastCommittedValue=e.value,a.commitKey=1,this.data.actions?.Focus||(a.focused=!0)})),i.addEventListener("updatefromsandbox",(i=>{this.showElementAndHideCanvas(i.target);const s={value(i){a.userValue=i.detail.value??"",t.setValue(e,{value:a.userValue.toString()}),i.target.value=a.userValue},formattedValue(i){const{formattedValue:s}=i.detail;a.formattedValue=s,null!==s&&void 0!==s&&i.target!==document.activeElement&&(i.target.value=s),t.setValue(e,{formattedValue:s})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:i=>{const{charLimit:s}=i.detail,{target:n}=i;if(0===s)return void n.removeAttribute("maxLength");n.setAttribute("maxLength",s);let r=a.userValue;!r||r.length<=s||(r=r.slice(0,s),n.value=a.userValue=r,t.setValue(e,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:n.selectionStart,selEnd:n.selectionEnd}}))}};this._dispatchEventFromSandbox(s,i)})),i.addEventListener("keydown",(t=>{a.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(a.commitKey=3):i=2,-1===i)return;const{value:s}=t.target;a.lastCommittedValue!==s&&(a.lastCommittedValue=s,a.userValue=s,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const s=l;l=null,i.addEventListener("blur",(t=>{if(!a.focused||!t.relatedTarget)return;this.data.actions?.Blur||(a.focused=!1);const{value:i}=t.target;a.userValue=i,a.lastCommittedValue!==i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:a.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),s(t)})),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",(t=>{a.lastCommittedValue=null;const{data:i,target:s}=t,{value:n,selectionStart:r,selectionEnd:o}=s;let l=r,h=o;switch(t.inputType){case"deleteWordBackward":{const t=n.substring(0,r).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=n.substring(r).match(/^[^\w]*\w*/);t&&(h+=t[0].length);break}case"deleteContentBackward":r===o&&(l-=1);break;case"deleteContentForward":r===o&&(h+=1);break}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,change:i||"",willCommit:!1,selStart:l,selEnd:h}})})),this._setEventListeners(i,a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(l&&i.addEventListener("blur",l),this.data.comb){const t=this.data.rect[2]-this.data.rect[0],e=t/r;i.classList.add("comb"),i.style.letterSpacing=`calc(${e}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ws extends _s{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class As extends _s{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"===typeof s&&(s="Off"!==s,t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const n=document.createElement("input");return fs.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.setAttribute("exportValue",e.exportValue),n.tabIndex=us,n.addEventListener("change",(s=>{const{name:n,checked:r}=s.target;for(const o of this._getElementsByName(n,i)){const i=r&&o.exportValue===e.exportValue;o.domElement&&(o.domElement.checked=i),t.setValue(o.id,{value:i})}t.setValue(i,{value:r})})),n.addEventListener("resetform",(t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",(e=>{const s={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(s,e)})),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Ss extends _s{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"===typeof s&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const r of this._getElementsByName(e.fieldName,i))t.setValue(r.id,{value:!1});const n=document.createElement("input");if(fs.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.tabIndex=us,n.addEventListener("change",(e=>{const{name:s,checked:n}=e.target;for(const r of this._getElementsByName(s,i))t.setValue(r.id,{value:!1});t.setValue(i,{value:n})})),n.addEventListener("resetform",(t=>{const i=e.defaultFieldValue;t.target.checked=null!==i&&void 0!==i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const s=e.buttonValue;n.addEventListener("updatefromsandbox",(e=>{const n={value:e=>{const n=s===e.detail.value;for(const s of this._getElementsByName(e.target.name)){const e=n&&s.id===i;s.domElement&&(s.domElement.checked=e),t.setValue(s.id,{value:e})}}};this._dispatchEventFromSandbox(n,e)})),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Es extends vs{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class Cs extends _s{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");fs.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=us;let n=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const i of s.options)i.selected=i.value===e}));for(const h of this.data.options){const t=document.createElement("option");t.textContent=h.displayValue,t.value=h.exportValue,i.value.includes(h.exportValue)&&(t.setAttribute("selected",!0),n=!1),s.append(t)}let r=null;if(n){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),s.prepend(t),r=()=>{t.remove(),s.removeEventListener("input",r),r=null},s.addEventListener("input",r)}const o=t=>{const e=t?"value":"textContent",{options:i,multiple:n}=s;return n?Array.prototype.filter.call(i,(t=>t.selected)).map((t=>t[e])):-1===i.selectedIndex?null:i[i.selectedIndex][e]};let a=o(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",(i=>{const n={value(i){r?.();const n=i.detail.value,l=new Set(Array.isArray(n)?n:[n]);for(const t of s.options)t.selected=l.has(t.value);t.setValue(e,{value:o(!0)}),a=o(!1)},multipleSelection(t){s.multiple=!0},remove(i){const n=s.options,r=i.detail.remove;if(n[r].selected=!1,s.remove(r),n.length>0){const t=Array.prototype.findIndex.call(n,(t=>t.selected));-1===t&&(n[0].selected=!0)}t.setValue(e,{value:o(!0),items:l(i)}),a=o(!1)},clear(i){while(0!==s.length)s.remove(0);t.setValue(e,{value:null,items:[]}),a=o(!1)},insert(i){const{index:n,displayValue:r,exportValue:h}=i.detail.insert,c=s.children[n],d=document.createElement("option");d.textContent=r,d.value=h,c?c.before(d):s.append(d),t.setValue(e,{value:o(!0),items:l(i)}),a=o(!1)},items(i){const{items:n}=i.detail;while(0!==s.length)s.remove(0);for(const t of n){const{displayValue:e,exportValue:i}=t,n=document.createElement("option");n.textContent=e,n.value=i,s.append(n)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:o(!0),items:l(i)}),a=o(!1)},indices(i){const s=new Set(i.detail.indices);for(const t of i.target.options)t.selected=s.has(t.index);t.setValue(e,{value:o(!0)}),a=o(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(n,i)})),s.addEventListener("input",(i=>{const s=o(!0),n=o(!1);t.setValue(e,{value:s}),i.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,change:n,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):s.addEventListener("input",(function(i){t.setValue(e,{value:o(!0)})})),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Ms extends bs{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:bs._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Ts({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>`${it}${t}`)).join(",")),this.container}}class Ts{#ns=this.#rs.bind(this);#os=this.#as.bind(this);#ls=this.#hs.bind(this);#cs=this.#ds.bind(this);#us=null;#Lt=null;#ps=null;#fs=null;#gs=null;#ms=null;#bs=null;#vs=!1;#ys=null;#B=null;#_s=null;#xs=null;#ws=null;#Qi=null;#As=!1;constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:n,contentsObj:r,richText:o,parent:a,rect:l,parentRect:h,open:c}){this.#Lt=t,this.#ws=s,this.#ps=r,this.#xs=o,this.#ms=a,this.#us=e,this.#_s=l,this.#bs=h,this.#gs=i,this.#fs=Tt.toDateObject(n),this.trigger=i.flatMap((t=>t.getElementsToTriggerPopup()));for(const d of this.trigger)d.addEventListener("click",this.#cs),d.addEventListener("mouseenter",this.#ls),d.addEventListener("mouseleave",this.#os),d.classList.add("popupTriggerArea");for(const d of i)d.container?.addEventListener("keydown",this.#ns);this.#Lt.hidden=!0,c&&this.#ds()}render(){if(this.#ys)return;const t=this.#ys=document.createElement("div");if(t.className="popup",this.#us){const e=t.style.outlineColor=Y.makeHexColor(...this.#us);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`;else{const e=.7;t.style.backgroundColor=Y.makeHexColor(...this.#us.map((t=>Math.floor(e*(255-t)+t))))}}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),({dir:i.dir,str:i.textContent}=this.#ws),t.append(e),this.#fs){const t=document.createElement("span");t.classList.add("popupDate"),t.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),t.setAttribute("data-l10n-args",JSON.stringify({date:this.#fs.toLocaleDateString(),time:this.#fs.toLocaleTimeString()})),e.append(t)}const s=this.#Ss;if(s)ds.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const e=this._formatContents(this.#ps);t.append(e)}this.#Lt.append(t)}get#Ss(){const t=this.#xs,e=this.#ps;return!t?.str||e?.str&&e.str!==t.str?null:this.#xs.html||null}get#Es(){return this.#Ss?.attributes?.style?.fontSize||0}get#Cs(){return this.#Ss?.attributes?.style?.color||null}#Ms(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#Cs,fontSize:this.#Es?`calc(${this.#Es}px * var(--scale-factor))`:""}};for(const n of t.split("\n"))e.push({name:"span",value:n,attributes:s});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let n=0,r=s.length;n<r;++n){const t=s[n];i.append(document.createTextNode(t)),n<r-1&&i.append(document.createElement("br"))}return i}#rs(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&this.#vs)&&this.#ds()}updateEdited({rect:t,popupContent:e}){this.#Qi||={contentsObj:this.#ps,richText:this.#xs},t&&(this.#B=null),e&&(this.#xs=this.#Ms(e),this.#ps=null),this.#ys?.remove(),this.#ys=null}resetEdited(){this.#Qi&&(({contentsObj:this.#ps,richText:this.#xs}=this.#Qi),this.#Qi=null,this.#ys?.remove(),this.#ys=null,this.#B=null)}#Ts(){if(null!==this.#B)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:n}}}=this.#ms;let r=!!this.#bs,o=r?this.#bs:this.#_s;for(const p of this.#gs)if(!o||null!==Y.intersect(p.data.rect,o)){o=p.data.rect,r=!0;break}const a=Y.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),l=5,h=r?o[2]-o[0]+l:0,c=a[0]+h,d=a[1];this.#B=[100*(c-s)/e,100*(d-n)/i];const{style:u}=this.#Lt;u.left=`${this.#B[0]}%`,u.top=`${this.#B[1]}%`}#ds(){this.#vs=!this.#vs,this.#vs?(this.#hs(),this.#Lt.addEventListener("click",this.#cs),this.#Lt.addEventListener("keydown",this.#ns)):(this.#as(),this.#Lt.removeEventListener("click",this.#cs),this.#Lt.removeEventListener("keydown",this.#ns))}#hs(){this.#ys||this.render(),this.isVisible?this.#vs&&this.#Lt.classList.add("focused"):(this.#Ts(),this.#Lt.hidden=!1,this.#Lt.style.zIndex=parseInt(this.#Lt.style.zIndex)+1e3)}#as(){this.#Lt.classList.remove("focused"),!this.#vs&&this.isVisible&&(this.#Lt.hidden=!0,this.#Lt.style.zIndex=parseInt(this.#Lt.style.zIndex)-1e3)}forceHide(){this.#As=this.isVisible,this.#As&&(this.#Lt.hidden=!0)}maybeShow(){this.#As&&(this.#ys||this.#hs(),this.#As=!1,this.#Lt.hidden=!1)}get isVisible(){return!1===this.#Lt.hidden}}class ks extends bs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=p.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Ps extends bs{#ks=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=gs(t.rect),s=this.svgFactory.create(e,i,!0),n=this.#ks=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),s.append(n),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#ks}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ls extends bs{#Ps=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=gs(t.rect),s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,r=this.#Ps=this.svgFactory.createElement("svg:rect");return r.setAttribute("x",n/2),r.setAttribute("y",n/2),r.setAttribute("width",e-n),r.setAttribute("height",i-n),r.setAttribute("stroke-width",n||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Ps}addHighlightArea(){this.container.classList.add("highlightArea")}}class Is extends bs{#Ls=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=gs(t.rect),s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,r=this.#Ls=this.svgFactory.createElement("svg:ellipse");return r.setAttribute("cx",e/2),r.setAttribute("cy",i/2),r.setAttribute("rx",e/2-n/2),r.setAttribute("ry",i/2-n/2),r.setAttribute("stroke-width",n||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Ls}addHighlightArea(){this.container.classList.add("highlightArea")}}class Rs extends bs{#Is=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:i}=gs(t.rect),s=this.svgFactory.create(e,i,!0);let n=[];for(const o of t.vertices){const e=o.x-t.rect[0],i=t.rect[3]-o.y;n.push(e+","+i)}n=n.join(" ");const r=this.#Is=this.svgFactory.createElement(this.svgElementName);return r.setAttribute("points",n),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Is}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ds extends Rs{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Os extends bs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Fs extends bs{#Rs=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=p.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:i}=gs(t.rect),s=this.svgFactory.create(e,i,!0);for(const n of t.inkLists){let e=[];for(const s of n){const i=s.x-t.rect[0],n=t.rect[3]-s.y;e.push(`${i},${n}`)}e=e.join(" ");const i=this.svgFactory.createElement(this.svgElementName);this.#Rs.push(i),i.setAttribute("points",e),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),s.append(i)}return this.container.append(s),this.container}getElementsToTriggerPopup(){return this.#Rs}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ns extends bs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Bs extends bs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class zs extends bs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Hs extends bs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class js extends bs{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class $s extends bs{#Ds=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#Os.bind(this)),this.#Ds=i;const{isMac:s}=q.platform;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(s?t.metaKey:t.ctrlKey)&&this.#Os()})),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#Ds}addHighlightArea(){this.container.classList.add("highlightArea")}#Os(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Us{#Fs=null;#Ns=null;#Bs=new Map;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:n,viewport:r}){this.div=t,this.#Fs=e,this.#Ns=i,this.page=n,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=s}#zs(t,e){const i=t.firstChild||t;i.id=`${it}${e}`,this.div.append(t),this.#Fs?.moveElementInDOM(this.div,t,i,!1)}async render(t){const{annotations:e}=t,i=this.div;Dt(i,this.viewport);const s=new Map,n={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new mt,annotationStorage:t.annotationStorage||new Jt,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const r of e){if(r.noHTML)continue;const t=r.annotationType===v.POPUP;if(t){const t=s.get(r.id);if(!t)continue;n.elements=t}else{const{width:t,height:e}=gs(r.rect);if(t<=0||e<=0)continue}n.data=r;const e=ms.create(n);if(!e.isRenderable)continue;if(!t&&r.popupRef){const t=s.get(r.popupRef);t?t.push(e):s.set(r.popupRef,[e])}const i=e.render();r.hidden&&(i.style.visibility="hidden"),this.#zs(i,r.id),e.annotationEditorType>0&&(this.#Bs.set(e.data.id,e),this._annotationEditorUIManager?.renderAnnotationElement(e))}this.#Hs()}update({viewport:t}){const e=this.div;this.viewport=t,Dt(e,{rotation:t.rotation}),this.#Hs(),e.hidden=!1}#Hs(){if(!this.#Ns)return;const t=this.div;for(const[e,i]of this.#Ns){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:n}=s;n?"CANVAS"===n.nodeName?n.replaceWith(i):n.classList.contains("annotationContent")?n.after(i):n.before(i):s.append(i)}this.#Ns.clear()}getEditableAnnotations(){return Array.from(this.#Bs.values())}getEditableAnnotation(t){return this.#Bs.get(t)}}const Vs=/\r\n?|\n/g;class Ws extends Gt{#js=this.editorDivBlur.bind(this);#$s=this.editorDivFocus.bind(this);#Us=this.editorDivInput.bind(this);#Vs=this.editorDivKeydown.bind(this);#Ws=this.editorDivPaste.bind(this);#us;#Gs="";#Ks=`${this.id}-editor`;#Es;#qs=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ws.prototype,e=t=>t.isEmpty(),i=Vt.TRANSLATE_SMALL,s=Vt.TRANSLATE_BIG;return R(this,"_keyboardManager",new $t([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=p.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#us=t.color||Ws._defaultColor||Gt._defaultLineColor,this.#Es=t.fontSize||Ws._defaultFontSize}static initialize(t,e){Gt.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case f.FREETEXT_SIZE:Ws._defaultFontSize=e;break;case f.FREETEXT_COLOR:Ws._defaultColor=e;break}}updateParams(t,e){switch(t){case f.FREETEXT_SIZE:this.#Xs(e);break;case f.FREETEXT_COLOR:this.#Ys(e);break}}static get defaultPropertiesToUpdate(){return[[f.FREETEXT_SIZE,Ws._defaultFontSize],[f.FREETEXT_COLOR,Ws._defaultColor||Gt._defaultLineColor]]}get propertiesToUpdate(){return[[f.FREETEXT_SIZE,this.#Es],[f.FREETEXT_COLOR,this.#us]]}#Xs(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#Es)*this.parentScale),this.#Es=t,this.#Qs()},i=this.#Es;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:f.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Ys(t){const e=t=>{this.#us=this.editorDiv.style.color=t},i=this.#us;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:f.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ws._internalPadding*t,-(Ws._internalPadding+this.#Es)*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(p.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#Vs),this.editorDiv.addEventListener("focus",this.#$s),this.editorDiv.addEventListener("blur",this.#js),this.editorDiv.addEventListener("input",this.#Us),this.editorDiv.addEventListener("paste",this.#Ws))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#Ks),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#Vs),this.editorDiv.removeEventListener("focus",this.#$s),this.editorDiv.removeEventListener("blur",this.#js),this.editorDiv.removeEventListener("input",this.#Us),this.editorDiv.removeEventListener("paste",this.#Ws),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#Zs(){const t=[];this.editorDiv.normalize();for(const e of this.editorDiv.childNodes)t.push(Ws.#Js(e));return t.join("\n")}#Qs(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,s=e.style.display,n=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),i=e.getBoundingClientRect(),e.remove(),e.style.display=s,e.classList.toggle("hidden",n)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#Gs,e=this.#Gs=this.#Zs().trimEnd();if(t===e)return;const i=t=>{this.#Gs=t,t?(this.#tn(),this._uiManager.rebuild(this),this.#Qs()):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#Qs()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ws._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#Ks),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Gt._l10nPromise.get("pdfjs-free-text-default-content").then((t=>this.editorDiv?.setAttribute("default-content",t))),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#Es}px * var(--scale-factor))`,i.color=this.#us,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Nt(this,this.div,["dblclick","keydown"]),this.width){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:n}=this.#qs;let[r,o]=this.getInitialTranslation();[r,o]=this.pageTranslationToScreen(r,o);const[a,l]=this.pageDimensions,[h,c]=this.pageTranslation;let d,u;switch(this.rotation){case 0:d=t+(n[0]-h)/a,u=e+this.height-(n[1]-c)/l;break;case 90:d=t+(n[0]-h)/a,u=e-(n[1]-c)/l,[r,o]=[o,-r];break;case 180:d=t-this.width+(n[0]-h)/a,u=e-(n[1]-c)/l,[r,o]=[-r,-o];break;case 270:d=t+(n[0]-h-this.height*l)/a,u=e+(n[1]-c-this.width*a)/l,[r,o]=[-o,r];break}this.setAt(d*i,u*s,r,o)}else this.setAt(t*i,e*s,this.width*i,this.height*s);this.#tn(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#Js(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Vs,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(1===i.length&&"text/plain"===i[0])return;t.preventDefault();const s=Ws.#en(e.getData("text")||"").replaceAll(Vs,"\n");if(!s)return;const n=window.getSelection();if(!n.rangeCount)return;this.editorDiv.normalize(),n.deleteFromDocument();const r=n.getRangeAt(0);if(!s.includes("\n"))return r.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),void n.collapseToStart();const{startContainer:o,startOffset:a}=r,l=[],h=[];if(o.nodeType===Node.TEXT_NODE){const t=o.parentElement;if(h.push(o.nodeValue.slice(a).replaceAll(Vs,"")),t!==this.editorDiv){let e=l;for(const i of this.editorDiv.childNodes)i!==t?e.push(Ws.#Js(i)):e=h}l.push(o.nodeValue.slice(0,a).replaceAll(Vs,""))}else if(o===this.editorDiv){let t=l,e=0;for(const i of this.editorDiv.childNodes)e++===a&&(t=h),t.push(Ws.#Js(i))}this.#Gs=`${l.join("\n")}${s}${h.join("\n")}`,this.#tn();const c=new Range;let d=l.reduce(((t,e)=>t+e.length),0);for(const{firstChild:u}of this.editorDiv.childNodes)if(u.nodeType===Node.TEXT_NODE){const t=u.nodeValue.length;if(d<=t){c.setStart(u,d),c.setEnd(u,d);break}d-=t}n.removeAllRanges(),n.addRange(c)}#tn(){if(this.editorDiv.replaceChildren(),this.#Gs)for(const t of this.#Gs.split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#in(){return this.#Gs.replaceAll(" "," ")}static#en(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){let s=null;if(t instanceof ks){const{data:{defaultAppearanceData:{fontSize:e,fontColor:i},rect:n,rotation:r,id:o},textContent:a,textPosition:l,parent:{page:{pageNumber:h}}}=t;if(!a||0===a.length)return null;s=t={annotationType:p.FREETEXT,color:Array.from(i),fontSize:e,value:a.join("\n"),position:l,pageIndex:h-1,rect:n.slice(0),rotation:r,id:o,deleted:!1}}const n=super.deserialize(t,e,i);return n.#Es=t.fontSize,n.#us=Y.makeHexColor(...t.color),n.#Gs=Ws.#en(t.value),n.annotationElementId=t.id||null,n.#qs=s,n}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=Ws._internalPadding*this.parentScale,i=this.getRect(e,e),s=Gt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#us),n={annotationType:p.FREETEXT,color:s,fontSize:this.#Es,value:this.#in(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?n:this.annotationElementId&&!this.#sn(n)?null:(n.id=this.annotationElementId,n)}#sn(t){const{value:e,fontSize:i,color:s,pageIndex:n}=this.#qs;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some(((t,e)=>t!==s[e]))||t.pageIndex!==n}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#Es}px * var(--scale-factor))`,i.color=this.#us,e.replaceChildren();for(const n of this.#Gs.split("\n")){const t=document.createElement("div");t.append(n?document.createTextNode(n):document.createElement("br")),e.append(t)}const s=Ws._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:this.#Gs}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Gs{#nn;#rn=[];#on=[];constructor(t,e=0,i=0,s=!0){let n=1/0,r=-1/0,o=1/0,a=-1/0;const l=4,h=10**-l;for(const{x:m,y:b,width:v,height:y}of t){const t=Math.floor((m-e)/h)*h,i=Math.ceil((m+v+e)/h)*h,s=Math.floor((b-e)/h)*h,l=Math.ceil((b+y+e)/h)*h,c=[t,s,l,!0],d=[i,s,l,!1];this.#rn.push(c,d),n=Math.min(n,t),r=Math.max(r,i),o=Math.min(o,s),a=Math.max(a,l)}const c=r-n+2*i,d=a-o+2*i,u=n-i,p=o-i,f=this.#rn.at(s?-1:-2),g=[f[0],f[2]];for(const m of this.#rn){const[t,e,i]=m;m[0]=(t-u)/c,m[1]=(e-p)/d,m[2]=(i-p)/d}this.#nn={x:u,y:p,width:c,height:d,lastPoint:g}}getOutlines(){this.#rn.sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));const t=[];for(const e of this.#rn)e[3]?(t.push(...this.#an(e)),this.#ln(e)):(this.#hn(e),t.push(...this.#an(e)));return this.#cn(t)}#cn(t){const e=[],i=new Set;for(const r of t){const[t,i,s]=r;e.push([t,i,r],[t,s,r])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let r=0,o=e.length;r<o;r+=2){const t=e[r][2],s=e[r+1][2];t.push(s),s.push(t),i.add(t),i.add(s)}const s=[];let n;while(i.size>0){const t=i.values().next().value;let[e,r,o,a,l]=t;i.delete(t);let h=e,c=r;n=[e,o],s.push(n);while(1){let t;if(i.has(a))t=a;else{if(!i.has(l))break;t=l}i.delete(t),[e,r,o,a,l]=t,h!==e&&(n.push(h,c,e,c===r?r:o),h=e),c=c===r?o:r}n.push(h,c)}return new qs(s,this.#nn)}#dn(t){const e=this.#on;let i=0,s=e.length-1;while(i<=s){const n=i+s>>1,r=e[n][0];if(r===t)return n;r<t?i=n+1:s=n-1}return s+1}#ln([,t,e]){const i=this.#dn(t);this.#on.splice(i,0,[t,e])}#hn([,t,e]){const i=this.#dn(t);for(let s=i;s<this.#on.length;s++){const[i,n]=this.#on[s];if(i!==t)break;if(i===t&&n===e)return void this.#on.splice(s,1)}for(let s=i-1;s>=0;s--){const[i,n]=this.#on[s];if(i!==t)break;if(i===t&&n===e)return void this.#on.splice(s,1)}}#an(t){const[e,i,s]=t,n=[[e,i,s]],r=this.#dn(s);for(let o=0;o<r;o++){const[t,i]=this.#on[o];for(let s=0,r=n.length;s<r;s++){const[,o,a]=n[s];if(!(i<=o||a<=t))if(o>=t)if(a>i)n[s][1]=i;else{if(1===r)return[];n.splice(s,1),s--,r--}else n[s][2]=t,a>i&&n.push([e,i,a])}}return n}}class Ks{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Ys}}class qs extends Ks{#nn;#un;constructor(t,e){super(),this.#un=t,this.#nn=e}toSVGPath(){const t=[];for(const e of this.#un){let[i,s]=e;t.push(`M${i} ${s}`);for(let n=2;n<e.length;n+=2){const r=e[n],o=e[n+1];r===i?(t.push(`V${o}`),s=o):o===s&&(t.push(`H${r}`),i=r)}t.push("Z")}return t.join(" ")}serialize([t,e,i,s],n){const r=[],o=i-t,a=s-e;for(const l of this.#un){const e=new Array(l.length);for(let i=0;i<l.length;i+=2)e[i]=t+l[i]*o,e[i+1]=s-l[i+1]*a;r.push(e)}return r}get box(){return this.#nn}}class Xs{#nn;#pn=[];#fn;#gn;#mn=[];#bn=new Float64Array(18);#vn;#yn;#_n;#xn;#wn;#An;#Sn=[];static#En=8;static#Cn=2;static#Mn=Xs.#En+Xs.#Cn;constructor({x:t,y:e},i,s,n,r,o=0){this.#nn=i,this.#An=n*s,this.#gn=r,this.#bn.set([NaN,NaN,NaN,NaN,t,e],6),this.#fn=o,this.#xn=Xs.#En*s,this.#_n=Xs.#Mn*s,this.#wn=s,this.#Sn.push(t,e)}get free(){return!0}isEmpty(){return isNaN(this.#bn[8])}#Tn(){const t=this.#bn.subarray(4,6),e=this.#bn.subarray(16,18),[i,s,n,r]=this.#nn;return[(this.#vn+(t[0]-e[0])/2-i)/n,(this.#yn+(t[1]-e[1])/2-s)/r,(this.#vn+(e[0]-t[0])/2-i)/n,(this.#yn+(e[1]-t[1])/2-s)/r]}add({x:t,y:e}){this.#vn=t,this.#yn=e;const[i,s,n,r]=this.#nn;let[o,a,l,h]=this.#bn.subarray(8,12);const c=t-l,d=e-h,u=Math.hypot(c,d);if(u<this.#_n)return!1;const p=u-this.#xn,f=p/u,g=f*c,m=f*d;let b=o,v=a;o=l,a=h,l+=g,h+=m,this.#Sn?.push(t,e);const y=-m/p,_=g/p,x=y*this.#An,w=_*this.#An;if(this.#bn.set(this.#bn.subarray(2,8),0),this.#bn.set([l+x,h+w],4),this.#bn.set(this.#bn.subarray(14,18),12),this.#bn.set([l-x,h-w],16),isNaN(this.#bn[6]))return 0===this.#mn.length&&(this.#bn.set([o+x,a+w],2),this.#mn.push(NaN,NaN,NaN,NaN,(o+x-i)/n,(a+w-s)/r),this.#bn.set([o-x,a-w],14),this.#pn.push(NaN,NaN,NaN,NaN,(o-x-i)/n,(a-w-s)/r)),this.#bn.set([b,v,o,a,l,h],6),!this.isEmpty();this.#bn.set([b,v,o,a,l,h],6);const A=Math.abs(Math.atan2(v-a,b-o)-Math.atan2(m,g));return A<Math.PI/2?([o,a,l,h]=this.#bn.subarray(2,6),this.#mn.push(NaN,NaN,NaN,NaN,((o+l)/2-i)/n,((a+h)/2-s)/r),[o,a,b,v]=this.#bn.subarray(14,18),this.#pn.push(NaN,NaN,NaN,NaN,((b+o)/2-i)/n,((v+a)/2-s)/r),!0):([b,v,o,a,l,h]=this.#bn.subarray(0,6),this.#mn.push(((b+5*o)/6-i)/n,((v+5*a)/6-s)/r,((5*o+l)/6-i)/n,((5*a+h)/6-s)/r,((o+l)/2-i)/n,((a+h)/2-s)/r),[l,h,o,a,b,v]=this.#bn.subarray(12,18),this.#pn.push(((b+5*o)/6-i)/n,((v+5*a)/6-s)/r,((5*o+l)/6-i)/n,((5*a+h)/6-s)/r,((o+l)/2-i)/n,((a+h)/2-s)/r),!0)}toSVGPath(){if(this.isEmpty())return"";const t=this.#mn,e=this.#pn,i=this.#bn.subarray(4,6),s=this.#bn.subarray(16,18),[n,r,o,a]=this.#nn,[l,h,c,d]=this.#Tn();if(isNaN(this.#bn[6])&&!this.isEmpty())return`M${(this.#bn[2]-n)/o} ${(this.#bn[3]-r)/a} L${(this.#bn[4]-n)/o} ${(this.#bn[5]-r)/a} L${l} ${h} L${c} ${d} L${(this.#bn[16]-n)/o} ${(this.#bn[17]-r)/a} L${(this.#bn[14]-n)/o} ${(this.#bn[15]-r)/a} Z`;const u=[];u.push(`M${t[4]} ${t[5]}`);for(let p=6;p<t.length;p+=6)isNaN(t[p])?u.push(`L${t[p+4]} ${t[p+5]}`):u.push(`C${t[p]} ${t[p+1]} ${t[p+2]} ${t[p+3]} ${t[p+4]} ${t[p+5]}`);u.push(`L${(i[0]-n)/o} ${(i[1]-r)/a} L${l} ${h} L${c} ${d} L${(s[0]-n)/o} ${(s[1]-r)/a}`);for(let p=e.length-6;p>=6;p-=6)isNaN(e[p])?u.push(`L${e[p+4]} ${e[p+5]}`):u.push(`C${e[p]} ${e[p+1]} ${e[p+2]} ${e[p+3]} ${e[p+4]} ${e[p+5]}`);return u.push(`L${e[4]} ${e[5]} Z`),u.join(" ")}getOutlines(){const t=this.#mn,e=this.#pn,i=this.#bn,s=i.subarray(4,6),n=i.subarray(16,18),[r,o,a,l]=this.#nn,h=new Float64Array((this.#Sn?.length??0)+2);for(let m=0,b=h.length-2;m<b;m+=2)h[m]=(this.#Sn[m]-r)/a,h[m+1]=(this.#Sn[m+1]-o)/l;h[h.length-2]=(this.#vn-r)/a,h[h.length-1]=(this.#yn-o)/l;const[c,d,u,p]=this.#Tn();if(isNaN(i[6])&&!this.isEmpty()){const t=new Float64Array(36);return t.set([NaN,NaN,NaN,NaN,(i[2]-r)/a,(i[3]-o)/l,NaN,NaN,NaN,NaN,(i[4]-r)/a,(i[5]-o)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,u,p,NaN,NaN,NaN,NaN,(i[16]-r)/a,(i[17]-o)/l,NaN,NaN,NaN,NaN,(i[14]-r)/a,(i[15]-o)/l],0),new Ys(t,h,this.#nn,this.#wn,this.#fn,this.#gn)}const f=new Float64Array(this.#mn.length+24+this.#pn.length);let g=t.length;for(let m=0;m<g;m+=2)isNaN(t[m])?f[m]=f[m+1]=NaN:(f[m]=t[m],f[m+1]=t[m+1]);f.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,u,p,NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/l],g),g+=24;for(let m=e.length-6;m>=6;m-=6)for(let t=0;t<6;t+=2)isNaN(e[m+t])?(f[g]=f[g+1]=NaN,g+=2):(f[g]=e[m+t],f[g+1]=e[m+t+1],g+=2);return f.set([NaN,NaN,NaN,NaN,e[4],e[5]],g),new Ys(f,h,this.#nn,this.#wn,this.#fn,this.#gn)}}class Ys extends Ks{#nn;#kn=null;#fn;#gn;#Sn;#wn;#Pn;constructor(t,e,i,s,n,r){super(),this.#Pn=t,this.#Sn=e,this.#nn=i,this.#wn=s,this.#fn=n,this.#gn=r,this.#Ln(r);const{x:o,y:a,width:l,height:h}=this.#kn;for(let c=0,d=t.length;c<d;c+=2)t[c]=(t[c]-o)/l,t[c+1]=(t[c+1]-a)/h;for(let c=0,d=e.length;c<d;c+=2)e[c]=(e[c]-o)/l,e[c+1]=(e[c+1]-a)/h}toSVGPath(){const t=[`M${this.#Pn[4]} ${this.#Pn[5]}`];for(let e=6,i=this.#Pn.length;e<i;e+=6)isNaN(this.#Pn[e])?t.push(`L${this.#Pn[e+4]} ${this.#Pn[e+5]}`):t.push(`C${this.#Pn[e]} ${this.#Pn[e+1]} ${this.#Pn[e+2]} ${this.#Pn[e+3]} ${this.#Pn[e+4]} ${this.#Pn[e+5]}`);return t.push("Z"),t.join(" ")}serialize([t,e,i,s],n){const r=i-t,o=s-e;let a,l;switch(n){case 0:a=this.#In(this.#Pn,t,s,r,-o),l=this.#In(this.#Sn,t,s,r,-o);break;case 90:a=this.#Rn(this.#Pn,t,e,r,o),l=this.#Rn(this.#Sn,t,e,r,o);break;case 180:a=this.#In(this.#Pn,i,e,-r,o),l=this.#In(this.#Sn,i,e,-r,o);break;case 270:a=this.#Rn(this.#Pn,i,s,-r,-o),l=this.#Rn(this.#Sn,i,s,-r,-o);break}return{outline:Array.from(a),points:[Array.from(l)]}}#In(t,e,i,s,n){const r=new Float64Array(t.length);for(let o=0,a=t.length;o<a;o+=2)r[o]=e+t[o]*s,r[o+1]=i+t[o+1]*n;return r}#Rn(t,e,i,s,n){const r=new Float64Array(t.length);for(let o=0,a=t.length;o<a;o+=2)r[o]=e+t[o+1]*s,r[o+1]=i+t[o]*n;return r}#Ln(t){const e=this.#Pn;let i=e[4],s=e[5],n=i,r=s,o=i,a=s,l=i,h=s;const c=t?Math.max:Math.min;for(let g=6,m=e.length;g<m;g+=6){if(isNaN(e[g]))n=Math.min(n,e[g+4]),r=Math.min(r,e[g+5]),o=Math.max(o,e[g+4]),a=Math.max(a,e[g+5]),h<e[g+5]?(l=e[g+4],h=e[g+5]):h===e[g+5]&&(l=c(l,e[g+4]));else{const t=Y.bezierBoundingBox(i,s,...e.slice(g,g+6));n=Math.min(n,t[0]),r=Math.min(r,t[1]),o=Math.max(o,t[2]),a=Math.max(a,t[3]),h<t[3]?(l=t[2],h=t[3]):h===t[3]&&(l=c(l,t[2]))}i=e[g+4],s=e[g+5]}const d=n-this.#fn,u=r-this.#fn,p=o-n+2*this.#fn,f=a-r+2*this.#fn;this.#kn={x:d,y:u,width:p,height:f,lastPoint:[l,h]}}get box(){return this.#kn}getNewOutline(t,e){const{x:i,y:s,width:n,height:r}=this.#kn,[o,a,l,h]=this.#nn,c=n*l,d=r*h,u=i*l+o,p=s*h+a,f=new Xs({x:this.#Sn[0]*c+u,y:this.#Sn[1]*d+p},this.#nn,this.#wn,t,this.#gn,e??this.#fn);for(let g=2;g<this.#Sn.length;g+=2)f.add({x:this.#Sn[g]*c+u,y:this.#Sn[g+1]*d+p});return f.getOutlines()}}class Qs{#ns=this.#rs.bind(this);#Dn=this.#A.bind(this);#On=null;#Fn=null;#Nn;#Bn=null;#zn=!1;#Hn=!1;#x=null;#jn;#k=null;#$n;static get _keyboardManager(){return R(this,"_keyboardManager",new $t([[["Escape","mac+Escape"],Qs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qs.prototype._moveToPrevious],[["Home","mac+Home"],Qs.prototype._moveToBeginning],[["End","mac+End"],Qs.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#Hn=!1,this.#$n=f.HIGHLIGHT_COLOR,this.#x=t):(this.#Hn=!0,this.#$n=f.HIGHLIGHT_DEFAULT_COLOR),this.#k=t?._uiManager||e,this.#jn=this.#k._eventBus,this.#Nn=t?.color||this.#k?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const t=this.#On=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",this.#Un.bind(this)),t.addEventListener("keydown",this.#ns);const e=this.#Fn=document.createElement("span");return e.className="swatch",e.setAttribute("aria-hidden",!0),e.style.backgroundColor=this.#Nn,t.append(e),t}renderMainDropdown(){const t=this.#Bn=this.#Vn();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#Vn(){const t=document.createElement("div");t.addEventListener("contextmenu",Et),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[e,i]of this.#k.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=e,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${e}`);const n=document.createElement("span");s.append(n),n.className="swatch",n.style.backgroundColor=i,s.setAttribute("aria-selected",i===this.#Nn),s.addEventListener("click",this.#Wn.bind(this,i)),t.append(s)}return t.addEventListener("keydown",this.#ns),t}#Wn(t,e){e.stopPropagation(),this.#jn.dispatch("switchannotationeditorparams",{source:this,type:this.#$n,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#On)return void this.#Un(t);const e=t.target.getAttribute("data-color");e&&this.#Wn(e,t)}_moveToNext(t){this.#Gn?t.target!==this.#On?t.target.nextSibling?.focus():this.#Bn.firstChild?.focus():this.#Un(t)}_moveToPrevious(t){t.target!==this.#Bn?.firstChild&&t.target!==this.#On?(this.#Gn||this.#Un(t),t.target.previousSibling?.focus()):this.#Gn&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){this.#Gn?this.#Bn.firstChild?.focus():this.#Un(t)}_moveToEnd(t){this.#Gn?this.#Bn.lastChild?.focus():this.#Un(t)}#rs(t){Qs._keyboardManager.exec(this,t)}#Un(t){if(this.#Gn)return void this.hideDropdown();if(this.#zn=0===t.detail,window.addEventListener("pointerdown",this.#Dn),this.#Bn)return void this.#Bn.classList.remove("hidden");const e=this.#Bn=this.#Vn();this.#On.append(e)}#A(t){this.#Bn?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#Bn?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#Dn)}get#Gn(){return this.#Bn&&!this.#Bn.classList.contains("hidden")}_hideDropdownFromKeyboard(){this.#Hn||(this.#Gn?(this.hideDropdown(),this.#On.focus({preventScroll:!0,focusVisible:this.#zn})):this.#x?.unselect())}updateColor(t){if(this.#Fn&&(this.#Fn.style.backgroundColor=t),!this.#Bn)return;const e=this.#k.highlightColors.values();for(const i of this.#Bn.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#On?.remove(),this.#On=null,this.#Fn=null,this.#Bn?.remove(),this.#Bn=null}}class Zs extends Gt{#Kn=null;#qn=0;#Xn;#Yn=null;#_=null;#Qn=null;#Zn=null;#Jn=0;#tr=null;#er=null;#a=null;#ir=!1;#_t=this.#sr.bind(this);#nr=null;#rr;#or=null;#ar="";#An;#lr="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=p.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Zs.prototype;return R(this,"_keyboardManager",new $t([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Zs._defaultColor,this.#An=t.thickness||Zs._defaultThickness,this.#rr=t.opacity||Zs._defaultOpacity,this.#Xn=t.boxes||null,this.#lr=t.methodOfCreation||"",this.#ar=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#ir=!0,this.#hr(t),this.#cr()):(this.#Kn=t.anchorNode,this.#qn=t.anchorOffset,this.#Zn=t.focusNode,this.#Jn=t.focusOffset,this.#dr(),this.#cr(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#ir?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#An,methodOfCreation:this.#lr}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#dr(){const t=new Gs(this.#Xn,.001);this.#er=t.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#er.box);const e=new Gs(this.#Xn,.0025,.001,"ltr"===this._uiManager.direction);this.#Qn=e.getOutlines();const{lastPoint:i}=this.#Qn.box;this.#nr=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#hr({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#er=t;const s=1.5;if(this.#Qn=t.getNewOutline(this.#An/2+s,.0025),e>=0)this.#a=e,this.#Yn=i,this.parent.drawLayer.finalizeLine(e,t),this.#or=this.parent.drawLayer.highlightOutline(this.#Qn);else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#a,t),this.parent.drawLayer.updateBox(this.#a,Zs.#ur(this.#er.box,(e-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#or,this.#Qn),this.parent.drawLayer.updateBox(this.#or,Zs.#ur(this.#Qn.box,e))}const{x:n,y:r,width:o,height:a}=t.box;switch(this.rotation){case 0:this.x=n,this.y=r,this.width=o,this.height=a;break;case 90:{const[t,e]=this.parentDimensions;this.x=r,this.y=1-n,this.width=o*e/t,this.height=a*t/e;break}case 180:this.x=1-n,this.y=1-r,this.width=o,this.height=a;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-r,this.y=n,this.width=o*e/t,this.height=a*t/e;break}}const{lastPoint:l}=this.#Qn.box;this.#nr=[(l[0]-n)/o,(l[1]-r)/a]}static initialize(t,e){Gt.initialize(t,e),Zs._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case f.HIGHLIGHT_DEFAULT_COLOR:Zs._defaultColor=e;break;case f.HIGHLIGHT_THICKNESS:Zs._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#nr}updateParams(t,e){switch(t){case f.HIGHLIGHT_COLOR:this.#Ys(e);break;case f.HIGHLIGHT_THICKNESS:this.#pr(e);break}}static get defaultPropertiesToUpdate(){return[[f.HIGHLIGHT_DEFAULT_COLOR,Zs._defaultColor],[f.HIGHLIGHT_THICKNESS,Zs._defaultThickness]]}get propertiesToUpdate(){return[[f.HIGHLIGHT_COLOR,this.color||Zs._defaultColor],[f.HIGHLIGHT_THICKNESS,this.#An||Zs._defaultThickness],[f.HIGHLIGHT_FREE,this.#ir]]}#Ys(t){const e=t=>{this.color=t,this.parent?.drawLayer.changeColor(this.#a,t),this.#_?.updateColor(t)},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:f.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#pr(t){const e=this.#An,i=t=>{this.#An=t,this.#fr(t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:f.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#_=new Qs({editor:this}),t.addColorPicker(this.#_)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#gr())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#gr())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#mr(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#cr(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#mr():t&&(this.#cr(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#fr(t){if(!this.#ir)return;this.#hr({highlightOutlines:this.#er.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#mr(){null!==this.#a&&this.parent&&(this.parent.drawLayer.remove(this.#a),this.#a=null,this.parent.drawLayer.remove(this.#or),this.#or=null)}#cr(t=this.parent){null===this.#a&&(({id:this.#a,clipPathId:this.#Yn}=t.drawLayer.highlight(this.#er,this.color,this.#rr)),this.#or=t.drawLayer.highlightOutline(this.#Qn),this.#tr&&(this.#tr.style.clipPath=this.#Yn))}static#ur({x:t,y:e,width:i,height:s},n){switch(n){case 90:return{x:1-e-s,y:t,width:s,height:i};case 180:return{x:1-t-i,y:1-e-s,width:i,height:s};case 270:return{x:e,y:1-t-i,width:s,height:i}}return{x:t,y:e,width:i,height:s}}rotate(t){const{drawLayer:e}=this.parent;let i;this.#ir?(t=(t-this.rotation+360)%360,i=Zs.#ur(this.#er.box,t)):i=Zs.#ur(this,t),e.rotate(this.#a,t),e.rotate(this.#or,t),e.updateBox(this.#a,i),e.updateBox(this.#or,Zs.#ur(this.#Qn.box,t))}render(){if(this.div)return this.div;const t=super.render();this.#ar&&(t.setAttribute("aria-label",this.#ar),t.setAttribute("role","mark")),this.#ir?t.classList.add("free"):this.div.addEventListener("keydown",this.#_t);const e=this.#tr=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#Yn;const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),Nt(this,this.#tr,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(this.#or,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#or,"hovered")}#sr(t){Zs._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#br(!0);break;case 1:case 3:this.#br(!1);break}}#br(t){if(!this.#Kn)return;const e=window.getSelection();t?e.setPosition(this.#Kn,this.#qn):e.setPosition(this.#Zn,this.#Jn)}select(){super.select(),this.#or&&(this.parent?.drawLayer.removeClass(this.#or,"hovered"),this.parent?.drawLayer.addClass(this.#or,"selected"))}unselect(){super.unselect(),this.#or&&(this.parent?.drawLayer.removeClass(this.#or,"selected"),this.#ir||this.#br(!1))}get _mustFixPosition(){return!this.#ir}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(this.#a,t),this.parent.drawLayer.show(this.#or,t))}#gr(){return this.#ir?this.rotation:0}#vr(){if(this.#ir)return null;const[t,e]=this.pageDimensions,i=this.#Xn,s=new Array(8*i.length);let n=0;for(const{x:r,y:o,width:a,height:l}of i){const i=r*t,h=(1-o-l)*e;s[n]=s[n+4]=i,s[n+1]=s[n+3]=h,s[n+2]=s[n+6]=i+a*t,s[n+5]=s[n+7]=h+l*e,n+=8}return s}#yr(t){return this.#er.serialize(t,this.#gr())}static startHighlighting(t,e,{target:i,x:s,y:n}){const{x:r,y:o,width:a,height:l}=i.getBoundingClientRect(),h=e=>{this.#_r(t,e)},c={capture:!0,passive:!1},d=t=>{t.preventDefault(),t.stopPropagation()},u=e=>{i.removeEventListener("pointermove",h),window.removeEventListener("blur",u),window.removeEventListener("pointerup",u),window.removeEventListener("pointerdown",d,c),window.removeEventListener("contextmenu",Et),this.#xr(t,e)};window.addEventListener("blur",u),window.addEventListener("pointerup",u),window.addEventListener("pointerdown",d,c),window.addEventListener("contextmenu",Et),i.addEventListener("pointermove",h),this._freeHighlight=new Xs({x:s,y:n},[r,o,a,l],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#_r(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#xr(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,i){const s=super.deserialize(t,e,i),{rect:[n,r,o,a],color:l,quadPoints:h}=t;s.color=Y.makeHexColor(...l),s.#rr=t.opacity;const[c,d]=s.pageDimensions;s.width=(o-n)/c,s.height=(a-r)/d;const u=s.#Xn=[];for(let p=0;p<h.length;p+=8)u.push({x:(h[4]-o)/c,y:(a-(1-h[p+5]))/d,width:(h[p+2]-h[p])/c,height:(h[p+5]-h[p+1])/d});return s.#dr(),s}serialize(t=!1){if(this.isEmpty()||t)return null;const e=this.getRect(0,0),i=Gt._colorManager.convert(this.color);return{annotationType:p.HIGHLIGHT,color:i,opacity:this.#rr,thickness:this.#An,quadPoints:this.#vr(),outlines:this.#yr(e),pageIndex:this.pageIndex,rect:e,rotation:this.#gr(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class Js extends Gt{#wr=0;#Ar=0;#Sr=this.canvasPointermove.bind(this);#Er=this.canvasPointerleave.bind(this);#Cr=this.canvasPointerup.bind(this);#Mr=this.canvasPointerdown.bind(this);#Tr=null;#kr=new Path2D;#Pr=!1;#Lr=!1;#Ir=!1;#Rr=null;#Dr=0;#Or=0;#Fr=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=p.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){Gt.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case f.INK_THICKNESS:Js._defaultThickness=e;break;case f.INK_COLOR:Js._defaultColor=e;break;case f.INK_OPACITY:Js._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case f.INK_THICKNESS:this.#pr(e);break;case f.INK_COLOR:this.#Ys(e);break;case f.INK_OPACITY:this.#Nr(e);break}}static get defaultPropertiesToUpdate(){return[[f.INK_THICKNESS,Js._defaultThickness],[f.INK_COLOR,Js._defaultColor||Gt._defaultLineColor],[f.INK_OPACITY,Math.round(100*Js._defaultOpacity)]]}get propertiesToUpdate(){return[[f.INK_THICKNESS,this.thickness||Js._defaultThickness],[f.INK_COLOR,this.color||Js._defaultColor||Gt._defaultLineColor],[f.INK_OPACITY,Math.round(100*(this.opacity??Js._defaultOpacity))]]}#pr(t){const e=t=>{this.thickness=t,this.#Br()},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:f.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Ys(t){const e=t=>{this.color=t,this.#zr()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:f.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#Nr(t){const e=t=>{this.opacity=t,this.#zr()};t/=100;const i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:f.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#Hr(),this.#jr()),this.isAttachedToDOM||(this.parent.add(this),this.#$r()),this.#Br()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#Tr&&(clearTimeout(this.#Tr),this.#Tr=null),this.#Rr.disconnect(),this.#Rr=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,i=this.width*t,s=this.height*e;this.setDimensions(i,s)}enableEditMode(){this.#Pr||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#Mr))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#Mr))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Ur(){const{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#Vr(){const{ctx:t,color:e,opacity:i,thickness:s,parentScale:n,scaleFactor:r}=this;t.lineWidth=s*n/r,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${Bt(i)}`}#Wr(t,e){this.canvas.addEventListener("contextmenu",Et),this.canvas.addEventListener("pointerleave",this.#Er),this.canvas.addEventListener("pointermove",this.#Sr),this.canvas.addEventListener("pointerup",this.#Cr),this.canvas.removeEventListener("pointerdown",this.#Mr),this.isEditing=!0,this.#Ir||(this.#Ir=!0,this.#$r(),this.thickness||=Js._defaultThickness,this.color||=Js._defaultColor||Gt._defaultLineColor,this.opacity??=Js._defaultOpacity),this.currentPath.push([t,e]),this.#Lr=!1,this.#Vr(),this.#Fr=()=>{this.#Gr(),this.#Fr&&window.requestAnimationFrame(this.#Fr)},window.requestAnimationFrame(this.#Fr)}#Kr(t,e){const[i,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===s)return;const n=this.currentPath;let r=this.#kr;if(n.push([t,e]),this.#Lr=!0,n.length<=2)return r.moveTo(...n[0]),void r.lineTo(t,e);3===n.length&&(this.#kr=r=new Path2D,r.moveTo(...n[0])),this.#qr(r,...n.at(-3),...n.at(-2),t,e)}#Xr(){if(0===this.currentPath.length)return;const t=this.currentPath.at(-1);this.#kr.lineTo(...t)}#Yr(t,e){let i;if(this.#Fr=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#Kr(t,e),this.#Xr(),1!==this.currentPath.length)i=this.#Qr();else{const s=[t,e];i=[[s,s.slice(),s.slice(),s]]}const s=this.#kr,n=this.currentPath;this.currentPath=[],this.#kr=new Path2D;const r=()=>{this.allRawPaths.push(n),this.paths.push(i),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},o=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#Hr(),this.#jr()),this.#Br())};this.addCommands({cmd:r,undo:o,mustExec:!0})}#Gr(){if(!this.#Lr)return;this.#Lr=!1;const t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),i=e.map((t=>t[0])),s=e.map((t=>t[1])),{ctx:n}=(Math.min(...i),Math.max(...i),Math.min(...s),Math.max(...s),this);n.save(),n.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)n.stroke(r);n.stroke(this.#kr),n.restore()}#qr(t,e,i,s,n,r,o){const a=(e+s)/2,l=(i+n)/2,h=(s+r)/2,c=(n+o)/2;t.bezierCurveTo(a+2*(s-a)/3,l+2*(n-l)/3,h+2*(s-h)/3,c+2*(n-c)/3,h,c)}#Qr(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let i,[s,n]=t[0];for(i=1;i<t.length-2;i++){const[r,o]=t[i],[a,l]=t[i+1],h=(r+a)/2,c=(o+l)/2,d=[s+2*(r-s)/3,n+2*(o-n)/3],u=[h+2*(r-h)/3,c+2*(o-c)/3];e.push([[s,n],d,u,[h,c]]),[s,n]=[h,c]}const[r,o]=t[i],[a,l]=t[i+1],h=[s+2*(r-s)/3,n+2*(o-n)/3],c=[a+2*(r-a)/3,l+2*(o-l)/3];return e.push([[s,n],h,c,[a,l]]),e}#zr(){if(this.isEmpty())return void this.#Zr();this.#Vr();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#Zr();for(const i of this.bezierPath2D)e.stroke(i)}commit(){this.#Pr||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Pr=!0,this.div.classList.add("disabled"),this.#Br(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!this.#Pr&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#Wr(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#Kr(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#Jr(t)}canvasPointerleave(t){this.#Jr(t)}#Jr(t){this.canvas.removeEventListener("pointerleave",this.#Er),this.canvas.removeEventListener("pointermove",this.#Sr),this.canvas.removeEventListener("pointerup",this.#Cr),this.canvas.addEventListener("pointerdown",this.#Mr),this.#Tr&&clearTimeout(this.#Tr),this.#Tr=setTimeout((()=>{this.#Tr=null,this.canvas.removeEventListener("contextmenu",Et)}),10),this.#Yr(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#Hr(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#jr(){this.#Rr=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),this.#Rr.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#Pr}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,s,n,r]=this.#Ur();if(this.setAt(i,s,0,0),this.setDims(n,r),this.#Hr(),this.width){const[i,s]=this.parentDimensions;this.setAspectRatio(this.width*i,this.height*s),this.setAt(t*i,e*s,this.width*i,this.height*s),this.#Ir=!0,this.#$r(),this.setDims(this.width*i,this.height*s),this.#zr(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#jr(),this.div}#$r(){if(!this.#Ir)return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#Zr()}setDimensions(t,e){const i=Math.round(t),s=Math.round(e);if(this.#Dr===i&&this.#Or===s)return;this.#Dr=i,this.#Or=s,this.canvas.style.visibility="hidden";const[n,r]=this.parentDimensions;this.width=t/n,this.height=e/r,this.fixAndSetPosition(),this.#Pr&&this.#to(t,e),this.#$r(),this.#zr(),this.canvas.style.visibility="visible",this.fixDims()}#to(t,e){const i=this.#eo(),s=(t-i)/this.#Ar,n=(e-i)/this.#wr;this.scaleFactor=Math.min(s,n)}#Zr(){const t=this.#eo()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#io(t){const e=new Path2D;for(let i=0,s=t.length;i<s;i++){const[s,n,r,o]=t[i];0===i&&e.moveTo(...s),e.bezierCurveTo(n[0],n[1],r[0],r[1],o[0],o[1])}return e}static#so(t,e,i){const[s,n,r,o]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]+=s,t[e+1]=o-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]+s,t[e+1]=i+n}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]+=n;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=r-t[e+1],t[e+1]=o-i}break;default:throw new Error("Invalid rotation")}return t}static#no(t,e,i){const[s,n,r,o]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]-=s,t[e+1]=o-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]-n,t[e+1]=i-s}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]-=n;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=o-t[e+1],t[e+1]=r-i}break;default:throw new Error("Invalid rotation")}return t}#ro(t,e,i,s){const n=[],r=this.thickness/2,o=t*e+r,a=t*i+r;for(const l of this.paths){const e=[],i=[];for(let s=0,n=l.length;s<n;s++){const[r,h,c,d]=l[s];if(r[0]===d[0]&&r[1]===d[1]&&1===n){const s=t*r[0]+o,n=t*r[1]+a;e.push(s,n),i.push(s,n);break}const u=t*r[0]+o,p=t*r[1]+a,f=t*h[0]+o,g=t*h[1]+a,m=t*c[0]+o,b=t*c[1]+a,v=t*d[0]+o,y=t*d[1]+a;0===s&&(e.push(u,p),i.push(u,p)),e.push(f,g,m,b,v,y),i.push(f,g),s===n-1&&i.push(v,y)}n.push({bezier:Js.#so(e,s,this.rotation),points:Js.#so(i,s,this.rotation)})}return n}#oo(){let t=1/0,e=-1/0,i=1/0,s=-1/0;for(const n of this.paths)for(const[r,o,a,l]of n){const n=Y.bezierBoundingBox(...r,...o,...a,...l);t=Math.min(t,n[0]),i=Math.min(i,n[1]),e=Math.max(e,n[2]),s=Math.max(s,n[3])}return[t,i,e,s]}#eo(){return this.#Pr?Math.ceil(this.thickness*this.parentScale):0}#Br(t=!1){if(this.isEmpty())return;if(!this.#Pr)return void this.#zr();const e=this.#oo(),i=this.#eo();this.#Ar=Math.max(Gt.MIN_SIZE,e[2]-e[0]),this.#wr=Math.max(Gt.MIN_SIZE,e[3]-e[1]);const s=Math.ceil(i+this.#Ar*this.scaleFactor),n=Math.ceil(i+this.#wr*this.scaleFactor),[r,o]=this.parentDimensions;this.width=s/r,this.height=n/o,this.setAspectRatio(s,n);const a=this.translationX,l=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#$r(),this.#zr(),this.#Dr=s,this.#Or=n,this.setDims(s,n);const h=t?i/this.scaleFactor/2:0;this.translate(a-this.translationX-h,l-this.translationY-h)}static deserialize(t,e,i){if(t instanceof Fs)return null;const s=super.deserialize(t,e,i);s.thickness=t.thickness,s.color=Y.makeHexColor(...t.color),s.opacity=t.opacity;const[n,r]=s.pageDimensions,o=s.width*n,a=s.height*r,l=s.parentScale,h=t.thickness/2;s.#Pr=!0,s.#Dr=Math.round(o),s.#Or=Math.round(a);const{paths:c,rect:d,rotation:u}=t;for(let{bezier:f}of c){f=Js.#no(f,d,u);const t=[];s.paths.push(t);let e=l*(f[0]-h),i=l*(f[1]-h);for(let s=2,r=f.length;s<r;s+=6){const n=l*(f[s]-h),r=l*(f[s+1]-h),o=l*(f[s+2]-h),a=l*(f[s+3]-h),c=l*(f[s+4]-h),d=l*(f[s+5]-h);t.push([[e,i],[n,r],[o,a],[c,d]]),e=c,i=d}const n=this.#io(t);s.bezierPath2D.push(n)}const p=s.#oo();return s.#Ar=Math.max(Gt.MIN_SIZE,p[2]-p[0]),s.#wr=Math.max(Gt.MIN_SIZE,p[3]-p[1]),s.#to(o,a),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=Gt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:p.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#ro(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class tn extends Gt{#ao=null;#lo=null;#ho=null;#co=null;#do=null;#uo="";#po=null;#Rr=null;#fo=null;#go=!1;#mo=!1;static _type="stamp";static _editorType=p.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#co=t.bitmapUrl,this.#do=t.bitmapFile}static initialize(t,e){Gt.initialize(t,e)}static get supportedTypes(){const t=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return R(this,"supportedTypes",t.map((t=>`image/${t}`)))}static get supportedTypesStr(){return R(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(p.STAMP,{bitmapFile:t.getAsFile()})}#bo(t,e=!1){t?(this.#ao=t.bitmap,e||(this.#lo=t.id,this.#go=t.isSvg),t.file&&(this.#uo=t.file.name),this.#Hr()):this.remove()}#vo(){this.#ho=null,this._uiManager.enableWaiting(!1),this.#po&&this.div.focus()}#yo(){if(this.#lo)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#lo).then((t=>this.#bo(t,!0))).finally((()=>this.#vo()));if(this.#co){const t=this.#co;return this.#co=null,this._uiManager.enableWaiting(!0),void(this.#ho=this._uiManager.imageManager.getFromUrl(t).then((t=>this.#bo(t))).finally((()=>this.#vo())))}if(this.#do){const t=this.#do;return this.#do=null,this._uiManager.enableWaiting(!0),void(this.#ho=this._uiManager.imageManager.getFromFile(t).then((t=>this.#bo(t))).finally((()=>this.#vo())))}const t=document.createElement("input");t.type="file",t.accept=tn.supportedTypesStr,this.#ho=new Promise((e=>{t.addEventListener("change",(async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this.#bo(e)}else this.remove();e()})),t.addEventListener("cancel",(()=>{this.remove(),e()}))})).finally((()=>this.#vo())),t.click()}remove(){this.#lo&&(this.#ao=null,this._uiManager.imageManager.deleteId(this.#lo),this.#po?.remove(),this.#po=null,this.#Rr?.disconnect(),this.#Rr=null,this.#fo&&(clearTimeout(this.#fo),this.#fo=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#lo&&null===this.#po&&this.#yo(),this.isAttachedToDOM||this.parent.add(this))):this.#lo&&this.#yo()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#ho||this.#ao||this.#co||this.#do||this.#lo)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#ao?this.#Hr():this.#yo(),this.width){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s)}return this.div}#Hr(){const{div:t}=this;let{width:e,height:i}=this.#ao;const[s,n]=this.pageDimensions,r=.75;if(this.width)e=this.width*s,i=this.height*n;else if(e>r*s||i>r*n){const t=Math.min(r*s/e,r*n/i);e*=t,i*=t}const[o,a]=this.parentDimensions;this.setDims(e*o/s,i*a/n),this._uiManager.enableWaiting(!1);const l=this.#po=document.createElement("canvas");t.append(l),t.hidden=!1,this.#_o(e,i),this.#jr(),this.#mo||(this.parent.addUndoableEditor(this),this.#mo=!0),this._reportTelemetry({action:"inserted_image"}),this.#uo&&l.setAttribute("aria-label",this.#uo)}#xo(t,e){const[i,s]=this.parentDimensions;this.width=t/i,this.height=e/s,this.setDims(t,e),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#fo&&clearTimeout(this.#fo);const n=200;this.#fo=setTimeout((()=>{this.#fo=null,this.#_o(t,e)}),n)}#wo(t,e){const{width:i,height:s}=this.#ao;let n=i,r=s,o=this.#ao;while(n>2*t||r>2*e){const i=n,s=r;n>2*t&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const a=new OffscreenCanvas(n,r),l=a.getContext("2d");l.drawImage(o,0,0,i,s,0,0,n,r),o=a.transferToImageBitmap()}return o}#_o(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=this.#po;if(!i||i.width===t&&i.height===e)return;i.width=t,i.height=e;const s=this.#go?this.#ao:this.#wo(t,e);if(this._uiManager.hasMLManager&&!this.hasAltText()){const i=new OffscreenCanvas(t,e),n=i.getContext("2d");n.drawImage(s,0,0,s.width,s.height,0,0,t,e),this._uiManager.mlGuess({service:"image-to-text",request:{data:n.getImageData(0,0,t,e).data,width:t,height:e,channels:4}}).then((t=>{const e=t?.output||"";this.parent&&e&&!this.hasAltText()&&(this.altTextData={altText:e,decorative:!1})}))}const n=i.getContext("2d");n.filter=this._uiManager.hcmFilter,n.drawImage(s,0,0,s.width,s.height,0,0,t,e)}getImageForAltText(){return this.#po}#Ao(t){if(t){if(this.#go){const t=this._uiManager.imageManager.getSvgUrl(this.#lo);if(t)return t}const t=document.createElement("canvas");({width:t.width,height:t.height}=this.#ao);const e=t.getContext("2d");return e.drawImage(this.#ao,0,0),t.toDataURL()}if(this.#go){const[t,e]=this.pageDimensions,i=Math.round(this.width*t*ct.PDF_TO_CSS_UNITS),s=Math.round(this.height*e*ct.PDF_TO_CSS_UNITS),n=new OffscreenCanvas(i,s),r=n.getContext("2d");return r.drawImage(this.#ao,0,0,this.#ao.width,this.#ao.height,0,0,i,s),n.transferToImageBitmap()}return structuredClone(this.#ao)}#jr(){this.#Rr=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.#xo(e.width,e.height)})),this.#Rr.observe(this.div)}static deserialize(t,e,i){if(t instanceof js)return null;const s=super.deserialize(t,e,i),{rect:n,bitmapUrl:r,bitmapId:o,isSvg:a,accessibilityData:l}=t;o&&i.imageManager.isValidId(o)?s.#lo=o:s.#co=r,s.#go=a;const[h,c]=s.pageDimensions;return s.width=(n[2]-n[0])/h,s.height=(n[3]-n[1])/c,l&&(s.altTextData=l),s}serialize(t=!1,e=null){if(this.isEmpty())return null;const i={annotationType:p.STAMP,bitmapId:this.#lo,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#go,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#Ao(!0),i.accessibilityData=this.altTextData,i;const{decorative:s,altText:n}=this.altTextData;if(!s&&n&&(i.accessibilityData={type:"Figure",alt:n}),null===e)return i;e.stamps||=new Map;const r=this.#go?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(e.stamps.has(this.#lo)){if(this.#go){const t=e.stamps.get(this.#lo);r>t.area&&(t.area=r,t.serialized.bitmap.close(),t.serialized.bitmap=this.#Ao(!1))}}else e.stamps.set(this.#lo,{area:r,serialized:i}),i.bitmap=this.#Ao(!1);return i}}class en{#Fs;#So=!1;#Eo=null;#Co=null;#Mo=null;#To=null;#ko=null;#Po=new Map;#Lo=!1;#Io=!1;#Ro=!1;#Do=null;#k;static _initialized=!1;static#Y=new Map([Ws,Js,tn,Zs].map((t=>[t._editorType,t])));constructor({uiManager:t,pageIndex:e,div:i,accessibilityManager:s,annotationLayer:n,drawLayer:r,textLayer:o,viewport:a,l10n:l}){const h=[...en.#Y.values()];if(!en._initialized){en._initialized=!0;for(const e of h)e.initialize(l,t)}t.registerEditorTypes(h),this.#k=t,this.pageIndex=e,this.div=i,this.#Fs=s,this.#Eo=n,this.viewport=a,this.#Do=o,this.drawLayer=r,this.#k.addLayer(this)}get isEmpty(){return 0===this.#Po.size}get isInvisible(){return this.isEmpty&&this.#k.getMode()===p.NONE}updateToolbar(t){this.#k.updateToolbar(t)}updateMode(t=this.#k.getMode()){switch(this.#Oo(),t){case p.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case p.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case p.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of en.#Y.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#Do?.div}addInkEditorIfNeeded(t){if(this.#k.getMode()!==p.INK)return;if(!t)for(const i of this.#Po.values())if(i.isEmpty())return void i.setInBackground();const e=this.createAndAddNewEditor({offsetX:0,offsetY:0},!1);e.setInBackground()}setEditingState(t){this.#k.setEditingState(t)}addCommands(t){this.#k.addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#Eo?.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of this.#Po.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#k.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#Eo)return;const e=this.#Eo.getEditableAnnotations();for(const i of e){if(i.hide(),this.#k.isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#Ro=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const s of this.#Po.values())s.disableEditing(),s.annotationElementId&&(null===s.serialize()?(e.set(s.annotationElementId,s),this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()):t.set(s.annotationElementId,s));if(this.#Eo){const i=this.#Eo.getEditableAnnotations();for(const s of i){const{id:i}=s.data;if(this.#k.isDeletedAnnotationElement(i))continue;let n=e.get(i);n?(n.resetAnnotationElement(s),n.show(!1),s.show()):(n=t.get(i),n&&(this.#k.addChangedExistingAnnotation(n),n.renderAnnotationElement(s),n.show(!1)),s.show())}}this.#Oo(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of en.#Y.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#Ro=!1}getEditableAnnotation(t){return this.#Eo?.getEditableAnnotation(t)||null}setActiveEditor(t){const e=this.#k.getActive();e!==t&&this.#k.setActiveEditor(t)}enableTextSelection(){this.div.tabIndex=-1,this.#Do?.div&&!this.#To&&(this.#To=this.#Fo.bind(this),this.#Do.div.addEventListener("pointerdown",this.#To),this.#Do.div.classList.add("highlighting"))}disableTextSelection(){this.div.tabIndex=0,this.#Do?.div&&this.#To&&(this.#Do.div.removeEventListener("pointerdown",this.#To),this.#To=null,this.#Do.div.classList.remove("highlighting"))}#Fo(t){if(this.#k.unselectAll(),t.target===this.#Do.div){const{isMac:e}=q.platform;if(0!==t.button||t.ctrlKey&&e)return;this.#k.showAllEditors("highlight",!0,!0),this.#Do.div.classList.add("free"),Zs.startHighlighting(this,"ltr"===this.#k.direction,t),this.#Do.div.addEventListener("pointerup",(()=>{this.#Do.div.classList.remove("free")}),{once:!0}),t.preventDefault()}}enableClick(){this.#Mo||(this.#Mo=this.pointerdown.bind(this),this.#Co=this.pointerup.bind(this),this.div.addEventListener("pointerdown",this.#Mo),this.div.addEventListener("pointerup",this.#Co))}disableClick(){this.#Mo&&(this.div.removeEventListener("pointerdown",this.#Mo),this.div.removeEventListener("pointerup",this.#Co),this.#Mo=null,this.#Co=null)}attach(t){this.#Po.set(t.id,t);const{annotationElementId:e}=t;e&&this.#k.isDeletedAnnotationElement(e)&&this.#k.removeDeletedAnnotationElement(t)}detach(t){this.#Po.delete(t.id),this.#Fs?.removePointerInTextLayer(t.contentDiv),!this.#Ro&&t.annotationElementId&&this.#k.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#k.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#Io||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#k.addDeletedAnnotationElement(t.annotationElementId),Gt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#k.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#k.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#ko&&(t._focusEventsAllowed=!1,this.#ko=setTimeout((()=>{this.#ko=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus())}),0)),t._structTreeParentId=this.#Fs?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return this.#k.getId()}get#No(){return en.#Y.get(this.#k.getMode())}#Bo(t){const e=this.#No;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#No?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#k.updateToolbar(t),this.#k.updateMode(t);const{offsetX:i,offsetY:s}=this.#zo(),n=this.getNextId(),r=this.#Bo({parent:this,id:n,x:i,y:s,uiManager:this.#k,isCentered:!0,...e});r&&this.add(r)}deserialize(t){return en.#Y.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#k)||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),n=this.#Bo({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#k,isCentered:e,...i});return n&&this.add(n),n}#zo(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),n=Math.max(0,t),r=Math.max(0,e),o=Math.min(window.innerWidth,t+i),a=Math.min(window.innerHeight,e+s),l=(n+o)/2-t,h=(r+a)/2-e,[c,d]=this.viewport.rotation%180===0?[l,h]:[h,l];return{offsetX:c,offsetY:d}}addNewEditor(){this.createAndAddNewEditor(this.#zo(),!0)}setSelected(t){this.#k.setSelected(t)}toggleSelected(t){this.#k.toggleSelected(t)}isSelected(t){return this.#k.isSelected(t)}unselect(t){this.#k.unselect(t)}pointerup(t){const{isMac:e}=q.platform;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#Lo&&(this.#Lo=!1,this.#So?this.#k.getMode()!==p.STAMP?this.createAndAddNewEditor(t,!1):this.#k.unselectAll():this.#So=!0)}pointerdown(t){if(this.#k.getMode()===p.HIGHLIGHT&&this.enableTextSelection(),this.#Lo)return void(this.#Lo=!1);const{isMac:e}=q.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;this.#Lo=!0;const i=this.#k.getActive();this.#So=!i||i.isEmpty()}findNewParent(t,e,i){const s=this.#k.findParent(e,i);return null!==s&&s!==this&&(s.changeParent(t),!0)}destroy(){this.#k.getActive()?.parent===this&&(this.#k.commitOrRemove(),this.#k.setActiveEditor(null)),this.#ko&&(clearTimeout(this.#ko),this.#ko=null);for(const t of this.#Po.values())this.#Fs?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#Po.clear(),this.#k.removeLayer(this)}#Oo(){this.#Io=!0;for(const t of this.#Po.values())t.isEmpty()&&t.remove();this.#Io=!1}render({viewport:t}){this.viewport=t,Dt(this.div,t);for(const e of this.#k.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#k.commitOrRemove(),this.#Oo();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Dt(this.div,{rotation:i}),e!==i)for(const s of this.#Po.values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#k.viewParameters.realScale}}class sn{#ms=null;#a=0;#Ho=new Map;#jo=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(this.#ms){if(this.#ms!==t){if(this.#Ho.size>0)for(const e of this.#Ho.values())e.remove(),t.append(e);this.#ms=t}}else this.#ms=t}static get _svgFactory(){return R(this,"_svgFactory",new mt)}static#$o(t,{x:e=0,y:i=0,width:s=1,height:n=1}={}){const{style:r}=t;r.top=100*i+"%",r.left=100*e+"%",r.width=100*s+"%",r.height=100*n+"%"}#Uo(t){const e=sn._svgFactory.create(1,1,!0);return this.#ms.append(e),e.setAttribute("aria-hidden",!0),sn.#$o(e,t),e}#Vo(t,e){const i=sn._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const n=sn._svgFactory.createElement("use");return i.append(n),n.setAttribute("href",`#${e}`),n.classList.add("clip"),s}highlight(t,e,i,s=!1){const n=this.#a++,r=this.#Uo(t.box);r.classList.add("highlight"),t.free&&r.classList.add("free");const o=sn._svgFactory.createElement("defs");r.append(o);const a=sn._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",l),a.setAttribute("d",t.toSVGPath()),s&&this.#jo.set(n,a);const h=this.#Vo(o,l),c=sn._svgFactory.createElement("use");return r.append(c),r.setAttribute("fill",e),r.setAttribute("fill-opacity",i),c.setAttribute("href",`#${l}`),this.#Ho.set(n,r),{id:n,clipPathId:`url(#${h})`}}highlightOutline(t){const e=this.#a++,i=this.#Uo(t.box);i.classList.add("highlightOutline");const s=sn._svgFactory.createElement("defs");i.append(s);const n=sn._svgFactory.createElement("path");s.append(n);const r=`path_p${this.pageIndex}_${e}`;let o;if(n.setAttribute("id",r),n.setAttribute("d",t.toSVGPath()),n.setAttribute("vector-effect","non-scaling-stroke"),t.free){i.classList.add("free");const t=sn._svgFactory.createElement("mask");s.append(t),o=`mask_p${this.pageIndex}_${e}`,t.setAttribute("id",o),t.setAttribute("maskUnits","objectBoundingBox");const n=sn._svgFactory.createElement("rect");t.append(n),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("fill","white");const a=sn._svgFactory.createElement("use");t.append(a),a.setAttribute("href",`#${r}`),a.setAttribute("stroke","none"),a.setAttribute("fill","black"),a.setAttribute("fill-rule","nonzero"),a.classList.add("mask")}const a=sn._svgFactory.createElement("use");i.append(a),a.setAttribute("href",`#${r}`),o&&a.setAttribute("mask",`url(#${o})`);const l=a.cloneNode();return i.append(l),a.classList.add("mainOutline"),l.classList.add("secondaryOutline"),this.#Ho.set(e,i),e}finalizeLine(t,e){const i=this.#jo.get(t);this.#jo.delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){const i=this.#Ho.get(t),s=i.firstChild,n=s.firstChild;n.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),this.#jo.delete(t)}updatePath(t,e){this.#jo.get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){sn.#$o(this.#Ho.get(t),e)}show(t,e){this.#Ho.get(t).classList.toggle("hidden",!e)}rotate(t,e){this.#Ho.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#Ho.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#Ho.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#Ho.get(t).classList.add(e)}removeClass(t,e){this.#Ho.get(t).classList.remove(e)}remove(t){null!==this.#ms&&(this.#Ho.get(t).remove(),this.#Ho.delete(t))}destroy(){this.#ms=null;for(const t of this.#Ho.values())t.remove();this.#Ho.clear()}}n.AbortException,n.AnnotationEditorLayer,n.AnnotationEditorParamsType,n.AnnotationEditorType,n.AnnotationEditorUIManager,n.AnnotationLayer,n.AnnotationMode,n.CMapCompressionType,n.ColorPicker,n.DOMSVGFactory,n.DrawLayer,n.FeatureTest;var nn=n.GlobalWorkerOptions,rn=(n.ImageKind,n.InvalidPDFException,n.MissingPDFException,n.OPS,n.Outliner,n.PDFDataRangeTransport,n.PDFDateString,n.PDFWorker,n.PasswordResponses,n.PermissionFlag,n.PixelsPerInch,n.RenderingCancelledException,n.TextLayer,n.UnexpectedResponseException,n.Util,n.VerbosityLevel,n.XfaLayer,n.build,n.createValidAbsoluteUrl,n.fetchData,n.getDocument);n.getFilenameFromUrl,n.getPdfFilenameFromUrl,n.getXfaPageViewport,n.isDataScheme,n.isPdfFile,n.noContextMenu,n.normalizeUnicode,n.renderTextLayer,n.setLayerDimensions,n.shadow,n.updateTextLayer,n.version;"undefined"!==typeof window&&"Worker"in window&&(nn.workerPort=new Worker(new URL(i.p+i.u(332),i.b),{type:void 0}))},6908:function(t,e,i){i.d(e,{yP:function(){return v}});var s=i(2022),n=i(641),r=i(953);const o={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},a={ariaLabel:{type:String},ariaDescribedby:{type:String}},l={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...o,...a},h="2"===n.rE[0]?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function c(t){return(0,r.ju)(t)?(0,r.ux)(t):t}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return(0,r.ju)(e)?new Proxy(t,{}):t}function u(t,e){const i=t.options;i&&e&&Object.assign(i,e)}function p(t,e){t.labels=e}function f(t,e,i){const s=[];t.datasets=e.map((e=>{const n=t.datasets.find((t=>t[i]===e[i]));return n&&e.data&&!s.includes(n)?(s.push(n),Object.assign(n,e),n):{...e}}))}function g(t,e){const i={labels:[],datasets:[]};return p(i,t.labels),f(i,t.datasets,e),i}const m=(0,n.pM)({props:l,setup(t,e){let{expose:i,slots:o}=e;const a=(0,r.KR)(null),l=(0,r.IJ)(null);i({chart:l});const h=()=>{if(!a.value)return;const{type:e,data:i,options:n,plugins:r,datasetIdKey:o}=t,h=g(i,o),c=d(h,i);l.value=new s.t1(a.value,{type:e,data:c,options:{...n},plugins:r})},m=()=>{const e=(0,r.ux)(l.value);e&&(t.destroyDelay>0?setTimeout((()=>{e.destroy(),l.value=null}),t.destroyDelay):(e.destroy(),l.value=null))},b=e=>{e.update(t.updateMode)};return(0,n.sV)(h),(0,n.hi)(m),(0,n.wB)([()=>t.options,()=>t.data],((e,i)=>{let[s,o]=e,[a,h]=i;const d=(0,r.ux)(l.value);if(!d)return;let g=!1;if(s){const t=c(s),e=c(a);t&&t!==e&&(u(d,t),g=!0)}if(o){const e=c(o.labels),i=c(h.labels),s=c(o.datasets),n=c(h.datasets);e!==i&&(p(d.config.data,e),g=!0),s&&s!==n&&(f(d.config.data,s,t.datasetIdKey),g=!0)}g&&(0,n.dY)((()=>{b(d)}))}),{deep:!0}),()=>(0,n.h)("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:a},[(0,n.h)("p",{},[o.default?o.default():""])])}});function b(t,e){return s.t1.register(e),(0,n.pM)({props:o,setup(e,i){let{expose:s}=i;const o=(0,r.IJ)(null),a=t=>{o.value=t?.chart};return s({chart:o}),()=>(0,n.h)(m,h({ref:a},{type:t,...e}))}})}const v=b("bar",s.A6)},5220:function(t,e,i){i.d(e,{rd:function(){return x}});var s=i(641),n=i(953);Object.assign;const r=()=>{},o=Array.isArray;function a(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function l(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!h(t[i],e[i]))return!1;return!0}function h(t,e){return o(t)?c(t,e):o(e)?c(e,t):t===e}function c(t,e){return o(e)?t.length===e.length&&t.every(((t,i)=>t===e[i])):1===t.length&&t[0]===e}var d,u;(function(t){t["pop"]="pop",t["push"]="push"})(d||(d={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(u||(u={}));new Map;Symbol("");var p;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(p||(p={}));Symbol(""),Symbol("");const f=Symbol(""),g=Symbol("");Symbol("");function m(t){const e=(0,s.WQ)(f),i=(0,s.WQ)(g);const o=(0,s.EW)((()=>{const i=(0,n.R1)(t.to);return e.resolve(i)})),h=(0,s.EW)((()=>{const{matched:t}=o.value,{length:e}=t,s=t[e-1],n=i.matched;if(!s||!n.length)return-1;const r=n.findIndex(a.bind(null,s));if(r>-1)return r;const l=y(t[e-2]);return e>1&&y(s)===l&&n[n.length-1].path!==l?n.findIndex(a.bind(null,t[e-2])):r})),c=(0,s.EW)((()=>h.value>-1&&v(i.params,o.value.params))),d=(0,s.EW)((()=>h.value>-1&&h.value===i.matched.length-1&&l(i.params,o.value.params)));function u(i={}){return b(i)?e[(0,n.R1)(t.replace)?"replace":"push"]((0,n.R1)(t.to)).catch(r):Promise.resolve()}return{route:o,href:(0,s.EW)((()=>o.value.href)),isActive:c,isExactActive:d,navigate:u}}Boolean,Boolean;function b(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function v(t,e){for(const i in e){const s=e[i],n=t[i];if("string"===typeof s){if(s!==n)return!1}else if(!o(n)||n.length!==s.length||s.some(((t,e)=>t!==n[e])))return!1}return!0}function y(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const _=(t,e,i)=>null!=t?t:null!=e?e:i;function x(){return(0,s.WQ)(f)}}}]);
//# sourceMappingURL=chunk-vendors.21a5d9ef.js.map